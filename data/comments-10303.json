[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1014616956",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10303#issuecomment-1014616956",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10303",
        "id": 1014616956,
        "node_id": "IC_kwDOCVq1mM48edN8",
        "user": {
            "login": "adepierre",
            "id": 24371370,
            "node_id": "MDQ6VXNlcjI0MzcxMzcw",
            "avatar_url": "https://avatars.githubusercontent.com/u/24371370?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/adepierre",
            "html_url": "https://github.com/adepierre",
            "followers_url": "https://api.github.com/users/adepierre/followers",
            "following_url": "https://api.github.com/users/adepierre/following{/other_user}",
            "gists_url": "https://api.github.com/users/adepierre/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/adepierre/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/adepierre/subscriptions",
            "organizations_url": "https://api.github.com/users/adepierre/orgs",
            "repos_url": "https://api.github.com/users/adepierre/repos",
            "events_url": "https://api.github.com/users/adepierre/events{/privacy}",
            "received_events_url": "https://api.github.com/users/adepierre/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-01-17T14:43:04Z",
        "updated_at": "2022-01-17T14:43:29Z",
        "author_association": "NONE",
        "body": "I think the problem is that you measure CPU time instead of GPU time in the pytorch case. Cuda is asynchronous, so CPU timers like time.time() won't measure the right inference time. You can try the solution provided in [this pytorch discussion](https://discuss.pytorch.org/t/how-to-measure-time-in-pytorch/26964) and see if it's more consistent with onnx time.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1014616956/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1014769457",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10303#issuecomment-1014769457",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10303",
        "id": 1014769457,
        "node_id": "IC_kwDOCVq1mM48fCcx",
        "user": {
            "login": "nssrivathsa",
            "id": 97871027,
            "node_id": "U_kgDOBdVksw",
            "avatar_url": "https://avatars.githubusercontent.com/u/97871027?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/nssrivathsa",
            "html_url": "https://github.com/nssrivathsa",
            "followers_url": "https://api.github.com/users/nssrivathsa/followers",
            "following_url": "https://api.github.com/users/nssrivathsa/following{/other_user}",
            "gists_url": "https://api.github.com/users/nssrivathsa/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/nssrivathsa/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/nssrivathsa/subscriptions",
            "organizations_url": "https://api.github.com/users/nssrivathsa/orgs",
            "repos_url": "https://api.github.com/users/nssrivathsa/repos",
            "events_url": "https://api.github.com/users/nssrivathsa/events{/privacy}",
            "received_events_url": "https://api.github.com/users/nssrivathsa/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-01-17T17:37:02Z",
        "updated_at": "2022-01-17T17:37:02Z",
        "author_association": "NONE",
        "body": "> I think the problem is that you measure CPU time instead of GPU time in the pytorch case. Cuda is asynchronous, so CPU timers like time.time() won't measure the right inference time. You can try the solution provided in [this pytorch discussion](https://discuss.pytorch.org/t/how-to-measure-time-in-pytorch/26964) and see if it's more consistent with onnx time.\r\n\r\nThanks for the reply\r\nI tried what was mentioned in the link you provided by modifying my ```infer_pytorch(resnet)``` function as \r\n```\r\n   start = torch.cuda.Event(enable_timing=True)\r\n   end = torch.cuda.Event(enable_timing=True)\r\n   start.record()\r\n   for i in range(total_samples):\r\n      resnet.eval()\r\n      with torch.no_grad():\r\n         out = resnet(x)\r\n   end.record()\r\n   torch.cuda.synchronize()\r\n   print('Number of runs:', total_samples)\r\n   print(\"Average PyTorch {} Inference time = {} ms\".format(device.type, start.elapsed_time(end)/total_samples))  \r\n   ```\r\n   Unfortunately, still see **not much of a difference in the pytorch inference time** \r\n   ```\r\n   Average PyTorch cuda Inference time = 9.928244140625 ms\r\n   ```\r\n   The onnxruntime inference is still the same (around 48 ms), so its still around 5 times slower",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1014769457/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1014773186",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10303#issuecomment-1014773186",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10303",
        "id": 1014773186,
        "node_id": "IC_kwDOCVq1mM48fDXC",
        "user": {
            "login": "adepierre",
            "id": 24371370,
            "node_id": "MDQ6VXNlcjI0MzcxMzcw",
            "avatar_url": "https://avatars.githubusercontent.com/u/24371370?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/adepierre",
            "html_url": "https://github.com/adepierre",
            "followers_url": "https://api.github.com/users/adepierre/followers",
            "following_url": "https://api.github.com/users/adepierre/following{/other_user}",
            "gists_url": "https://api.github.com/users/adepierre/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/adepierre/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/adepierre/subscriptions",
            "organizations_url": "https://api.github.com/users/adepierre/orgs",
            "repos_url": "https://api.github.com/users/adepierre/repos",
            "events_url": "https://api.github.com/users/adepierre/events{/privacy}",
            "received_events_url": "https://api.github.com/users/adepierre/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-01-17T17:43:29Z",
        "updated_at": "2022-01-17T17:44:07Z",
        "author_association": "NONE",
        "body": "I think you need to put the record and the synchronize inside your loop.  Something like that\r\n\r\n```python\r\n\r\nwith torch.no_grad():\r\n    resnet.eval()\r\n    for i in range(total_samples):\r\n        start.record()\r\n        out = resnet(x)\r\n        end.record()\r\n        torch.cuda.synchronize()\r\n        total_time += start.elapsed_time(end)\r\n``` ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1014773186/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1014777610",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10303#issuecomment-1014777610",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10303",
        "id": 1014777610,
        "node_id": "IC_kwDOCVq1mM48fEcK",
        "user": {
            "login": "nssrivathsa",
            "id": 97871027,
            "node_id": "U_kgDOBdVksw",
            "avatar_url": "https://avatars.githubusercontent.com/u/97871027?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/nssrivathsa",
            "html_url": "https://github.com/nssrivathsa",
            "followers_url": "https://api.github.com/users/nssrivathsa/followers",
            "following_url": "https://api.github.com/users/nssrivathsa/following{/other_user}",
            "gists_url": "https://api.github.com/users/nssrivathsa/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/nssrivathsa/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/nssrivathsa/subscriptions",
            "organizations_url": "https://api.github.com/users/nssrivathsa/orgs",
            "repos_url": "https://api.github.com/users/nssrivathsa/repos",
            "events_url": "https://api.github.com/users/nssrivathsa/events{/privacy}",
            "received_events_url": "https://api.github.com/users/nssrivathsa/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-01-17T17:51:20Z",
        "updated_at": "2022-01-17T17:51:20Z",
        "author_association": "NONE",
        "body": "> I think you need to put the record and the synchronize inside your loop. Something like that\r\n> \r\n> ```python\r\n> with torch.no_grad():\r\n>     resnet.eval()\r\n>     for i in range(total_samples):\r\n>         start.record()\r\n>         out = resnet(x)\r\n>         end.record()\r\n>         torch.cuda.synchronize()\r\n>         total_time += start.elapsed_time(end)\r\n> ```\r\n\r\nChanged it the way you have suggested. \r\nStill get it as,\r\n```Average PyTorch cuda Inference time = 9.747972169876098 ms```",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1014777610/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1014778738",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10303#issuecomment-1014778738",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10303",
        "id": 1014778738,
        "node_id": "IC_kwDOCVq1mM48fEty",
        "user": {
            "login": "adepierre",
            "id": 24371370,
            "node_id": "MDQ6VXNlcjI0MzcxMzcw",
            "avatar_url": "https://avatars.githubusercontent.com/u/24371370?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/adepierre",
            "html_url": "https://github.com/adepierre",
            "followers_url": "https://api.github.com/users/adepierre/followers",
            "following_url": "https://api.github.com/users/adepierre/following{/other_user}",
            "gists_url": "https://api.github.com/users/adepierre/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/adepierre/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/adepierre/subscriptions",
            "organizations_url": "https://api.github.com/users/adepierre/orgs",
            "repos_url": "https://api.github.com/users/adepierre/repos",
            "events_url": "https://api.github.com/users/adepierre/events{/privacy}",
            "received_events_url": "https://api.github.com/users/adepierre/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-01-17T17:53:24Z",
        "updated_at": "2022-01-17T17:53:24Z",
        "author_association": "NONE",
        "body": "Ok so it's probably not that",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1014778738/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1015986464",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10303#issuecomment-1015986464",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10303",
        "id": 1015986464,
        "node_id": "IC_kwDOCVq1mM48jrkg",
        "user": {
            "login": "edgchen1",
            "id": 18449977,
            "node_id": "MDQ6VXNlcjE4NDQ5OTc3",
            "avatar_url": "https://avatars.githubusercontent.com/u/18449977?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/edgchen1",
            "html_url": "https://github.com/edgchen1",
            "followers_url": "https://api.github.com/users/edgchen1/followers",
            "following_url": "https://api.github.com/users/edgchen1/following{/other_user}",
            "gists_url": "https://api.github.com/users/edgchen1/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/edgchen1/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/edgchen1/subscriptions",
            "organizations_url": "https://api.github.com/users/edgchen1/orgs",
            "repos_url": "https://api.github.com/users/edgchen1/repos",
            "events_url": "https://api.github.com/users/edgchen1/events{/privacy}",
            "received_events_url": "https://api.github.com/users/edgchen1/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-01-19T01:19:40Z",
        "updated_at": "2022-01-19T01:19:40Z",
        "author_association": "MEMBER",
        "body": "Is the input actually on GPU? In the code you provided, I see:\r\n`io_binding.bind_cpu_input(input_names, x)`\r\n\r\nSome other things to try:\r\nORT has some support for profiling: https://onnxruntime.ai/docs/performance/tune-performance.html#profiling-and-performance-report\r\n\r\nYou can also use [CUDA profiling tools](https://docs.nvidia.com/cuda/profiler-users-guide/index.html) like nvprof to get more detailed GPU usage info.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1015986464/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1018755693",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10303#issuecomment-1018755693",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10303",
        "id": 1018755693,
        "node_id": "IC_kwDOCVq1mM48uPpt",
        "user": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-01-21T18:25:17Z",
        "updated_at": "2022-01-21T18:25:17Z",
        "author_association": "MEMBER",
        "body": "@nssrivathsa, it is not fair comparison since latency for ORT including copying input tensor from cpu to GPU, while pytorch does not. Could  you bind GPU input, and measure the latency again?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1018755693/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1019739997",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10303#issuecomment-1019739997",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10303",
        "id": 1019739997,
        "node_id": "IC_kwDOCVq1mM48x_9d",
        "user": {
            "login": "nssrivathsa",
            "id": 97871027,
            "node_id": "U_kgDOBdVksw",
            "avatar_url": "https://avatars.githubusercontent.com/u/97871027?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/nssrivathsa",
            "html_url": "https://github.com/nssrivathsa",
            "followers_url": "https://api.github.com/users/nssrivathsa/followers",
            "following_url": "https://api.github.com/users/nssrivathsa/following{/other_user}",
            "gists_url": "https://api.github.com/users/nssrivathsa/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/nssrivathsa/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/nssrivathsa/subscriptions",
            "organizations_url": "https://api.github.com/users/nssrivathsa/orgs",
            "repos_url": "https://api.github.com/users/nssrivathsa/repos",
            "events_url": "https://api.github.com/users/nssrivathsa/events{/privacy}",
            "received_events_url": "https://api.github.com/users/nssrivathsa/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-01-24T05:40:49Z",
        "updated_at": "2022-01-24T05:40:49Z",
        "author_association": "NONE",
        "body": "> Is the input actually on GPU? In the code you provided, I see: `io_binding.bind_cpu_input(input_names, x)`\r\n> \r\n> Some other things to try: ORT has some support for profiling: https://onnxruntime.ai/docs/performance/tune-performance.html#profiling-and-performance-report\r\n> \r\n> You can also use [CUDA profiling tools](https://docs.nvidia.com/cuda/profiler-users-guide/index.html) like nvprof to get more detailed GPU usage info.\r\n\r\n@edgchen1 \r\n1) Yes, the input is on the GPU. io_binding.bind_cpu_input puts the input from the CPU to GPU as per 'Scenario 1' in this - http://www.xavierdupre.fr/app/onnxruntime/helpsphinx/api_summary.html under IOBinding. Nevertheless, I have modified it as \r\n```\r\ndata = onnxruntime.OrtValue.ortvalue_from_numpy(x, device.type, 0)\r\nio_binding.bind_input(input_names, device, 0, np.float32, [batch_size, 3, 224, 224], data.data_ptr())\r\n```\r\nand I still see no difference in the timing\r\n\r\n2) I did go through the profiling stuff from onnx and generated the runtime json file but could not infer much from it once I opened it from Google Chrome. Is there any help available on how to interpret the results?\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1019739997/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1019742421",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10303#issuecomment-1019742421",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10303",
        "id": 1019742421,
        "node_id": "IC_kwDOCVq1mM48yAjV",
        "user": {
            "login": "nssrivathsa",
            "id": 97871027,
            "node_id": "U_kgDOBdVksw",
            "avatar_url": "https://avatars.githubusercontent.com/u/97871027?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/nssrivathsa",
            "html_url": "https://github.com/nssrivathsa",
            "followers_url": "https://api.github.com/users/nssrivathsa/followers",
            "following_url": "https://api.github.com/users/nssrivathsa/following{/other_user}",
            "gists_url": "https://api.github.com/users/nssrivathsa/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/nssrivathsa/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/nssrivathsa/subscriptions",
            "organizations_url": "https://api.github.com/users/nssrivathsa/orgs",
            "repos_url": "https://api.github.com/users/nssrivathsa/repos",
            "events_url": "https://api.github.com/users/nssrivathsa/events{/privacy}",
            "received_events_url": "https://api.github.com/users/nssrivathsa/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-01-24T05:47:29Z",
        "updated_at": "2022-01-24T05:47:29Z",
        "author_association": "NONE",
        "body": "> @nssrivathsa, it is not fair comparison since latency for ORT including copying input tensor from cpu to GPU, while pytorch does not. Could you bind GPU input, and measure the latency again?\r\n\r\n@tianleiwu \r\n\r\nAs you can see for my above reply, io_binding.bind_cpu_input should also do what you are suggesting. Nevertheless, once I modify my code as - \r\n```\r\ndata = onnxruntime.OrtValue.ortvalue_from_numpy(x, device.type, 0)\r\nio_binding.bind_input(input_names, device, 0, np.float32, [batch_size, 3, 224, 224], data.data_ptr())\r\n```\r\nstill the timings on GPU for 1000 samples are -\r\n```\r\nAverage onnxruntime cuda Inference time = 44.55 ms\r\nAverage PyTorch cuda Inference time = 9.780553787231446 ms\r\n``` \r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1019742421/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1020328207",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10303#issuecomment-1020328207",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10303",
        "id": 1020328207,
        "node_id": "IC_kwDOCVq1mM480PkP",
        "user": {
            "login": "edgchen1",
            "id": 18449977,
            "node_id": "MDQ6VXNlcjE4NDQ5OTc3",
            "avatar_url": "https://avatars.githubusercontent.com/u/18449977?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/edgchen1",
            "html_url": "https://github.com/edgchen1",
            "followers_url": "https://api.github.com/users/edgchen1/followers",
            "following_url": "https://api.github.com/users/edgchen1/following{/other_user}",
            "gists_url": "https://api.github.com/users/edgchen1/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/edgchen1/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/edgchen1/subscriptions",
            "organizations_url": "https://api.github.com/users/edgchen1/orgs",
            "repos_url": "https://api.github.com/users/edgchen1/repos",
            "events_url": "https://api.github.com/users/edgchen1/events{/privacy}",
            "received_events_url": "https://api.github.com/users/edgchen1/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-01-24T17:03:14Z",
        "updated_at": "2022-01-24T17:03:14Z",
        "author_association": "MEMBER",
        "body": "> Yes, the input is on the GPU. io_binding.bind_cpu_input puts the input from the CPU to GPU as per 'Scenario 1' in this - http://www.xavierdupre.fr/app/onnxruntime/helpsphinx/api_summary.html under IOBinding.\r\n\r\nThe official docs are here: https://onnxruntime.ai/docs/api/python/api_summary.html\r\n\r\nhttps://onnxruntime.ai/docs/api/python/api_summary.html#onnxruntime.IOBinding.bind_cpu_input\r\nThe input is on CPU so it will need to be copied to the GPU.\r\n\r\n> I did go through the profiling stuff from onnx and generated the runtime json file but could not infer much from it once I opened it from Google Chrome. Is there any help available on how to interpret the results?\r\n\r\n@RandySheriffH is there some documentation about CUDA kernel profiling in ORT?\r\n\r\nYou can look for host to device memcpy's with nvprof to see whether the input is actually getting copied from CPU to GPU.\r\nhttps://docs.nvidia.com/cuda/profiler-users-guide/index.html#nvprof-overview\r\nVisual profiler can be used to view the nvprof results.\r\nhttps://docs.nvidia.com/cuda/profiler-users-guide/index.html#visual",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1020328207/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1057712246",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10303#issuecomment-1057712246",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10303",
        "id": 1057712246,
        "node_id": "IC_kwDOCVq1mM4_C2h2",
        "user": {
            "login": "nssrivathsa",
            "id": 97871027,
            "node_id": "U_kgDOBdVksw",
            "avatar_url": "https://avatars.githubusercontent.com/u/97871027?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/nssrivathsa",
            "html_url": "https://github.com/nssrivathsa",
            "followers_url": "https://api.github.com/users/nssrivathsa/followers",
            "following_url": "https://api.github.com/users/nssrivathsa/following{/other_user}",
            "gists_url": "https://api.github.com/users/nssrivathsa/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/nssrivathsa/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/nssrivathsa/subscriptions",
            "organizations_url": "https://api.github.com/users/nssrivathsa/orgs",
            "repos_url": "https://api.github.com/users/nssrivathsa/repos",
            "events_url": "https://api.github.com/users/nssrivathsa/events{/privacy}",
            "received_events_url": "https://api.github.com/users/nssrivathsa/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-03-03T06:13:16Z",
        "updated_at": "2022-03-03T06:13:16Z",
        "author_association": "NONE",
        "body": "I could not find the issue with profiling, as everything seems to take more time\r\nBut, I observed that running it on a machine with a more advanced GPU ensures that onnxruntime is faster than Pytorch\r\nFor e.g. on a Tesla T4 or Tesla V100 GPU, onnxruntime is around 4 times faster than pytorch",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1057712246/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1165792483",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10303#issuecomment-1165792483",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10303",
        "id": 1165792483,
        "node_id": "IC_kwDOCVq1mM5FfJTj",
        "user": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-06-24T17:39:16Z",
        "updated_at": "2022-06-24T17:39:16Z",
        "author_association": "MEMBER",
        "body": "@nssrivathsa, any update on this? Are you able to find the cause?\r\nIf you have nvprof results of ORT and PyTorch. You can compare the profiling result to see which cuda kernel or memory copy that ORT spent more time.\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1165792483/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1171154035",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10303#issuecomment-1171154035",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10303",
        "id": 1171154035,
        "node_id": "IC_kwDOCVq1mM5FzmRz",
        "user": {
            "login": "nssrivathsa",
            "id": 97871027,
            "node_id": "U_kgDOBdVksw",
            "avatar_url": "https://avatars.githubusercontent.com/u/97871027?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/nssrivathsa",
            "html_url": "https://github.com/nssrivathsa",
            "followers_url": "https://api.github.com/users/nssrivathsa/followers",
            "following_url": "https://api.github.com/users/nssrivathsa/following{/other_user}",
            "gists_url": "https://api.github.com/users/nssrivathsa/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/nssrivathsa/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/nssrivathsa/subscriptions",
            "organizations_url": "https://api.github.com/users/nssrivathsa/orgs",
            "repos_url": "https://api.github.com/users/nssrivathsa/repos",
            "events_url": "https://api.github.com/users/nssrivathsa/events{/privacy}",
            "received_events_url": "https://api.github.com/users/nssrivathsa/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-06-30T12:24:08Z",
        "updated_at": "2022-06-30T12:24:08Z",
        "author_association": "NONE",
        "body": "> \r\n@tianleiwu No, i am still not able to find the cause. But, like I mentioned, it does not happen when i run it with some advanced GPUs\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1171154035/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1171985403",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10303#issuecomment-1171985403",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10303",
        "id": 1171985403,
        "node_id": "IC_kwDOCVq1mM5F2xP7",
        "user": {
            "login": "yunjiangster",
            "id": 1061224,
            "node_id": "MDQ6VXNlcjEwNjEyMjQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1061224?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yunjiangster",
            "html_url": "https://github.com/yunjiangster",
            "followers_url": "https://api.github.com/users/yunjiangster/followers",
            "following_url": "https://api.github.com/users/yunjiangster/following{/other_user}",
            "gists_url": "https://api.github.com/users/yunjiangster/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yunjiangster/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yunjiangster/subscriptions",
            "organizations_url": "https://api.github.com/users/yunjiangster/orgs",
            "repos_url": "https://api.github.com/users/yunjiangster/repos",
            "events_url": "https://api.github.com/users/yunjiangster/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yunjiangster/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-07-01T06:27:44Z",
        "updated_at": "2022-07-01T06:27:44Z",
        "author_association": "NONE",
        "body": "@nssrivathsa Even on Tesla T4, I am seeing 2x slow down using onnx versus pytorch + fp16.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1171985403/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1174858731",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/10303#issuecomment-1174858731",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/10303",
        "id": 1174858731,
        "node_id": "IC_kwDOCVq1mM5GBuvr",
        "user": {
            "login": "nssrivathsa",
            "id": 97871027,
            "node_id": "U_kgDOBdVksw",
            "avatar_url": "https://avatars.githubusercontent.com/u/97871027?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/nssrivathsa",
            "html_url": "https://github.com/nssrivathsa",
            "followers_url": "https://api.github.com/users/nssrivathsa/followers",
            "following_url": "https://api.github.com/users/nssrivathsa/following{/other_user}",
            "gists_url": "https://api.github.com/users/nssrivathsa/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/nssrivathsa/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/nssrivathsa/subscriptions",
            "organizations_url": "https://api.github.com/users/nssrivathsa/orgs",
            "repos_url": "https://api.github.com/users/nssrivathsa/repos",
            "events_url": "https://api.github.com/users/nssrivathsa/events{/privacy}",
            "received_events_url": "https://api.github.com/users/nssrivathsa/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-07-05T09:49:39Z",
        "updated_at": "2022-07-05T09:49:39Z",
        "author_association": "NONE",
        "body": "@yunjiangster I haven't used any quantization yet, the script is same as what I have shared above and with that I see improvements when i use it with Tesla T4 on AWS",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1174858731/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]