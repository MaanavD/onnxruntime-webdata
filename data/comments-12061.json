[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1172551591",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/12061#issuecomment-1172551591",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/12061",
        "id": 1172551591,
        "node_id": "IC_kwDOCVq1mM5F47en",
        "user": {
            "login": "wschin",
            "id": 3524474,
            "node_id": "MDQ6VXNlcjM1MjQ0NzQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3524474?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/wschin",
            "html_url": "https://github.com/wschin",
            "followers_url": "https://api.github.com/users/wschin/followers",
            "following_url": "https://api.github.com/users/wschin/following{/other_user}",
            "gists_url": "https://api.github.com/users/wschin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/wschin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/wschin/subscriptions",
            "organizations_url": "https://api.github.com/users/wschin/orgs",
            "repos_url": "https://api.github.com/users/wschin/repos",
            "events_url": "https://api.github.com/users/wschin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/wschin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-07-01T17:07:59Z",
        "updated_at": "2022-07-01T17:14:20Z",
        "author_association": "MEMBER",
        "body": "This is a very hard task even at ORT team. With the next Visual Studio 2022 release, things will be easier. I can share a few steps (under Visual Studio 2022 cmd)  for how I walkaround this:\r\n\r\n1. Install Visual Studio 2022 and new CMake\r\n\r\n2. build ORT with\r\nPS C:\\Somewhere\\onnxruntime> .\\build.bat --config RelWithDebInfo --build_shared_lib --parallel --cmake_generator \"Visual Studio 17 2022\"\r\n\r\n3. PS C:\\Somewhere\\onnxruntime\\csharp> msbuild -t:restore OnnxRuntime.CSharp.sln -p:Configuration=RelWithDebInfo -p:Platform=\"Any CPU\" -p:SelectedTargets=All\r\n\r\n\r\n4. PS C:\\Somewhere\\onnxruntime\\csharp> msbuild -t:build OnnxRuntime.CSharp.sln -p:Configuration=RelWithDebInfo -p:Platform=\"Any CPU\"  -p:SelectedTargets=All\r\n\r\n\r\n5. remove C:\\Somewhere\\onnxruntime\\build\\Windows\\RelWithDebInfo\\RelWithDebInfo\\nuget-artifacts\r\nchange \"nuget-artifacts\" folder name in C:\\Somewhere\\onnxruntime\\tools\\nuget\\generate_nuspec_for_native_nuget.py to \"local-nuget-artifacts\"\r\n\r\n6. In, C:\\Somewhere\\onnxruntime\\csharp\\OnnxRuntime.CSharp.proj\r\nChange \r\n```\r\n\t    <Copy\r\n\t    SourceFiles=\"$(NativeBuildOutputDirAbs)\\$(OrtPackageId).$(PackageVersion).nupkg\"\r\n\t    DestinationFolder=\"$(NativeBuildOutputDirAbs)\\nuget-artifacts\"\r\n\t    />\r\n```\r\nto\r\n```\r\n\t    <Copy\r\n\t    SourceFiles=\"$(NativeBuildOutputDirAbs)\\$(OrtPackageId).$(PackageVersion).nupkg\"\r\n\t    DestinationFolder=\"$(NativeBuildOutputDirAbs)\\local-nuget-artifacts\"\r\n\t    />\r\n```\r\n\r\n7. PS C:\\Somewhere\\onnxruntime\\csharp>  msbuild .\\OnnxRuntime.CSharp.proj -t:CreatePackage -p:OrtPackageId=Microsoft.ML.OnnxRuntime -p:Configuration=RelWithDebInfo -p:Platform=\"Any CPU\" -p:SelectedTargets=All\r\n\r\n8. You can find nugets in C:\\Somewhere\\onnxruntime\\build\\Windows\\RelWithDebInfo\\RelWithDebInfo",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1172551591/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1172811721",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/12061#issuecomment-1172811721",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/12061",
        "id": 1172811721,
        "node_id": "IC_kwDOCVq1mM5F56_J",
        "user": {
            "login": "cqray1990",
            "id": 32585434,
            "node_id": "MDQ6VXNlcjMyNTg1NDM0",
            "avatar_url": "https://avatars.githubusercontent.com/u/32585434?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/cqray1990",
            "html_url": "https://github.com/cqray1990",
            "followers_url": "https://api.github.com/users/cqray1990/followers",
            "following_url": "https://api.github.com/users/cqray1990/following{/other_user}",
            "gists_url": "https://api.github.com/users/cqray1990/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/cqray1990/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/cqray1990/subscriptions",
            "organizations_url": "https://api.github.com/users/cqray1990/orgs",
            "repos_url": "https://api.github.com/users/cqray1990/repos",
            "events_url": "https://api.github.com/users/cqray1990/events{/privacy}",
            "received_events_url": "https://api.github.com/users/cqray1990/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-07-02T01:54:07Z",
        "updated_at": "2022-07-02T02:31:16Z",
        "author_association": "NONE",
        "body": "@wschin  can you  try to use git clone -b v1.6.0 https://github.com/microsoft/onnxruntime.git branch to build with vs 2022 ? i didn't find \"nuget-artifacts\" folder name in  tools\\nuget\\generate_nuspec_for_native_nuget.py ,so i didn't do this step, and then i run follows command:\r\n\r\nmsbuild .\\OnnxRuntime.CSharp.proj -t:CreatePackage -p:OrtPackageId=Microsoft.ML.OnnxRuntime -p:Configuration=RelWithDebInfo -p:Platform=\"Any CPU\" -p:SelectedTargets=All\r\n项目“C:\\pythonrun\\csharp\\OnnxRuntime.CSharp.proj”在节点 1 上(CreatePackage 个目标)。\r\nObtainPackageVersion:\r\n  git rev-parse --short HEAD\r\n  fatal: Needed a single revision\r\n\r\n“C:\\pythonrun\\csharp\\OnnxRuntime.CSharp.proj”(CreatePackage 目标) (1) ->\r\n(ObtainPackageVersion 目标) ->\r\n  C:\\pythonrun\\csharp\\OnnxRuntime.CSharp.proj(94,5): error MSB3073: 命令“git rev-parse --short HEAD”已退出，代码为 128。",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1172811721/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1172817626",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/12061#issuecomment-1172817626",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/12061",
        "id": 1172817626,
        "node_id": "IC_kwDOCVq1mM5F58ba",
        "user": {
            "login": "cqray1990",
            "id": 32585434,
            "node_id": "MDQ6VXNlcjMyNTg1NDM0",
            "avatar_url": "https://avatars.githubusercontent.com/u/32585434?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/cqray1990",
            "html_url": "https://github.com/cqray1990",
            "followers_url": "https://api.github.com/users/cqray1990/followers",
            "following_url": "https://api.github.com/users/cqray1990/following{/other_user}",
            "gists_url": "https://api.github.com/users/cqray1990/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/cqray1990/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/cqray1990/subscriptions",
            "organizations_url": "https://api.github.com/users/cqray1990/orgs",
            "repos_url": "https://api.github.com/users/cqray1990/repos",
            "events_url": "https://api.github.com/users/cqray1990/events{/privacy}",
            "received_events_url": "https://api.github.com/users/cqray1990/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-07-02T02:33:47Z",
        "updated_at": "2022-07-02T15:05:03Z",
        "author_association": "NONE",
        "body": "@wschin \r\nwhere is nuget-artifacts\" folder name in C:\\Somewhere\\onnxruntime\\tools\\nuget\\generate_nuspec_for_native_nuget.py and where should i modify? step1 2,3 all passed, but 4,5,6,7,8 not\r\n\r\nwhen i run the step 4 command: errors is as follows:\r\n\r\n\r\nCreatePackage:\r\n  Generating nuspec for the native Nuget package ...\r\n  python ..\\tools\\nuget\\generate_nuspec_for_native_nuget.py --package_version 1.6.0-dev-20220702-0721-718ca7f92 --packa\r\n  ge_name Microsoft.ML.OnnxRuntime --target_architecture x64 --build_config RelWithDebInfo --native_build_path C:\\onnxr\r\n  untime\\build\\Windows\\RelWithDebInfo\\RelWithDebInfo --packages_path C:\\onnxruntime\\build\\Windows\\packages --ort_build_\r\n  path C:\\onnxruntime\\build\\Windows --sources_path C:\\onnxruntime --commit_id 718ca7f92085bef4b19b1acc71c1e1f3daccde94\r\n  --is_release_build false --execution_provider None --is_store_build false\r\n\r\n  Traceback (most recent call last):\r\n    File \"..\\tools\\nuget\\generate_nuspec_for_native_nuget.py\", line 500, in <module>\r\n      sys.exit(main())\r\n    File \"..\\tools\\nuget\\generate_nuspec_for_native_nuget.py\", line 495, in main\r\n      f.write(line)\r\n  UnicodeEncodeError: 'gbk' codec can't encode character '\\xc2' in position 11: illegal multibyte sequence\r\n\r\n\r\ni change     File \"..\\tools\\nuget\\generate_nuspec_for_native_nuget.py\", line 495\r\n  with open(os.path.join(args.native_build_path, 'NativeNuget.nuspec'), 'w',encoding=\"utf-8\") as f:\r\n        for line in lines:\r\n            f.write(line)\r\n            f.write('\\n')\r\n\r\nand i continue build\r\nmsbuild .\\OnnxRuntime.CSharp.proj -t:CreatePackage -p:OrtPackageId=Microsoft.ML.OnnxRuntime -p:Configuration=RelWithDebInfo -p:Platform=\"Any CPU\" -p:SelectedTargets=All\r\n\r\nfinally there is only an Microsoft.ML.OnnxRuntime.Managed.1.6.0-dev-20220702-0903-718ca7f92 in C:\\onnxruntime\\build\\Windows\\RelWithDebInfo\\RelWithDebInfo\\nuget-artifacts. didn't it success?\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1172817626/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1175250544",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/12061#issuecomment-1175250544",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/12061",
        "id": 1175250544,
        "node_id": "IC_kwDOCVq1mM5GDOZw",
        "user": {
            "login": "wschin",
            "id": 3524474,
            "node_id": "MDQ6VXNlcjM1MjQ0NzQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3524474?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/wschin",
            "html_url": "https://github.com/wschin",
            "followers_url": "https://api.github.com/users/wschin/followers",
            "following_url": "https://api.github.com/users/wschin/following{/other_user}",
            "gists_url": "https://api.github.com/users/wschin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/wschin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/wschin/subscriptions",
            "organizations_url": "https://api.github.com/users/wschin/orgs",
            "repos_url": "https://api.github.com/users/wschin/repos",
            "events_url": "https://api.github.com/users/wschin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/wschin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-07-05T16:25:43Z",
        "updated_at": "2022-07-05T16:25:43Z",
        "author_association": "MEMBER",
        "body": "In addition to `Microsoft.ML.OnnxRuntime.Managed.1.6.0-dev-20220702-0903-718ca7f92`, please also search for non-managed under `C:\\onnxruntime\\build\\Windows\\RelWithDebInfo\\RelWithDebInfo\\`. Then you should be good. :)",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1175250544/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]