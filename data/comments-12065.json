[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1172530249",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/12065#issuecomment-1172530249",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/12065",
        "id": 1172530249,
        "node_id": "IC_kwDOCVq1mM5F42RJ",
        "user": {
            "login": "wschin",
            "id": 3524474,
            "node_id": "MDQ6VXNlcjM1MjQ0NzQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3524474?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/wschin",
            "html_url": "https://github.com/wschin",
            "followers_url": "https://api.github.com/users/wschin/followers",
            "following_url": "https://api.github.com/users/wschin/following{/other_user}",
            "gists_url": "https://api.github.com/users/wschin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/wschin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/wschin/subscriptions",
            "organizations_url": "https://api.github.com/users/wschin/orgs",
            "repos_url": "https://api.github.com/users/wschin/repos",
            "events_url": "https://api.github.com/users/wschin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/wschin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-07-01T16:43:50Z",
        "updated_at": "2022-07-01T16:43:50Z",
        "author_association": "MEMBER",
        "body": "Are you able to run shape inference and print `Where` inputs and output shapes? Instructions for shape inference are [here](https://github.com/onnx/onnx/blob/main/docs/PythonAPIOverview.md#running-shape-inference-on-an-onnx-model). My initial guess is that an upstream operator doesn't generate the expected shape.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1172530249/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1172622883",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/12065#issuecomment-1172622883",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/12065",
        "id": 1172622883,
        "node_id": "IC_kwDOCVq1mM5F5M4j",
        "user": {
            "login": "piraka9011",
            "id": 16828657,
            "node_id": "MDQ6VXNlcjE2ODI4NjU3",
            "avatar_url": "https://avatars.githubusercontent.com/u/16828657?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/piraka9011",
            "html_url": "https://github.com/piraka9011",
            "followers_url": "https://api.github.com/users/piraka9011/followers",
            "following_url": "https://api.github.com/users/piraka9011/following{/other_user}",
            "gists_url": "https://api.github.com/users/piraka9011/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/piraka9011/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/piraka9011/subscriptions",
            "organizations_url": "https://api.github.com/users/piraka9011/orgs",
            "repos_url": "https://api.github.com/users/piraka9011/repos",
            "events_url": "https://api.github.com/users/piraka9011/events{/privacy}",
            "received_events_url": "https://api.github.com/users/piraka9011/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-07-01T18:47:10Z",
        "updated_at": "2022-07-01T18:50:10Z",
        "author_association": "NONE",
        "body": "I'm not sure I understand what exactly I need to do but this is what I did:\r\n\r\n```py\r\nimport onnx\r\nfrom onnx import shape_inference\r\nmodel_path = \"/path/to/model.onnx\"\r\nonnx_model = onnx.load(model_path)\r\ninferred_model = shape_inference.infer_shapes(onnx_model)\r\nprint(inferred_model.graph.value_info)\r\n```\r\n\r\nThe output is attached. I could not find a `Where_35` specifically, but there were other `Where` operators with nothing suspicious about the dims that I could see.\r\n\r\nI only found one operation with a dimension of 12288 and that's a `Slice_933`.\r\n\r\n[graph_val_info.txt](https://github.com/microsoft/onnxruntime/files/9031031/graph_val_info.txt)\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1172622883/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1172723423",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/12065#issuecomment-1172723423",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/12065",
        "id": 1172723423,
        "node_id": "IC_kwDOCVq1mM5F5lbf",
        "user": {
            "login": "wschin",
            "id": 3524474,
            "node_id": "MDQ6VXNlcjM1MjQ0NzQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3524474?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/wschin",
            "html_url": "https://github.com/wschin",
            "followers_url": "https://api.github.com/users/wschin/followers",
            "following_url": "https://api.github.com/users/wschin/following{/other_user}",
            "gists_url": "https://api.github.com/users/wschin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/wschin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/wschin/subscriptions",
            "organizations_url": "https://api.github.com/users/wschin/orgs",
            "repos_url": "https://api.github.com/users/wschin/repos",
            "events_url": "https://api.github.com/users/wschin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/wschin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-07-01T21:25:15Z",
        "updated_at": "2022-07-01T21:25:15Z",
        "author_association": "MEMBER",
        "body": "Thanks. That's what I am looing for.\r\nPer [Where's spec](https://github.com/onnx/onnx/blob/main/docs/Operators.md#where), its two inputs `X` and `Y` should have compatible shapes. For non-equal dimension, one of them must be 1. In your case, we see a dimension pair (12288, 12376), which is illegal. Legal cases can be (1, 12376), (12288, 1), (12288, 12288), and (12376, 12376). To narrow the error, we need more information because both of exporter and onnxruntime can be incorrect. First, I'd like to find the `first` incorrect operation in the graph. Can you run shape inference again with shorter audio sequence and check if `Slice_933` produces expected shape?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1172723423/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1172849951",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/12065#issuecomment-1172849951",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/12065",
        "id": 1172849951,
        "node_id": "IC_kwDOCVq1mM5F6EUf",
        "user": {
            "login": "piraka9011",
            "id": 16828657,
            "node_id": "MDQ6VXNlcjE2ODI4NjU3",
            "avatar_url": "https://avatars.githubusercontent.com/u/16828657?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/piraka9011",
            "html_url": "https://github.com/piraka9011",
            "followers_url": "https://api.github.com/users/piraka9011/followers",
            "following_url": "https://api.github.com/users/piraka9011/following{/other_user}",
            "gists_url": "https://api.github.com/users/piraka9011/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/piraka9011/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/piraka9011/subscriptions",
            "organizations_url": "https://api.github.com/users/piraka9011/orgs",
            "repos_url": "https://api.github.com/users/piraka9011/repos",
            "events_url": "https://api.github.com/users/piraka9011/events{/privacy}",
            "received_events_url": "https://api.github.com/users/piraka9011/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-07-02T07:06:28Z",
        "updated_at": "2022-07-02T07:19:23Z",
        "author_association": "NONE",
        "body": "> Can you run shape inference again with shorter audio sequence\r\n\r\nI'm unsure what you mean there?\r\nDo you mean run a single pass of a short audio file through the Onnx model then perform shape inference?\r\n\r\n```py\r\nimport numpy as np\r\n\r\nsample_filepath = \"/path/to/sample.npz\"\r\nsample = np.load(sample_filepath)\r\noutputs = self.ort_session.run(None, {\"audio_signal\": sample[\"audio_signal\"], \"length\": sample[\"length\"]})\r\n...\r\n# Run shape inference...\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1172849951/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1176200048",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/12065#issuecomment-1176200048",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/12065",
        "id": 1176200048,
        "node_id": "IC_kwDOCVq1mM5GG2Nw",
        "user": {
            "login": "piraka9011",
            "id": 16828657,
            "node_id": "MDQ6VXNlcjE2ODI4NjU3",
            "avatar_url": "https://avatars.githubusercontent.com/u/16828657?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/piraka9011",
            "html_url": "https://github.com/piraka9011",
            "followers_url": "https://api.github.com/users/piraka9011/followers",
            "following_url": "https://api.github.com/users/piraka9011/following{/other_user}",
            "gists_url": "https://api.github.com/users/piraka9011/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/piraka9011/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/piraka9011/subscriptions",
            "organizations_url": "https://api.github.com/users/piraka9011/orgs",
            "repos_url": "https://api.github.com/users/piraka9011/repos",
            "events_url": "https://api.github.com/users/piraka9011/events{/privacy}",
            "received_events_url": "https://api.github.com/users/piraka9011/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-07-06T13:06:37Z",
        "updated_at": "2022-07-06T13:06:37Z",
        "author_association": "NONE",
        "body": "@wschin bump here, just need a little bit of guidance/clarity on your request to help you out :)",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1176200048/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]