[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/511939098",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1409#issuecomment-511939098",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1409",
        "id": 511939098,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUxMTkzOTA5OA==",
        "user": {
            "login": "HectorSVC",
            "id": 29932710,
            "node_id": "MDQ6VXNlcjI5OTMyNzEw",
            "avatar_url": "https://avatars.githubusercontent.com/u/29932710?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/HectorSVC",
            "html_url": "https://github.com/HectorSVC",
            "followers_url": "https://api.github.com/users/HectorSVC/followers",
            "following_url": "https://api.github.com/users/HectorSVC/following{/other_user}",
            "gists_url": "https://api.github.com/users/HectorSVC/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/HectorSVC/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/HectorSVC/subscriptions",
            "organizations_url": "https://api.github.com/users/HectorSVC/orgs",
            "repos_url": "https://api.github.com/users/HectorSVC/repos",
            "events_url": "https://api.github.com/users/HectorSVC/events{/privacy}",
            "received_events_url": "https://api.github.com/users/HectorSVC/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-07-16T18:46:54Z",
        "updated_at": "2019-07-16T18:46:54Z",
        "author_association": "MEMBER",
        "body": "we have the delay link specified: https://github.com/microsoft/onnxruntime/blob/d38badffdba37ad396af03849d245463ff302004/cmake/CMakeLists.txt#L583-L585 \r\nHowever, in cuda 10.1, seems they changed the rules for some naming, they have cublas64_10.dll, and cudart64_101.dll which breaks the rule in our code. will fix it.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/511939098/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/511971393",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1409#issuecomment-511971393",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1409",
        "id": 511971393,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUxMTk3MTM5Mw==",
        "user": {
            "login": "HectorSVC",
            "id": 29932710,
            "node_id": "MDQ6VXNlcjI5OTMyNzEw",
            "avatar_url": "https://avatars.githubusercontent.com/u/29932710?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/HectorSVC",
            "html_url": "https://github.com/HectorSVC",
            "followers_url": "https://api.github.com/users/HectorSVC/followers",
            "following_url": "https://api.github.com/users/HectorSVC/following{/other_user}",
            "gists_url": "https://api.github.com/users/HectorSVC/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/HectorSVC/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/HectorSVC/subscriptions",
            "organizations_url": "https://api.github.com/users/HectorSVC/orgs",
            "repos_url": "https://api.github.com/users/HectorSVC/repos",
            "events_url": "https://api.github.com/users/HectorSVC/events{/privacy}",
            "received_events_url": "https://api.github.com/users/HectorSVC/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-07-16T20:23:52Z",
        "updated_at": "2019-07-16T20:23:52Z",
        "author_association": "MEMBER",
        "body": "https://github.com/microsoft/onnxruntime/pull/1418",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/511971393/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/511982319",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1409#issuecomment-511982319",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1409",
        "id": 511982319,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUxMTk4MjMxOQ==",
        "user": {
            "login": "xgirones",
            "id": 30896820,
            "node_id": "MDQ6VXNlcjMwODk2ODIw",
            "avatar_url": "https://avatars.githubusercontent.com/u/30896820?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/xgirones",
            "html_url": "https://github.com/xgirones",
            "followers_url": "https://api.github.com/users/xgirones/followers",
            "following_url": "https://api.github.com/users/xgirones/following{/other_user}",
            "gists_url": "https://api.github.com/users/xgirones/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/xgirones/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/xgirones/subscriptions",
            "organizations_url": "https://api.github.com/users/xgirones/orgs",
            "repos_url": "https://api.github.com/users/xgirones/repos",
            "events_url": "https://api.github.com/users/xgirones/events{/privacy}",
            "received_events_url": "https://api.github.com/users/xgirones/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-07-16T20:54:07Z",
        "updated_at": "2019-07-16T20:54:07Z",
        "author_association": "NONE",
        "body": "Thanks for the quick fix of the delay-load import. \r\n\r\nAny suggestion about the first part of the issue? That is the one that is really a stopper for me. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/511982319/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/512001327",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1409#issuecomment-512001327",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1409",
        "id": 512001327,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUxMjAwMTMyNw==",
        "user": {
            "login": "HectorSVC",
            "id": 29932710,
            "node_id": "MDQ6VXNlcjI5OTMyNzEw",
            "avatar_url": "https://avatars.githubusercontent.com/u/29932710?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/HectorSVC",
            "html_url": "https://github.com/HectorSVC",
            "followers_url": "https://api.github.com/users/HectorSVC/followers",
            "following_url": "https://api.github.com/users/HectorSVC/following{/other_user}",
            "gists_url": "https://api.github.com/users/HectorSVC/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/HectorSVC/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/HectorSVC/subscriptions",
            "organizations_url": "https://api.github.com/users/HectorSVC/orgs",
            "repos_url": "https://api.github.com/users/HectorSVC/repos",
            "events_url": "https://api.github.com/users/HectorSVC/events{/privacy}",
            "received_events_url": "https://api.github.com/users/HectorSVC/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-07-16T21:49:12Z",
        "updated_at": "2019-07-16T22:17:48Z",
        "author_association": "MEMBER",
        "body": "There are 3 issues here:\r\n1. Python api don't have an option to register provider manually.\r\nhttps://github.com/microsoft/onnxruntime/blob/c2aa2056b5af089a7be60f75e1f2c1ec107be0b2/onnxruntime/python/onnxruntime_pybind_state.cc#L216-L268\r\n#ifdef USE_CUDA\r\n  {\r\n    RegisterExecutionProvider(sess, *onnxruntime::CreateExecutionProviderFactory_CUDA(0));\r\n  }\r\nIt used to work for you becase there used to be a package with cuda dll inside which is wrong.\r\nIs it possible for you to use C API?\r\n2. data_transfer_mgr_.RegisterDataTransfer(std::make_unique<GPUDataTransfer>()); uses MACRO #ifdef USE_CUDA\r\nhttps://github.com/microsoft/onnxruntime/pull/1420\r\n3. CUDA dll delay load for cuda 10.1, Nvidia dll naming change.\r\nhttps://github.com/microsoft/onnxruntime/pull/1418\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/512001327/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/512001804",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1409#issuecomment-512001804",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1409",
        "id": 512001804,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUxMjAwMTgwNA==",
        "user": {
            "login": "linkerzhang",
            "id": 5194557,
            "node_id": "MDQ6VXNlcjUxOTQ1NTc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5194557?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/linkerzhang",
            "html_url": "https://github.com/linkerzhang",
            "followers_url": "https://api.github.com/users/linkerzhang/followers",
            "following_url": "https://api.github.com/users/linkerzhang/following{/other_user}",
            "gists_url": "https://api.github.com/users/linkerzhang/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/linkerzhang/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/linkerzhang/subscriptions",
            "organizations_url": "https://api.github.com/users/linkerzhang/orgs",
            "repos_url": "https://api.github.com/users/linkerzhang/repos",
            "events_url": "https://api.github.com/users/linkerzhang/events{/privacy}",
            "received_events_url": "https://api.github.com/users/linkerzhang/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-07-16T21:50:50Z",
        "updated_at": "2019-07-16T22:12:57Z",
        "author_association": "CONTRIBUTOR",
        "body": "Thanks a lot! I'm working on the 2nd above - data_transfer_mgr_.RegisterDataTransfer(std::make_unique()); uses MACRO #ifdef USE_CUDA. #1420 is fixing the 2nd above",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/512001804/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/512011596",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1409#issuecomment-512011596",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1409",
        "id": 512011596,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUxMjAxMTU5Ng==",
        "user": {
            "login": "HectorSVC",
            "id": 29932710,
            "node_id": "MDQ6VXNlcjI5OTMyNzEw",
            "avatar_url": "https://avatars.githubusercontent.com/u/29932710?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/HectorSVC",
            "html_url": "https://github.com/HectorSVC",
            "followers_url": "https://api.github.com/users/HectorSVC/followers",
            "following_url": "https://api.github.com/users/HectorSVC/following{/other_user}",
            "gists_url": "https://api.github.com/users/HectorSVC/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/HectorSVC/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/HectorSVC/subscriptions",
            "organizations_url": "https://api.github.com/users/HectorSVC/orgs",
            "repos_url": "https://api.github.com/users/HectorSVC/repos",
            "events_url": "https://api.github.com/users/HectorSVC/events{/privacy}",
            "received_events_url": "https://api.github.com/users/HectorSVC/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-07-16T22:19:47Z",
        "updated_at": "2019-07-16T22:19:47Z",
        "author_association": "MEMBER",
        "body": "For the 1st issue, we firstly need to provide a Python API to enable user to register the execution provider manually. Once the API is ready we can remove the static register code in Pybind. Please expect our future update on this.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/512011596/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/512339499",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1409#issuecomment-512339499",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1409",
        "id": 512339499,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUxMjMzOTQ5OQ==",
        "user": {
            "login": "xgirones",
            "id": 30896820,
            "node_id": "MDQ6VXNlcjMwODk2ODIw",
            "avatar_url": "https://avatars.githubusercontent.com/u/30896820?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/xgirones",
            "html_url": "https://github.com/xgirones",
            "followers_url": "https://api.github.com/users/xgirones/followers",
            "following_url": "https://api.github.com/users/xgirones/following{/other_user}",
            "gists_url": "https://api.github.com/users/xgirones/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/xgirones/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/xgirones/subscriptions",
            "organizations_url": "https://api.github.com/users/xgirones/orgs",
            "repos_url": "https://api.github.com/users/xgirones/repos",
            "events_url": "https://api.github.com/users/xgirones/events{/privacy}",
            "received_events_url": "https://api.github.com/users/xgirones/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-07-17T15:49:05Z",
        "updated_at": "2019-07-17T15:49:05Z",
        "author_association": "NONE",
        "body": "Thanks for your response.\r\n\r\n> It used to work for you becase there used to be a package with cuda dll inside which is wrong.\r\n> Is it possible for you to use C API?\r\n \r\nI mostly use the C API exported by the shared library.  On the other hand, it will be great to be able to register the CUDA provider on Python: I use the Python version mainly for testing, and so far I have to keep two separate environments, one for CPU and another for GPU.\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/512339499/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/513328096",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1409#issuecomment-513328096",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1409",
        "id": 513328096,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUxMzMyODA5Ng==",
        "user": {
            "login": "HectorSVC",
            "id": 29932710,
            "node_id": "MDQ6VXNlcjI5OTMyNzEw",
            "avatar_url": "https://avatars.githubusercontent.com/u/29932710?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/HectorSVC",
            "html_url": "https://github.com/HectorSVC",
            "followers_url": "https://api.github.com/users/HectorSVC/followers",
            "following_url": "https://api.github.com/users/HectorSVC/following{/other_user}",
            "gists_url": "https://api.github.com/users/HectorSVC/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/HectorSVC/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/HectorSVC/subscriptions",
            "organizations_url": "https://api.github.com/users/HectorSVC/orgs",
            "repos_url": "https://api.github.com/users/HectorSVC/repos",
            "events_url": "https://api.github.com/users/HectorSVC/events{/privacy}",
            "received_events_url": "https://api.github.com/users/HectorSVC/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-07-19T18:20:22Z",
        "updated_at": "2019-07-19T18:20:22Z",
        "author_association": "MEMBER",
        "body": "For the 1st issue, we created a work item for this as it need time to make it happen. We need to find a solution for delay loading on Linux, then enable registering execution providing manually with session option (the session option set to CUDA for GPU package by default).\r\n\r\nFor now, please install CPU package on CPU only machine, or use C API.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/513328096/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/513357947",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1409#issuecomment-513357947",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1409",
        "id": 513357947,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUxMzM1Nzk0Nw==",
        "user": {
            "login": "xgirones",
            "id": 30896820,
            "node_id": "MDQ6VXNlcjMwODk2ODIw",
            "avatar_url": "https://avatars.githubusercontent.com/u/30896820?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/xgirones",
            "html_url": "https://github.com/xgirones",
            "followers_url": "https://api.github.com/users/xgirones/followers",
            "following_url": "https://api.github.com/users/xgirones/following{/other_user}",
            "gists_url": "https://api.github.com/users/xgirones/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/xgirones/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/xgirones/subscriptions",
            "organizations_url": "https://api.github.com/users/xgirones/orgs",
            "repos_url": "https://api.github.com/users/xgirones/repos",
            "events_url": "https://api.github.com/users/xgirones/events{/privacy}",
            "received_events_url": "https://api.github.com/users/xgirones/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-07-19T19:56:55Z",
        "updated_at": "2019-07-19T19:56:55Z",
        "author_association": "NONE",
        "body": "Using the C API did not work for me. I found this issue in the shared library.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/513357947/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/513394793",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1409#issuecomment-513394793",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1409",
        "id": 513394793,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUxMzM5NDc5Mw==",
        "user": {
            "login": "HectorSVC",
            "id": 29932710,
            "node_id": "MDQ6VXNlcjI5OTMyNzEw",
            "avatar_url": "https://avatars.githubusercontent.com/u/29932710?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/HectorSVC",
            "html_url": "https://github.com/HectorSVC",
            "followers_url": "https://api.github.com/users/HectorSVC/followers",
            "following_url": "https://api.github.com/users/HectorSVC/following{/other_user}",
            "gists_url": "https://api.github.com/users/HectorSVC/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/HectorSVC/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/HectorSVC/subscriptions",
            "organizations_url": "https://api.github.com/users/HectorSVC/orgs",
            "repos_url": "https://api.github.com/users/HectorSVC/repos",
            "events_url": "https://api.github.com/users/HectorSVC/events{/privacy}",
            "received_events_url": "https://api.github.com/users/HectorSVC/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-07-19T22:09:30Z",
        "updated_at": "2019-07-19T22:09:30Z",
        "author_association": "MEMBER",
        "body": "did you specify the option \"--build_shared_lib\" when you build it?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/513394793/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/513457350",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1409#issuecomment-513457350",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1409",
        "id": 513457350,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUxMzQ1NzM1MA==",
        "user": {
            "login": "xgirones",
            "id": 30896820,
            "node_id": "MDQ6VXNlcjMwODk2ODIw",
            "avatar_url": "https://avatars.githubusercontent.com/u/30896820?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/xgirones",
            "html_url": "https://github.com/xgirones",
            "followers_url": "https://api.github.com/users/xgirones/followers",
            "following_url": "https://api.github.com/users/xgirones/following{/other_user}",
            "gists_url": "https://api.github.com/users/xgirones/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/xgirones/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/xgirones/subscriptions",
            "organizations_url": "https://api.github.com/users/xgirones/orgs",
            "repos_url": "https://api.github.com/users/xgirones/repos",
            "events_url": "https://api.github.com/users/xgirones/events{/privacy}",
            "received_events_url": "https://api.github.com/users/xgirones/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-07-20T10:48:50Z",
        "updated_at": "2019-07-20T10:48:50Z",
        "author_association": "NONE",
        "body": "yes, I used the following statement:\r\n\r\n`build.bat --config RelWithDebInfo --use_mkldnn --use_cuda --build_shared_lib  --cudnn_home %CUDNN_PATH% --cuda_home \"%CUDA_PATH%\"`",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/513457350/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/513591221",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1409#issuecomment-513591221",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1409",
        "id": 513591221,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUxMzU5MTIyMQ==",
        "user": {
            "login": "xgirones",
            "id": 30896820,
            "node_id": "MDQ6VXNlcjMwODk2ODIw",
            "avatar_url": "https://avatars.githubusercontent.com/u/30896820?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/xgirones",
            "html_url": "https://github.com/xgirones",
            "followers_url": "https://api.github.com/users/xgirones/followers",
            "following_url": "https://api.github.com/users/xgirones/following{/other_user}",
            "gists_url": "https://api.github.com/users/xgirones/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/xgirones/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/xgirones/subscriptions",
            "organizations_url": "https://api.github.com/users/xgirones/orgs",
            "repos_url": "https://api.github.com/users/xgirones/repos",
            "events_url": "https://api.github.com/users/xgirones/events{/privacy}",
            "received_events_url": "https://api.github.com/users/xgirones/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-07-21T22:01:49Z",
        "updated_at": "2019-07-21T22:01:49Z",
        "author_association": "NONE",
        "body": "I have compiled the shared library from the code pulled today from the master branch and the problem is gone. Thanks a lot!\r\n\r\nUnfortunately, a new issue has appeared when doing inference on batches of sequences of varying lengths from multiple threads (on a single session, and also when using one session per thread). Eventually this error appears:\r\n\r\n`OrtRun failed: Non-zero status code returned while running Node.`\r\n\r\nAny idea?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/513591221/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/513910965",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1409#issuecomment-513910965",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1409",
        "id": 513910965,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUxMzkxMDk2NQ==",
        "user": {
            "login": "HectorSVC",
            "id": 29932710,
            "node_id": "MDQ6VXNlcjI5OTMyNzEw",
            "avatar_url": "https://avatars.githubusercontent.com/u/29932710?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/HectorSVC",
            "html_url": "https://github.com/HectorSVC",
            "followers_url": "https://api.github.com/users/HectorSVC/followers",
            "following_url": "https://api.github.com/users/HectorSVC/following{/other_user}",
            "gists_url": "https://api.github.com/users/HectorSVC/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/HectorSVC/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/HectorSVC/subscriptions",
            "organizations_url": "https://api.github.com/users/HectorSVC/orgs",
            "repos_url": "https://api.github.com/users/HectorSVC/repos",
            "events_url": "https://api.github.com/users/HectorSVC/events{/privacy}",
            "received_events_url": "https://api.github.com/users/HectorSVC/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-07-22T18:58:15Z",
        "updated_at": "2019-07-22T18:58:15Z",
        "author_association": "MEMBER",
        "body": "single session with multiple threads not work for CUDA because of the memory life cycle issue. It should work if you have separate session (Ort::Session) on different thread. How about the CPU side? has same issue or only on GPU?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/513910965/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/513942619",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1409#issuecomment-513942619",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1409",
        "id": 513942619,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUxMzk0MjYxOQ==",
        "user": {
            "login": "xgirones",
            "id": 30896820,
            "node_id": "MDQ6VXNlcjMwODk2ODIw",
            "avatar_url": "https://avatars.githubusercontent.com/u/30896820?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/xgirones",
            "html_url": "https://github.com/xgirones",
            "followers_url": "https://api.github.com/users/xgirones/followers",
            "following_url": "https://api.github.com/users/xgirones/following{/other_user}",
            "gists_url": "https://api.github.com/users/xgirones/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/xgirones/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/xgirones/subscriptions",
            "organizations_url": "https://api.github.com/users/xgirones/orgs",
            "repos_url": "https://api.github.com/users/xgirones/repos",
            "events_url": "https://api.github.com/users/xgirones/events{/privacy}",
            "received_events_url": "https://api.github.com/users/xgirones/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-07-22T20:31:51Z",
        "updated_at": "2019-07-22T20:31:51Z",
        "author_association": "NONE",
        "body": "This only occurs on GPU when using the model referenced in #1400. I also tried with a model that does not involve RNN and it worked fine.\r\n\r\nParallel RNN evaluation of batches of sequences with varying lengths used to work (although with incorrect results as reported in #1400) when employing one session per thread.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/513942619/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/513973237",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1409#issuecomment-513973237",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1409",
        "id": 513973237,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUxMzk3MzIzNw==",
        "user": {
            "login": "HectorSVC",
            "id": 29932710,
            "node_id": "MDQ6VXNlcjI5OTMyNzEw",
            "avatar_url": "https://avatars.githubusercontent.com/u/29932710?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/HectorSVC",
            "html_url": "https://github.com/HectorSVC",
            "followers_url": "https://api.github.com/users/HectorSVC/followers",
            "following_url": "https://api.github.com/users/HectorSVC/following{/other_user}",
            "gists_url": "https://api.github.com/users/HectorSVC/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/HectorSVC/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/HectorSVC/subscriptions",
            "organizations_url": "https://api.github.com/users/HectorSVC/orgs",
            "repos_url": "https://api.github.com/users/HectorSVC/repos",
            "events_url": "https://api.github.com/users/HectorSVC/events{/privacy}",
            "received_events_url": "https://api.github.com/users/HectorSVC/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-07-22T22:06:54Z",
        "updated_at": "2019-07-22T22:06:54Z",
        "author_association": "MEMBER",
        "body": "https://github.com/microsoft/onnxruntime/pull/1463 -- this one should fix it.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/513973237/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/514289885",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1409#issuecomment-514289885",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1409",
        "id": 514289885,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUxNDI4OTg4NQ==",
        "user": {
            "login": "xgirones",
            "id": 30896820,
            "node_id": "MDQ6VXNlcjMwODk2ODIw",
            "avatar_url": "https://avatars.githubusercontent.com/u/30896820?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/xgirones",
            "html_url": "https://github.com/xgirones",
            "followers_url": "https://api.github.com/users/xgirones/followers",
            "following_url": "https://api.github.com/users/xgirones/following{/other_user}",
            "gists_url": "https://api.github.com/users/xgirones/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/xgirones/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/xgirones/subscriptions",
            "organizations_url": "https://api.github.com/users/xgirones/orgs",
            "repos_url": "https://api.github.com/users/xgirones/repos",
            "events_url": "https://api.github.com/users/xgirones/events{/privacy}",
            "received_events_url": "https://api.github.com/users/xgirones/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-07-23T16:41:40Z",
        "updated_at": "2019-07-23T16:41:40Z",
        "author_association": "NONE",
        "body": "Thanks. I have pulled the latest code from the master branch, recompiled the shared library, and tried again. I am afraid that the problem is still there. \r\n\r\n`OrtRun failed: Non-zero status code returned while running Node.`\r\n\r\nHowever, I can only reproduce it when I stress the system : 4 threads performing (CUDA) FFT and image resizing + 8 threads executing OrtRun (among other things) on the GPU. I can run other non RNN models without any problem, though. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/514289885/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/514375210",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1409#issuecomment-514375210",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1409",
        "id": 514375210,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUxNDM3NTIxMA==",
        "user": {
            "login": "HectorSVC",
            "id": 29932710,
            "node_id": "MDQ6VXNlcjI5OTMyNzEw",
            "avatar_url": "https://avatars.githubusercontent.com/u/29932710?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/HectorSVC",
            "html_url": "https://github.com/HectorSVC",
            "followers_url": "https://api.github.com/users/HectorSVC/followers",
            "following_url": "https://api.github.com/users/HectorSVC/following{/other_user}",
            "gists_url": "https://api.github.com/users/HectorSVC/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/HectorSVC/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/HectorSVC/subscriptions",
            "organizations_url": "https://api.github.com/users/HectorSVC/orgs",
            "repos_url": "https://api.github.com/users/HectorSVC/repos",
            "events_url": "https://api.github.com/users/HectorSVC/events{/privacy}",
            "received_events_url": "https://api.github.com/users/HectorSVC/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-07-23T20:40:24Z",
        "updated_at": "2019-07-23T20:40:24Z",
        "author_association": "MEMBER",
        "body": "did you see OOM on CUDA memory? I still can't reproduce it using another GRU models with the model you provided (discrepancy_CPU_GPU).",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/514375210/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/514791446",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1409#issuecomment-514791446",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1409",
        "id": 514791446,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUxNDc5MTQ0Ng==",
        "user": {
            "login": "xgirones",
            "id": 30896820,
            "node_id": "MDQ6VXNlcjMwODk2ODIw",
            "avatar_url": "https://avatars.githubusercontent.com/u/30896820?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/xgirones",
            "html_url": "https://github.com/xgirones",
            "followers_url": "https://api.github.com/users/xgirones/followers",
            "following_url": "https://api.github.com/users/xgirones/following{/other_user}",
            "gists_url": "https://api.github.com/users/xgirones/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/xgirones/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/xgirones/subscriptions",
            "organizations_url": "https://api.github.com/users/xgirones/orgs",
            "repos_url": "https://api.github.com/users/xgirones/repos",
            "events_url": "https://api.github.com/users/xgirones/events{/privacy}",
            "received_events_url": "https://api.github.com/users/xgirones/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-07-24T20:40:14Z",
        "updated_at": "2019-07-24T20:40:14Z",
        "author_association": "NONE",
        "body": "The CUDA FFT and NPP calls do not return any error status code, which I would expect if the GPU ran OOM. It only occurs with the RNN model, other models run fine.\r\n\r\nI will investigate more on the issue in a couple of days, now I have to complete some tasks.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/514791446/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/514799605",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1409#issuecomment-514799605",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1409",
        "id": 514799605,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUxNDc5OTYwNQ==",
        "user": {
            "login": "HectorSVC",
            "id": 29932710,
            "node_id": "MDQ6VXNlcjI5OTMyNzEw",
            "avatar_url": "https://avatars.githubusercontent.com/u/29932710?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/HectorSVC",
            "html_url": "https://github.com/HectorSVC",
            "followers_url": "https://api.github.com/users/HectorSVC/followers",
            "following_url": "https://api.github.com/users/HectorSVC/following{/other_user}",
            "gists_url": "https://api.github.com/users/HectorSVC/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/HectorSVC/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/HectorSVC/subscriptions",
            "organizations_url": "https://api.github.com/users/HectorSVC/orgs",
            "repos_url": "https://api.github.com/users/HectorSVC/repos",
            "events_url": "https://api.github.com/users/HectorSVC/events{/privacy}",
            "received_events_url": "https://api.github.com/users/HectorSVC/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-07-24T21:04:46Z",
        "updated_at": "2019-07-24T21:04:46Z",
        "author_association": "MEMBER",
        "body": "Is it the same model you shared before (discrepancy_CPU_GPU)? Is it possible to share it?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/514799605/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/515170479",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1409#issuecomment-515170479",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1409",
        "id": 515170479,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUxNTE3MDQ3OQ==",
        "user": {
            "login": "xgirones",
            "id": 30896820,
            "node_id": "MDQ6VXNlcjMwODk2ODIw",
            "avatar_url": "https://avatars.githubusercontent.com/u/30896820?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/xgirones",
            "html_url": "https://github.com/xgirones",
            "followers_url": "https://api.github.com/users/xgirones/followers",
            "following_url": "https://api.github.com/users/xgirones/following{/other_user}",
            "gists_url": "https://api.github.com/users/xgirones/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/xgirones/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/xgirones/subscriptions",
            "organizations_url": "https://api.github.com/users/xgirones/orgs",
            "repos_url": "https://api.github.com/users/xgirones/repos",
            "events_url": "https://api.github.com/users/xgirones/events{/privacy}",
            "received_events_url": "https://api.github.com/users/xgirones/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-07-25T18:54:21Z",
        "updated_at": "2019-07-25T18:54:21Z",
        "author_association": "NONE",
        "body": "Yes, it is the same model as in the #1400 issue. I will try to investigate more during the next week.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/515170479/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/515783983",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1409#issuecomment-515783983",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1409",
        "id": 515783983,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUxNTc4Mzk4Mw==",
        "user": {
            "login": "xgirones",
            "id": 30896820,
            "node_id": "MDQ6VXNlcjMwODk2ODIw",
            "avatar_url": "https://avatars.githubusercontent.com/u/30896820?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/xgirones",
            "html_url": "https://github.com/xgirones",
            "followers_url": "https://api.github.com/users/xgirones/followers",
            "following_url": "https://api.github.com/users/xgirones/following{/other_user}",
            "gists_url": "https://api.github.com/users/xgirones/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/xgirones/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/xgirones/subscriptions",
            "organizations_url": "https://api.github.com/users/xgirones/orgs",
            "repos_url": "https://api.github.com/users/xgirones/repos",
            "events_url": "https://api.github.com/users/xgirones/events{/privacy}",
            "received_events_url": "https://api.github.com/users/xgirones/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-07-28T18:22:30Z",
        "updated_at": "2019-07-28T18:22:30Z",
        "author_association": "NONE",
        "body": "I managed to reproduce the issue running the _discrepancy_CPU_GPU_ model alone. It seems that when using 256 seq minibatches and a couple of threads it is easier to make it appear. I employed the C API and the shared library because Python does not support true multi-threading. This is the error log:\r\n\r\n```\r\n2019-07-28 18:25:57.8231646 [E:onnxruntime:test, cuda_call.cc:93 onnxruntime::CudaCall] CUDNN failure 3: CUDNN_STATUS_BAD_PARAM ; GPU=0 ; hostname=NEBO ; expr=cudnnSetRNNDataDescriptor(tensor_, dataType, layout, static_cast<int>(max_seq_length), static_cast<int>(batch_size), static_cast<int>(data_size), seq_lengths, static_cast<void*>(&padding_fill));\r\n2019-07-28 18:25:57.8248668 [E:onnxruntime:test, cuda_call.cc:93 onnxruntime::CudaCall] CUDNN failure 3: CUDNN_STATUS_BAD_PARAM ; GPU=0 ; hostname=NEBO ; expr=cudnnSetRNNDataDescriptor(tensor_, dataType, layout, static_cast<int>(max_seq_length), static_cast<int>(batch_size), static_cast<int>(data_size), seq_lengths, static_cast<void*>(&padding_fill));\r\n2019-07-28 18:25:57.8259753 [E:onnxruntime:test, cuda_call.cc:93 onnxruntime::CudaCall] CUDNN failure 3: CUDNN_STATUS_BAD_PARAM ; GPU=0 ; hostname=NEBO ; expr=cudnnRNNForwardInferenceEx(CudnnHandle(), rnn_desc_, x_desc, x_data_input, hx_desc, hx_data, cx_desc, cx_data, weight_cached_ ? w_desc_cache_ : w_desc, weight_cached_ ? w_data_cache_.get() : w_data.get(), y_desc, y_data, y_h_desc, y_h_data,y_c_desc, y_c_data, nullptr, nullptr, nullptr, nullptr, nullptr, nullptr, nullptr, nullptr, workspace_cuda.get(), workspace_bytes);\r\n2019-07-28 18:25:57.8266446 [E:onnxruntime:, sequential_executor.cc:127 onnxruntime::SequentialExecutor::Execute] Non-zero status code returned while running Node:  Status Message:\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/515783983/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/516497090",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1409#issuecomment-516497090",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1409",
        "id": 516497090,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUxNjQ5NzA5MA==",
        "user": {
            "login": "HectorSVC",
            "id": 29932710,
            "node_id": "MDQ6VXNlcjI5OTMyNzEw",
            "avatar_url": "https://avatars.githubusercontent.com/u/29932710?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/HectorSVC",
            "html_url": "https://github.com/HectorSVC",
            "followers_url": "https://api.github.com/users/HectorSVC/followers",
            "following_url": "https://api.github.com/users/HectorSVC/following{/other_user}",
            "gists_url": "https://api.github.com/users/HectorSVC/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/HectorSVC/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/HectorSVC/subscriptions",
            "organizations_url": "https://api.github.com/users/HectorSVC/orgs",
            "repos_url": "https://api.github.com/users/HectorSVC/repos",
            "events_url": "https://api.github.com/users/HectorSVC/events{/privacy}",
            "received_events_url": "https://api.github.com/users/HectorSVC/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-07-30T16:36:14Z",
        "updated_at": "2019-07-30T16:36:14Z",
        "author_association": "MEMBER",
        "body": "could you share some test data?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/516497090/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/517361324",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1409#issuecomment-517361324",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1409",
        "id": 517361324,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUxNzM2MTMyNA==",
        "user": {
            "login": "xgirones",
            "id": 30896820,
            "node_id": "MDQ6VXNlcjMwODk2ODIw",
            "avatar_url": "https://avatars.githubusercontent.com/u/30896820?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/xgirones",
            "html_url": "https://github.com/xgirones",
            "followers_url": "https://api.github.com/users/xgirones/followers",
            "following_url": "https://api.github.com/users/xgirones/following{/other_user}",
            "gists_url": "https://api.github.com/users/xgirones/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/xgirones/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/xgirones/subscriptions",
            "organizations_url": "https://api.github.com/users/xgirones/orgs",
            "repos_url": "https://api.github.com/users/xgirones/repos",
            "events_url": "https://api.github.com/users/xgirones/events{/privacy}",
            "received_events_url": "https://api.github.com/users/xgirones/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-08-01T16:27:45Z",
        "updated_at": "2019-08-01T16:27:45Z",
        "author_association": "NONE",
        "body": "It seems to occur irrespective of the data. I could be mistaken here but it looks like a race condition.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/517361324/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/517419325",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1409#issuecomment-517419325",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1409",
        "id": 517419325,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUxNzQxOTMyNQ==",
        "user": {
            "login": "HectorSVC",
            "id": 29932710,
            "node_id": "MDQ6VXNlcjI5OTMyNzEw",
            "avatar_url": "https://avatars.githubusercontent.com/u/29932710?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/HectorSVC",
            "html_url": "https://github.com/HectorSVC",
            "followers_url": "https://api.github.com/users/HectorSVC/followers",
            "following_url": "https://api.github.com/users/HectorSVC/following{/other_user}",
            "gists_url": "https://api.github.com/users/HectorSVC/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/HectorSVC/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/HectorSVC/subscriptions",
            "organizations_url": "https://api.github.com/users/HectorSVC/orgs",
            "repos_url": "https://api.github.com/users/HectorSVC/repos",
            "events_url": "https://api.github.com/users/HectorSVC/events{/privacy}",
            "received_events_url": "https://api.github.com/users/HectorSVC/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-08-01T19:10:31Z",
        "updated_at": "2019-08-01T19:10:31Z",
        "author_association": "MEMBER",
        "body": "please try the PR https://github.com/microsoft/onnxruntime/pull/1544",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/517419325/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/519128222",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1409#issuecomment-519128222",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1409",
        "id": 519128222,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUxOTEyODIyMg==",
        "user": {
            "login": "xgirones",
            "id": 30896820,
            "node_id": "MDQ6VXNlcjMwODk2ODIw",
            "avatar_url": "https://avatars.githubusercontent.com/u/30896820?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/xgirones",
            "html_url": "https://github.com/xgirones",
            "followers_url": "https://api.github.com/users/xgirones/followers",
            "following_url": "https://api.github.com/users/xgirones/following{/other_user}",
            "gists_url": "https://api.github.com/users/xgirones/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/xgirones/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/xgirones/subscriptions",
            "organizations_url": "https://api.github.com/users/xgirones/orgs",
            "repos_url": "https://api.github.com/users/xgirones/repos",
            "events_url": "https://api.github.com/users/xgirones/events{/privacy}",
            "received_events_url": "https://api.github.com/users/xgirones/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-08-07T14:42:22Z",
        "updated_at": "2019-08-07T14:42:22Z",
        "author_association": "NONE",
        "body": "Thanks. I have pulled the _cuda/rnn_race_condition_ branch, but I am still able to reproduce the issue.\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/519128222/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/520050342",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1409#issuecomment-520050342",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1409",
        "id": 520050342,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUyMDA1MDM0Mg==",
        "user": {
            "login": "HectorSVC",
            "id": 29932710,
            "node_id": "MDQ6VXNlcjI5OTMyNzEw",
            "avatar_url": "https://avatars.githubusercontent.com/u/29932710?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/HectorSVC",
            "html_url": "https://github.com/HectorSVC",
            "followers_url": "https://api.github.com/users/HectorSVC/followers",
            "following_url": "https://api.github.com/users/HectorSVC/following{/other_user}",
            "gists_url": "https://api.github.com/users/HectorSVC/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/HectorSVC/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/HectorSVC/subscriptions",
            "organizations_url": "https://api.github.com/users/HectorSVC/orgs",
            "repos_url": "https://api.github.com/users/HectorSVC/repos",
            "events_url": "https://api.github.com/users/HectorSVC/events{/privacy}",
            "received_events_url": "https://api.github.com/users/HectorSVC/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-08-09T20:17:41Z",
        "updated_at": "2019-08-09T20:17:41Z",
        "author_association": "MEMBER",
        "body": "I tried with 12 threads and still can't reproduce it. Could you share the code? Also would you mind to try again with the latest master? Thanks!",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/520050342/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/522076895",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1409#issuecomment-522076895",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1409",
        "id": 522076895,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUyMjA3Njg5NQ==",
        "user": {
            "login": "xgirones",
            "id": 30896820,
            "node_id": "MDQ6VXNlcjMwODk2ODIw",
            "avatar_url": "https://avatars.githubusercontent.com/u/30896820?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/xgirones",
            "html_url": "https://github.com/xgirones",
            "followers_url": "https://api.github.com/users/xgirones/followers",
            "following_url": "https://api.github.com/users/xgirones/following{/other_user}",
            "gists_url": "https://api.github.com/users/xgirones/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/xgirones/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/xgirones/subscriptions",
            "organizations_url": "https://api.github.com/users/xgirones/orgs",
            "repos_url": "https://api.github.com/users/xgirones/repos",
            "events_url": "https://api.github.com/users/xgirones/events{/privacy}",
            "received_events_url": "https://api.github.com/users/xgirones/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-08-16T16:51:14Z",
        "updated_at": "2019-08-16T16:51:14Z",
        "author_association": "NONE",
        "body": "I just pulled the code from master and tried again, and got the same error:\r\n\r\n```\r\n2019-08-16 17:26:05.2081490 [E:onnxruntime:test, cuda_call.cc:93 onnxruntime::CudaCall] CUDNN failure 3: CUDNN_STATUS_BAD_PARAM ; GPU=0 ; hostname=; expr=cudnnSetRNNDataDescriptor(tensor_, dataType, layout, static_cast<int>(max_seq_length), static_cast<int>(batch_size), static_cast<int>(data_size), seq_lengths, static_cast<void*>(&padding_fill));\r\n2019-08-16 17:26:05.2092973 [E:onnxruntime:test, cuda_call.cc:93 onnxruntime::CudaCall] CUDNN failure 3: CUDNN_STATUS_BAD_PARAM ; GPU=0 ; hostname=; expr=cudnnSetRNNDataDescriptor(tensor_, dataType, layout, static_cast<int>(max_seq_length), static_cast<int>(batch_size), static_cast<int>(data_size), seq_lengths, static_cast<void*>(&padding_fill));\r\n2019-08-16 17:26:05.2100140 [E:onnxruntime:test, cuda_call.cc:93 onnxruntime::CudaCall] CUDNN failure 3: CUDNN_STATUS_BAD_PARAM ; GPU=0 ; hostname=; expr=cudnnRNNForwardInferenceEx(CudnnHandle(), rnn_desc, x_desc, x_data_input, hx_desc, hx_data, cx_desc, cx_data, weight_cached_ ? w_desc_cache_ : w_desc, weight_cached_ ? w_data_cache_.get() : w_data.get(), y_desc, y_data, y_h_desc, y_h_data, y_c_desc, y_c_data, nullptr, nullptr, nullptr, nullptr, nullptr, nullptr, nullptr, nullptr, workspace_cuda.get(), workspace_bytes);\r\n2019-08-16 17:26:05.2103945 [E:onnxruntime:, sequential_executor.cc:129 onnxruntime::SequentialExecutor::Execute] Non-zero status code returned while running Node\r\n```\r\nThis is the function I am using for testing. It cannot be compiled as posted here because it has many dependencies (boost, tbb, private types), but I suppose it will show if I am using the ORT API incorrectly.\r\n\r\n```\r\nbool rnn_test_21() throw ( __EXCEPTION_ )\r\n{\r\n\tCHECKERROR_NEST_TRY\r\n\t{\r\n\t\tstatic const __SIZE_T TEST_ID = 21;\r\n\t\tFolderUtils::_TestContext_aptr apTestCtx = FU.context_get( TEST_ID );\r\n\r\n\t\ttypedef phd::engine::defaults::SIZE_T SIZE_T;\r\n\t\ttypedef phd::engine::defaults::REAL_T REAL_T;\r\n\t\ttypedef uint16_t COUNT_T;\r\n\r\n\t\ttypedef nmspc_cne::Randomizer<SIZE_T, REAL_T> RND;\r\n\r\n\t\tstatic const optimization_target Opt = phd::engine::defaults::OPTIMIZATION_TARGET;\r\n\t\tstatic const bool bInterlocked = phd::engine::defaults::INTERLOCKED_REFERENCE_COUNTED;\r\n\r\n\t#if defined(_DEBUG)\r\n\t\tstatic const SIZE_T NUM_ITERATIONS = 10;\r\n\t#else\r\n\t\tstatic const SIZE_T NUM_ITERATIONS = 10000;\r\n\t#endif\r\n\r\n\t\tstatic const SIZE_T Ri = 32;\r\n\t\tstatic const SIZE_T Ci = 32;\r\n\t\tstatic const SIZE_T Ro = 24;\r\n\t\tstatic const SIZE_T Co = 16;\r\n\r\n#if defined(_DEBUG)\r\n\t\tstatic const SIZE_T cRows = 16;\r\n#else\r\n\t\tstatic const SIZE_T cRows = 256;\r\n#endif\r\n\r\n\t\tstatic const SIZE_T rndSeed = 888;\r\n\t\tstatic const SIZE_T cElems2Purge = 10000;\r\n\r\n\t\ttypedef ocr_basic_line_sampler_deferred <SIZE_T, REAL_T, Ri, Ci, Ro, Co, RND, true, Opt, bInterlocked> OBLS;\r\n\t\ttypedef std::vector<REAL_T> real_vect;\r\n\r\n\t\ttypedef CSEG::A2D A2D;\r\n\r\n\t\tOBLS::parms_t p;\r\n\r\n\t\tp.datasetPath = L\"D:\\\\projects\\\\PhD\\\\datasets\\\\ocr_basic_dataset\\\\toy\\\\toy.xml\";\r\n\t\tp.selectedGroups.push_back( OBLS::parms_t::SELECT_ALL_GROUPS() );\r\n\t\tp.glyphs = OBLS::parms_t::SELECT_ALL_GLYPHS();\r\n\r\n\t\tp.cMin_line_glyphs = 1;\r\n\t\tp.cMax_line_glyphs = 3;\r\n\t\tp.cAlgn_line_length = 4;\r\n\r\n\t\tp.fMin_glyph_separation_X = 0.6f;\r\n\t\tp.fMax_glyph_separation_X = 32.f;\r\n\t\tp.fSigma_rayleigh_glyph_separation_X = 1.25f;\r\n\t\tp.fMax_glyph_translation_Y = 0;\r\n\t\tp.fRange_glyph_aspect_ratio = 0.025f;\r\n\t\tp.fRange_glyph_shrink_ratio = 0.f;\r\n\r\n\t\tp.fRange_aspect_ratio = 0.1f;\r\n\t\tp.fRange_shrink_ratio = 0.1f;\r\n\t\tp.fRange_rotation = 0.0349066f;\r\n\t\tp.fMax_shear = 0.1f;\r\n\r\n\t\tp.mapInitSeed = 888;\r\n\r\n#if defined(_DEBUG)\r\n\t\tp.fScale_noise_map_X = 8;\r\n\t\tp.fScale_noise_map_Y = 8;\r\n\t\tp.cMaps_distortion = 16;\r\n#else\r\n\t\tp.fScale_noise_map_X = 32;\r\n\t\tp.fScale_noise_map_Y = 64;\r\n\t\tp.cMaps_distortion = 16384;\r\n#endif\r\n\t\tp.fMap_alpha = 0.2f;\r\n\t\tp.fMap_sigma = 4.f;\r\n\r\n\t\tp.fRate_additive_noise = 0.005f;\r\n\t\tp.fRange_additive_noise_radius = 2.f;\r\n\r\n\t\tp.fRate_subtractive_noise = 0.0025f;\r\n\t\tp.fRange_subtractive_noise_radius = 2.0f;\r\n\r\n\t\tp.fRange_box_filter_radius = 2.0f;\r\n\r\n\t\tp.fRange_gamma = 1.5f;\r\n\t\tp.cIntervals_gamma = 16;\r\n\r\n\t\tp.bTranspose = true;\r\n\r\n\t\tOBLS::_self_aptr apOBLS = OBLS::create( p, cRows, rndSeed, cElems2Purge );\r\n\t\tOBLS::_sampler_results_pool_elem_aptr apSamples = apOBLS->generate_samples();\r\n\t\tOBLS::sampler_results_t &rSR = apSamples->get().get();\r\n\r\n#if 0\r\n\t\t// Sort batch in descending order according to the sequence lengths.\r\n\t\tstd::sort( rSR.lines.begin(), rSR.lines.end(),\r\n\t\t\t[] ( const OBLS::line_sample_t &rcL1, const OBLS::line_sample_t &rcL2 ) -> bool\r\n\t\t{\r\n\t\t\treturn rcL1.fsample.numRows_get() > rcL2.fsample.numRows_get();\r\n\t\t} );\r\n\r\n\t\tSIZE_T paddedR = rSR.lines.front().sample.numRows_get();\r\n\t\tBOOST_ASSERT( paddedR == rSR.lines.front().flabels.numRows_get() );\r\n#else\r\n\t\tSIZE_T paddedR = 0;\r\n\r\n\t\tfor ( size_t j = 0; j < rSR.lines.size(); ++j )\r\n\t\t{\r\n\t\t\tif ( rSR.lines[ j ].fsample.numRows_get() > paddedR )\r\n\t\t\t{\r\n\t\t\t\tpaddedR = rSR.lines[ j ].fsample.numRows_get();\r\n\t\t\t}\r\n\t\t}\r\n#endif\r\n\r\n\t\t// ONNX requires all sequences to be of the same size so we must allocate input tensors with the maximum sizes and pad the unused elements. \r\n\r\n\t\tSIZE_T cBatchSize = (SIZE_T)rSR.lines.size();\r\n\t\tBOOST_ASSERT( cBatchSize == cRows );\r\n\r\n\t\tSIZE_T paddedInputC = rSR.lines.front().sample.numCols_get();\r\n\t\tSIZE_T paddedLabelC = rSR.lines.front().flabels.numCols_get();\r\n\t\tBOOST_ASSERT( paddedLabelC == (SIZE_T)apOBLS->alphabet_get().size() );\r\n\r\n\t\tSIZE_T cPaddedInputStep3 = paddedInputC * (SIZE_T)sizeof(REAL_T);\r\n\t\tSIZE_T cPaddedInputStep2 = paddedR * cPaddedInputStep3;\r\n\t\tSIZE_T cPaddedInputSize = cBatchSize * cPaddedInputStep2;\r\n\r\n\t\tSIZE_T cPaddedLabelStep3 = paddedLabelC * (SIZE_T)sizeof(REAL_T);\r\n\t\tSIZE_T cPaddedLabelStep2 = paddedR * cPaddedLabelStep3;\r\n\r\n\t\treal_vect vfInput( (size_t)cPaddedInputSize / sizeof(REAL_T) );\r\n\t\tstd::vector<int64_t> vnLengths( (size_t)cBatchSize );\r\n\r\n\t\tREAL_T *pfCurInputSeq = vfInput.data();\r\n\r\n\t\tfor ( size_t j = 0; j < (size_t)cBatchSize; ++j )\r\n\t\t{\r\n\t\t\tOBLS::line_sample_t &rL = rSR.lines[ (size_t)j ];\r\n\r\n\t\t\tSIZE_T cSeqLen = rL.fsample.numRows_get();\r\n\t\t\tBOOST_ASSERT( ( cSeqLen % p.cAlgn_line_length ) == 0 );\r\n\r\n\t\t\tvnLengths[ j ] = (int64_t)( cSeqLen / p.cAlgn_line_length );\r\n\r\n\t\t\tA2D a2dInputSeq( paddedInputC, cSeqLen, pfCurInputSeq, cPaddedInputStep3 );\r\n\t\t\ta2dInputSeq = rL.fsample;\r\n\r\n\t\t\tpfCurInputSeq = offset_ptr<REAL_T>( pfCurInputSeq, cPaddedInputStep2 );\r\n\t\t}\r\n\r\n\t\t// Initialize the ONNX runtime.\r\n\r\n\t\t_OrtEnv_aptr apEnv = onnxrt_create_env( ORT_LOGGING_LEVEL_WARNING, \"test\" );\r\n\r\n\t\t_OrtSessionOptions_aptr apSOpt = onnxrt_create_session_options();\r\n\t\tonnxrt_session_options_set_session_log_verbosity_level( apSOpt, OrtLoggingLevel::ORT_LOGGING_LEVEL_VERBOSE );\r\n\t\tonnxrt_session_options_set_graph_optimization_level( apSOpt, GraphOptimizationLevel::ORT_ENABLE_ALL );\r\n\t\tonnxrt_session_options_append_execution_provider_cuda( apSOpt, 0 );\r\n\r\n\t\tstatic const wchar_t *PATH_MODEL = L\"D:\\\\temp\\\\_model.onnx\";\r\n\r\n\t\tsize_t NUM_SESSIONS = 2;\r\n\r\n\t\tstd::vector<onnxrt_session_info::_self_aptr> sessions( NUM_SESSIONS );\r\n\t\tfor ( size_t i = 0; i < NUM_SESSIONS; ++i )\r\n\t\t{\r\n\t\t\t_OrtSession_aptr apS = onnxrt_create_session( apEnv, PATH_MODEL, apSOpt );\r\n\t\t\tsessions[ i ] = onnxrt_session_info::create( apS );\r\n\t\t}\r\n\r\n\t\tboost::mutex mux;\r\n\t\tboost::condition_variable cv;\r\n\r\n\t\t// Run the test.\r\n\r\n\t\ttbb::parallel_for( tbb::blocked_range<SIZE_T>( 0, NUM_ITERATIONS ),\r\n\t\t\t[ & ]( const tbb::blocked_range<SIZE_T> &rcR )\r\n\t\t{\r\n\t\t\t// Fetch a session from the session pool.\r\n\t\t\tonnxrt_session_info::_self_aptr apSI;\r\n\r\n\t\t\t{\r\n\t\t\t\tboost::mutex::scoped_lock lock( mux );\r\n\r\n\t\t\t\twhile ( sessions.empty() )\r\n\t\t\t\t{\r\n\t\t\t\t\tcv.wait( lock );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tapSI = sessions.back();\r\n\t\t\t\tsessions.pop_back();\r\n\t\t\t}\r\n\r\n\t\t\t_OrtSession_aptr apS = apSI->session_get();\r\n\r\n\t\t\t_OrtAllocatorInfo_aptr apAllocInfo = onnxrt_create_cpu_allocator_info( OrtArenaAllocator, OrtMemTypeDefault );\r\n\r\n\t\t\t// Create the input tensor.\r\n\r\n\t\t\t// Set the correct dimensions.\r\n\t\t\tonnxrt_shape_t inputDim = apSI->input_nodes_info_get().front().shape;\r\n\t\t\tinputDim[ 0 ] = (int64_t)cBatchSize;\r\n\t\t\tinputDim[ 2 ] = (int64_t)paddedR;\r\n\r\n\t\t\t_OrtValue_aptr apInputTensor = onnxrt_create_tensor_with_data_as_ort_value( apAllocInfo, vfInput.data(), vfInput.size() * sizeof(REAL_T), inputDim.data(), inputDim.size(), ONNX_TENSOR_ELEMENT_DATA_TYPE_FLOAT );\r\n\t\t\tCHECKERROR_GENERIC( phd::onnxrt::onnxrt_is_tensor( apInputTensor ) ? S_OK : E_FAIL, _T( \"Invalid input tensor returned\" ) );\r\n\r\n\t\t\t// Create the lengths tensor.\r\n\r\n\t\t\t// Set the correct dimensions.\r\n\t\t\tonnxrt_shape_t lengthsDim = apSI->input_nodes_info_get().back().shape;\r\n\t\t\tlengthsDim[ 0 ] = (onnxrt_dim_t)cBatchSize;\r\n\r\n\t\t\t_OrtValue_aptr apLengthsTensor = onnxrt_create_tensor_with_data_as_ort_value( apAllocInfo, vnLengths.data(), vnLengths.size() * sizeof( onnxrt_dim_t ), lengthsDim.data(), lengthsDim.size(), ONNX_TENSOR_ELEMENT_DATA_TYPE_INT64 );\r\n\t\t\tCHECKERROR_GENERIC( phd::onnxrt::onnxrt_is_tensor( apLengthsTensor ) ? S_OK : E_FAIL, _T( \"Invalid input tensor returned\" ) );\r\n\r\n\t\t\tfor ( SIZE_T i = rcR.begin(); i < rcR.end(); ++i )\r\n\t\t\t{\r\n\t\t\t\t// Run the model.\r\n\r\n\t\t\t\tonnxrt_values_t vapInputTensor( apSI->input_nodes_info_get().size() );\r\n\t\t\t\tBOOST_ASSERT( vapInputTensor.size() == 2 );\r\n\r\n\t\t\t\tvapInputTensor[ 0 ] = apInputTensor;\r\n\t\t\t\tvapInputTensor[ 1 ] = apLengthsTensor;\r\n\t\t\t\r\n\t\t\t\tonnxrt_values_t vapOutputTensor;\r\n\t\t\t\tonnxrt_run( vapOutputTensor, apS, apSI->input_raw_names_get(), apSI->output_raw_names_get(), vapInputTensor );\r\n\t\t\t\tBOOST_ASSERT( vapOutputTensor.size() == 1 );\r\n\t\t\t\tCHECKERROR_GENERIC( phd::onnxrt::onnxrt_is_tensor( vapOutputTensor.front() ) ? S_OK : E_FAIL, _T( \"Invalid output tensor returned\" ) );\r\n\t\t\t}\r\n\r\n\t\t\t// Return the session to the pool.\r\n\t\t\t{\r\n\t\t\t\tboost::mutex::scoped_lock lock( mux );\r\n\t\t\t\tsessions.push_back( apSI );\r\n\t\t\t\tapS.reset();\r\n\t\t\t\tapSI.release();\r\n\t\t\t\r\n\t\t\t\tcv.notify_one();\r\n\t\t\t}\r\n\t\t} );\r\n\t}\r\n\tCHECKERROR_NEST_CATCHBLOCK( _T( \"rnn_test_21\" ) )\r\n\r\n\treturn true;\r\n}\r\n```\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/522076895/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/522699748",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1409#issuecomment-522699748",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1409",
        "id": 522699748,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUyMjY5OTc0OA==",
        "user": {
            "login": "HectorSVC",
            "id": 29932710,
            "node_id": "MDQ6VXNlcjI5OTMyNzEw",
            "avatar_url": "https://avatars.githubusercontent.com/u/29932710?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/HectorSVC",
            "html_url": "https://github.com/HectorSVC",
            "followers_url": "https://api.github.com/users/HectorSVC/followers",
            "following_url": "https://api.github.com/users/HectorSVC/following{/other_user}",
            "gists_url": "https://api.github.com/users/HectorSVC/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/HectorSVC/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/HectorSVC/subscriptions",
            "organizations_url": "https://api.github.com/users/HectorSVC/orgs",
            "repos_url": "https://api.github.com/users/HectorSVC/repos",
            "events_url": "https://api.github.com/users/HectorSVC/events{/privacy}",
            "received_events_url": "https://api.github.com/users/HectorSVC/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-08-19T18:30:13Z",
        "updated_at": "2019-08-19T18:30:13Z",
        "author_association": "MEMBER",
        "body": "I haven't try the code yet, but we do have similar issue reported from another user, and it turns out that it has 0 sequence in some batch. e.g, the batch_size 3, max_sequencelength = 2, the sequenceArray is [2, 0, 2], the 0 sequence in the batch is not supported by cudnn. I guess it's could be same for your case.\r\nhttps://docs.nvidia.com/deeplearning/sdk/cudnn-developer-guide/index.html#cudnnSetRNNDataDescriptor\r\nCUDNN_STATUS_BAD_PARAM\r\nAny one of these have occurred:\r\nAn element of seqLengthArray is less than or equal to zero or greater than maxSeqLength.\r\nI'm working on that fix right now. will verify that fix for your case as well.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/522699748/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/522732734",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1409#issuecomment-522732734",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1409",
        "id": 522732734,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUyMjczMjczNA==",
        "user": {
            "login": "xgirones",
            "id": 30896820,
            "node_id": "MDQ6VXNlcjMwODk2ODIw",
            "avatar_url": "https://avatars.githubusercontent.com/u/30896820?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/xgirones",
            "html_url": "https://github.com/xgirones",
            "followers_url": "https://api.github.com/users/xgirones/followers",
            "following_url": "https://api.github.com/users/xgirones/following{/other_user}",
            "gists_url": "https://api.github.com/users/xgirones/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/xgirones/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/xgirones/subscriptions",
            "organizations_url": "https://api.github.com/users/xgirones/orgs",
            "repos_url": "https://api.github.com/users/xgirones/repos",
            "events_url": "https://api.github.com/users/xgirones/events{/privacy}",
            "received_events_url": "https://api.github.com/users/xgirones/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-08-19T20:05:10Z",
        "updated_at": "2019-08-19T20:05:10Z",
        "author_association": "NONE",
        "body": "Thanks. I will add a check for this condition and run the test again.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/522732734/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/523502258",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1409#issuecomment-523502258",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1409",
        "id": 523502258,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUyMzUwMjI1OA==",
        "user": {
            "login": "xgirones",
            "id": 30896820,
            "node_id": "MDQ6VXNlcjMwODk2ODIw",
            "avatar_url": "https://avatars.githubusercontent.com/u/30896820?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/xgirones",
            "html_url": "https://github.com/xgirones",
            "followers_url": "https://api.github.com/users/xgirones/followers",
            "following_url": "https://api.github.com/users/xgirones/following{/other_user}",
            "gists_url": "https://api.github.com/users/xgirones/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/xgirones/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/xgirones/subscriptions",
            "organizations_url": "https://api.github.com/users/xgirones/orgs",
            "repos_url": "https://api.github.com/users/xgirones/repos",
            "events_url": "https://api.github.com/users/xgirones/events{/privacy}",
            "received_events_url": "https://api.github.com/users/xgirones/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-08-21T15:13:40Z",
        "updated_at": "2019-08-21T15:13:40Z",
        "author_association": "NONE",
        "body": "I ran the test several times checking for the zero length sequence condition but it did not happen. The error CUDNN_STATUS_BAD_PARAM appears with non-zero sequence lengths. And in one of the executions I got a different error:\r\n\r\n`\r\nException thrown at 0x000007FE9F75F57E (cudnn64_7.dll) in workbench.exe: 0xC0000005: Access violation reading location 0x00000000000000A8.`\r\n\r\n```\r\nonnxruntime.dll!onnxruntime::cuda::CudnnRnnBase<float>::ComputeInternal(onnxruntime::OpKernelContext * ctx) Line 260\tC++\r\nonnxruntime.dll!onnxruntime::cuda::CudaKernel::Compute(onnxruntime::OpKernelContext * p_op_kernel_context) Line 42\tC++\r\nonnxruntime.dll!onnxruntime::SequentialExecutor::Execute(const onnxruntime::SessionState & session_state, const std::vector<int,std::allocator<int> > & feed_mlvalue_idxs, const std::vector<OrtValue,std::allocator<OrtValue> > & feeds, const std::vector<int,std::allocator<int> > & fetch_mlvalue_idxs, std::vector<OrtValue,std::allocator<OrtValue> > & fetches, const std::unordered_map<unsigned __int64,std::function<onnxruntime::common::Status __cdecl(onnxruntime::TensorShape const &,OrtValue &)>,std::hash<unsigned __int64>,std::equal_to<unsigned __int64>,std::allocator<std::pair<unsigned __int64 const ,std::function<onnxruntime::common::Status __cdecl(onnxruntime::TensorShape const &,OrtValue &)> > > > & fetch_allocators, const onnxruntime::logging::Logger & logger) Line 121\tC++\r\nonnxruntime.dll!onnxruntime::utils::ExecuteGraph(const onnxruntime::SessionState & session_state, onnxruntime::FeedsFetchesManager & feeds_fetches_manager, const std::vector<OrtValue,std::allocator<OrtValue> > & feeds, std::vector<OrtValue,std::allocator<OrtValue> > & fetches, const std::unordered_map<unsigned __int64,std::function<onnxruntime::common::Status __cdecl(onnxruntime::TensorShape const &,OrtValue &)>,std::hash<unsigned __int64>,std::equal_to<unsigned __int64>,std::allocator<std::pair<unsigned __int64 const ,std::function<onnxruntime::common::Status __cdecl(onnxruntime::TensorShape const &,OrtValue &)> > > > & fetch_allocators, bool sequential_execution, const bool & terminate_flag, const onnxruntime::logging::Logger & logger, bool cache_copy_info) Line 508\tC++\r\nonnxruntime.dll!onnxruntime::InferenceSession::Run(const OrtRunOptions & run_options, const std::vector<std::basic_string<char,std::char_traits<char>,std::allocator<char> >,std::allocator<std::basic_string<char,std::char_traits<char>,std::allocator<char> > > > & feed_names, const std::vector<OrtValue,std::allocator<OrtValue> > & feeds, const std::vector<std::basic_string<char,std::char_traits<char>,std::allocator<char> >,std::allocator<std::basic_string<char,std::char_traits<char>,std::allocator<char> > > > & output_names, std::vector<OrtValue,std::allocator<OrtValue> > * p_fetches) Line 738\tC++\r\nonnxruntime.dll!OrtRun(OrtSession * sess, const OrtRunOptions * run_options, const char * const * input_names, const OrtValue * const * input, unsigned __int64 input_len, const char * const * output_names1, unsigned __int64 output_names_len, OrtValue * * output) Line 461\tC++\r\nworkbench.exe!phd::onnxrt::onnxrt_run(std::vector<std::shared_ptr<OrtValue>,std::allocator<std::shared_ptr<OrtValue> > > & rOutVals, std::shared_ptr<OrtSession> & rapS, const std::vector<char const *,std::allocator<char const *> > & rcInputNames, const std::vector<char const *,std::allocator<char const *> > & rcOutputNames, const std::vector<std::shared_ptr<OrtValue>,std::allocator<std::shared_ptr<OrtValue> > > & rcInputVals, const OrtRunOptions *) Line 418\tC++\r\nworkbench.exe!ocr_basic_dev_21::__l3::<lambda>(const tbb::blocked_range<unsigned int> & rcR) Line 4747\tC++\r\n```\r\nPS. When I use only a single thread the test always runs smoothly. I am using CUDA 10.1, I do not know if this is relevant for this case.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/523502258/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]