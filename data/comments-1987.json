[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/540183160",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1987#issuecomment-540183160",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1987",
        "id": 540183160,
        "node_id": "MDEyOklzc3VlQ29tbWVudDU0MDE4MzE2MA==",
        "user": {
            "login": "ybrnathan",
            "id": 7902510,
            "node_id": "MDQ6VXNlcjc5MDI1MTA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7902510?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ybrnathan",
            "html_url": "https://github.com/ybrnathan",
            "followers_url": "https://api.github.com/users/ybrnathan/followers",
            "following_url": "https://api.github.com/users/ybrnathan/following{/other_user}",
            "gists_url": "https://api.github.com/users/ybrnathan/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/ybrnathan/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/ybrnathan/subscriptions",
            "organizations_url": "https://api.github.com/users/ybrnathan/orgs",
            "repos_url": "https://api.github.com/users/ybrnathan/repos",
            "events_url": "https://api.github.com/users/ybrnathan/events{/privacy}",
            "received_events_url": "https://api.github.com/users/ybrnathan/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-10-09T20:38:06Z",
        "updated_at": "2019-10-09T20:38:06Z",
        "author_association": "CONTRIBUTOR",
        "body": "Please refer to this article: https://stackoverflow.com/questions/41512845/what-does-caffe-do-with-the-mean-binary-file\r\n\r\nMean file seems like is a way to do normalization, if it is not part of your ONNX file, then you need to do it in your pre-processing step; if it's already in your converted ONNX file, then you do not need the file anymore.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/540183160/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/541831084",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1987#issuecomment-541831084",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1987",
        "id": 541831084,
        "node_id": "MDEyOklzc3VlQ29tbWVudDU0MTgzMTA4NA==",
        "user": {
            "login": "dashesy",
            "id": 873905,
            "node_id": "MDQ6VXNlcjg3MzkwNQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/873905?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dashesy",
            "html_url": "https://github.com/dashesy",
            "followers_url": "https://api.github.com/users/dashesy/followers",
            "following_url": "https://api.github.com/users/dashesy/following{/other_user}",
            "gists_url": "https://api.github.com/users/dashesy/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/dashesy/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dashesy/subscriptions",
            "organizations_url": "https://api.github.com/users/dashesy/orgs",
            "repos_url": "https://api.github.com/users/dashesy/repos",
            "events_url": "https://api.github.com/users/dashesy/events{/privacy}",
            "received_events_url": "https://api.github.com/users/dashesy/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-10-14T18:07:01Z",
        "updated_at": "2019-10-14T18:07:01Z",
        "author_association": "NONE",
        "body": "@anguoyang I use this to read the mean files and export in ONNX:\r\n\r\n```python\r\ndef read_blob(meanmodel):\r\n    \"\"\"Read blob\r\n    :param meanmodel: path to mean blob\r\n    \"\"\"\r\n    import caffe\r\n    import caffe.proto.caffe_pb2 as caffe_pb2\r\n    mean_blob = caffe_pb2.BlobProto()\r\n    with open(meanmodel, 'rb') as fp:\r\n        mean_blob.ParseFromString(fp.read())\r\n    return mean_blob\r\n\r\nclass FloatSubtract(nn.Module):\r\n    def __init__(self, dc):\r\n        \"\"\"Subtract a constant from the tensor\r\n        dc could be anything that can be subtracted,\r\n            it could be per-pixel mean (like the landmark example)\r\n            or per-channel mean (like the celeb) example.\r\n        This is a simple subtraction, fewer operations means smaller network (no need to divide by 1.0 for example)\r\n        :param dc: the constant to subtract\r\n        \"\"\"\r\n        super(FloatSubtract, self).__init__()\r\n        self.dc = dc\r\n\r\n    def extra_repr(self):\r\n        \"\"\"Extra information\r\n        \"\"\"\r\n        return 'dc.shape={}'.format(self.dc.shape)\r\n\r\n    def forward(self, x):\r\n        return x.float() - self.dc.to(x.device)\r\n\r\nmean_blob = read_blob(meanfile)\r\npixel_mean = np.array(mean_blob.data).astype('float32')\r\npixel_mean.resize(mean_blob.channels, mean_blob.height, mean_blob.width)[np.newaxis]\r\ndc = torch.from_numpy(pixel_mean)\r\n\r\n# Just make sure dimensions can broadcast in `dc` with the input image\r\n\r\ndep_model = nn.Sequential(FloatSubtract(dc), model)\r\n```\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/541831084/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/541994660",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/1987#issuecomment-541994660",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/1987",
        "id": 541994660,
        "node_id": "MDEyOklzc3VlQ29tbWVudDU0MTk5NDY2MA==",
        "user": {
            "login": "anguoyang",
            "id": 7838082,
            "node_id": "MDQ6VXNlcjc4MzgwODI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7838082?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/anguoyang",
            "html_url": "https://github.com/anguoyang",
            "followers_url": "https://api.github.com/users/anguoyang/followers",
            "following_url": "https://api.github.com/users/anguoyang/following{/other_user}",
            "gists_url": "https://api.github.com/users/anguoyang/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/anguoyang/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/anguoyang/subscriptions",
            "organizations_url": "https://api.github.com/users/anguoyang/orgs",
            "repos_url": "https://api.github.com/users/anguoyang/repos",
            "events_url": "https://api.github.com/users/anguoyang/events{/privacy}",
            "received_events_url": "https://api.github.com/users/anguoyang/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-10-15T01:23:04Z",
        "updated_at": "2019-10-15T01:23:04Z",
        "author_association": "NONE",
        "body": "Hi@dashesy , thank you so much, this is what I want!",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/541994660/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]