[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/564272599",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/2573#issuecomment-564272599",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/2573",
        "id": 564272599,
        "node_id": "MDEyOklzc3VlQ29tbWVudDU2NDI3MjU5OQ==",
        "user": {
            "login": "jeffbloo",
            "id": 38966965,
            "node_id": "MDQ6VXNlcjM4OTY2OTY1",
            "avatar_url": "https://avatars.githubusercontent.com/u/38966965?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jeffbloo",
            "html_url": "https://github.com/jeffbloo",
            "followers_url": "https://api.github.com/users/jeffbloo/followers",
            "following_url": "https://api.github.com/users/jeffbloo/following{/other_user}",
            "gists_url": "https://api.github.com/users/jeffbloo/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jeffbloo/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jeffbloo/subscriptions",
            "organizations_url": "https://api.github.com/users/jeffbloo/orgs",
            "repos_url": "https://api.github.com/users/jeffbloo/repos",
            "events_url": "https://api.github.com/users/jeffbloo/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jeffbloo/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-12-10T21:43:58Z",
        "updated_at": "2019-12-10T21:43:58Z",
        "author_association": "MEMBER",
        "body": "Thanks for reporting the failure.  \r\n\r\nWe are unable to reproduce the problem with an isolated test.  This suggests the problem has one of two root causes.   First, a faulty kernel used to compute an upstream operator, which results in tensors of incompatible shapes reaching Add.   Second, a faulty model which results in incompatible tensor shapes, which only fails on the GPU due to extra validation in that path.\r\n\r\nWould you be able to share more about the model to help locate the root cause?  It may also help to narrow down the problem by disabling specific registrations within this file:\r\ncore\\providers\\dml\\DmlExecutionProvider\\src\\Operators\\OperatorRegistration.cpp\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/564272599/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/566065679",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/2573#issuecomment-566065679",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/2573",
        "id": 566065679,
        "node_id": "MDEyOklzc3VlQ29tbWVudDU2NjA2NTY3OQ==",
        "user": {
            "login": "thebatua",
            "id": 11056917,
            "node_id": "MDQ6VXNlcjExMDU2OTE3",
            "avatar_url": "https://avatars.githubusercontent.com/u/11056917?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/thebatua",
            "html_url": "https://github.com/thebatua",
            "followers_url": "https://api.github.com/users/thebatua/followers",
            "following_url": "https://api.github.com/users/thebatua/following{/other_user}",
            "gists_url": "https://api.github.com/users/thebatua/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/thebatua/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/thebatua/subscriptions",
            "organizations_url": "https://api.github.com/users/thebatua/orgs",
            "repos_url": "https://api.github.com/users/thebatua/repos",
            "events_url": "https://api.github.com/users/thebatua/events{/privacy}",
            "received_events_url": "https://api.github.com/users/thebatua/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-12-16T13:40:38Z",
        "updated_at": "2019-12-16T13:43:58Z",
        "author_association": "NONE",
        "body": "Thanks for answer and my apollogises for late answer.\r\nI spent some time on investigting this issue, a bit debugged onnxruntime library... and seems like issue is not with \"Add\" node.\r\nA bit history. Currently we use on the project onnxruntime v0.5.0 and run ONNX models converted \r\nfrom PyTorch. Now we are trying new version. To convert pytorch model to the ONNX we had to specify size of the input image(in our case 512x512). But in fact our model might work with any  size of input image. Since v1.0.0 onnxruntime throws exception if size of input layer is different \r\nfrom size of input image we have to mark shape of the input layer as dynamic. The latest pytorch converter supports dynamic axes. So I used new converter and mark W and H as dynamic. As result some models work well but some have issues.\r\n\r\nSo debugged onnxruntime and found place where exception was thrown:\r\n   `Dml/OperatorAutherHelper\\OperatorHelper.cpp::BroadcastTensorShape()`\r\non line :\r\n   `ML_CHECK_VALID_ARGUMENT((inDimension0 == inDimension1) || (inDimension0 == 1) || (inDimension1 == 1));`\r\n\r\nShapes of inputs of \"Add\" node are different and differ by 1 px.\r\nFirst input is \"Conv\" layer second is \"Upsample\" layer.\r\n\r\nIn the next step I investigated difference between two models ... There is an \"Resize\" layer instead of \"Upsample\" layer in the model we currently use and that was converted by older pytoch converter. And looks like \"Resize\" and \"Upsample\" layers works in the different way and produces different output shapes.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/566065679/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/596221510",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/2573#issuecomment-596221510",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/2573",
        "id": 596221510,
        "node_id": "MDEyOklzc3VlQ29tbWVudDU5NjIyMTUxMA==",
        "user": {
            "login": "Li-chunming",
            "id": 59553759,
            "node_id": "MDQ6VXNlcjU5NTUzNzU5",
            "avatar_url": "https://avatars.githubusercontent.com/u/59553759?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Li-chunming",
            "html_url": "https://github.com/Li-chunming",
            "followers_url": "https://api.github.com/users/Li-chunming/followers",
            "following_url": "https://api.github.com/users/Li-chunming/following{/other_user}",
            "gists_url": "https://api.github.com/users/Li-chunming/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Li-chunming/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Li-chunming/subscriptions",
            "organizations_url": "https://api.github.com/users/Li-chunming/orgs",
            "repos_url": "https://api.github.com/users/Li-chunming/repos",
            "events_url": "https://api.github.com/users/Li-chunming/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Li-chunming/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-03-08T16:07:11Z",
        "updated_at": "2020-03-08T16:07:11Z",
        "author_association": "NONE",
        "body": "> Thanks for answer and my apollogises for late answer.\r\n> I spent some time on investigting this issue, a bit debugged onnxruntime library... and seems like issue is not with \"Add\" node.\r\n> A bit history. Currently we use on the project onnxruntime v0.5.0 and run ONNX models converted\r\n> from PyTorch. Now we are trying new version. To convert pytorch model to the ONNX we had to specify size of the input image(in our case 512x512). But in fact our model might work with any  size of input image. Since v1.0.0 onnxruntime throws exception if size of input layer is different\r\n> from size of input image we have to mark shape of the input layer as dynamic. The latest pytorch converter supports dynamic axes. So I used new converter and mark W and H as dynamic. As result some models work well but some have issues.\r\n> So debugged onnxruntime and found place where exception was thrown:\r\n> Dml/OperatorAutherHelper\\OperatorHelper.cpp::BroadcastTensorShape()\r\n> on line :\r\n> ML_CHECK_VALID_ARGUMENT((inDimension0 == inDimension1) || (inDimension0 == 1) || (inDimension1 == 1));\r\n> Shapes of inputs of \"Add\" node are different and differ by 1 px.\r\n> First input is \"Conv\" layer second is \"Upsample\" layer.\r\n> In the next step I investigated difference between two models ... There is an \"Resize\" layer instead of \"Upsample\" layer in the model we currently use and that was converted by older pytoch converter. And looks like \"Resize\" and \"Upsample\" layers works in the different way and produces different output shapes.\r\n\r\nHi,I got a familiar [problem](https://github.com/microsoft/onnxruntime/issues/3168),the model I used is Maskrcnn(Pytorch),and when I run the onnxruntime to do inference,  it happened:\r\n![image](https://user-images.githubusercontent.com/59553759/76166337-b3577d00-6198-11ea-81da-ee22af2adf76.png)\r\nThen I have checked my model , and found the '451' Add node:\r\n![image](https://user-images.githubusercontent.com/59553759/76166475-c9197200-6199-11ea-994d-8b5239c6edc2.png)\r\n\r\nIt shows the Add node is connected with Resize, and I guess it has the same reason as yours. Can you give me some suggestions?\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/596221510/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/653347548",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/2573#issuecomment-653347548",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/2573",
        "id": 653347548,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY1MzM0NzU0OA==",
        "user": {
            "login": "stale[bot]",
            "id": 26384082,
            "node_id": "MDM6Qm90MjYzODQwODI=",
            "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stale%5Bbot%5D",
            "html_url": "https://github.com/apps/stale",
            "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
            "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
            "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
            "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
            "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
            "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
            "type": "Bot",
            "site_admin": false
        },
        "created_at": "2020-07-03T04:58:01Z",
        "updated_at": "2020-07-03T04:58:01Z",
        "author_association": "NONE",
        "body": "This issue has been automatically marked as stale due to inactivity and will be closed in 7 days if no further activity occurs. If further support is needed, please provide an update and/or more details.\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/653347548/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/656971895",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/2573#issuecomment-656971895",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/2573",
        "id": 656971895,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY1Njk3MTg5NQ==",
        "user": {
            "login": "stale[bot]",
            "id": 26384082,
            "node_id": "MDM6Qm90MjYzODQwODI=",
            "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stale%5Bbot%5D",
            "html_url": "https://github.com/apps/stale",
            "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
            "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
            "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
            "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
            "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
            "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
            "type": "Bot",
            "site_admin": false
        },
        "created_at": "2020-07-11T02:39:38Z",
        "updated_at": "2020-07-11T02:39:38Z",
        "author_association": "NONE",
        "body": "This issue has been automatically closed due to inactivity. Please reactivate if further support is needed.\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/656971895/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]