[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/569094593",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/2741#issuecomment-569094593",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/2741",
        "id": 569094593,
        "node_id": "MDEyOklzc3VlQ29tbWVudDU2OTA5NDU5Mw==",
        "user": {
            "login": "snnn",
            "id": 856316,
            "node_id": "MDQ6VXNlcjg1NjMxNg==",
            "avatar_url": "https://avatars.githubusercontent.com/u/856316?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/snnn",
            "html_url": "https://github.com/snnn",
            "followers_url": "https://api.github.com/users/snnn/followers",
            "following_url": "https://api.github.com/users/snnn/following{/other_user}",
            "gists_url": "https://api.github.com/users/snnn/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/snnn/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/snnn/subscriptions",
            "organizations_url": "https://api.github.com/users/snnn/orgs",
            "repos_url": "https://api.github.com/users/snnn/repos",
            "events_url": "https://api.github.com/users/snnn/events{/privacy}",
            "received_events_url": "https://api.github.com/users/snnn/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-12-26T17:15:33Z",
        "updated_at": "2019-12-26T17:16:11Z",
        "author_association": "MEMBER",
        "body": "The prebuilt binary you got depends on openmp for parallization.  And we need to use the openmp enviroment variable to tune the performance.\r\n\r\nThe most widely used enviroment variables are:\r\n\r\nOMP_NUM_THREADS=n \r\nControls the thread pool size\r\n\r\n\r\nOMP_WAIT_POLICY=PASSIVE/ACTIVE\r\nControls whether thread spinning is enabled\r\nPASSIVE is also called throughput mode and will yield CPU after finishing current task\r\nACTIVE will not yield CPU, instead it will have a while loop to check whether the next task is ready\r\nUse PASSIVE if your CPU usage already high, and use ACTIVE when you want to trade CPU with latency\r\n\r\nYou could also build from source and disable openmp.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/569094593/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/569168559",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/2741#issuecomment-569168559",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/2741",
        "id": 569168559,
        "node_id": "MDEyOklzc3VlQ29tbWVudDU2OTE2ODU1OQ==",
        "user": {
            "login": "JustLuoyu",
            "id": 10705020,
            "node_id": "MDQ6VXNlcjEwNzA1MDIw",
            "avatar_url": "https://avatars.githubusercontent.com/u/10705020?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/JustLuoyu",
            "html_url": "https://github.com/JustLuoyu",
            "followers_url": "https://api.github.com/users/JustLuoyu/followers",
            "following_url": "https://api.github.com/users/JustLuoyu/following{/other_user}",
            "gists_url": "https://api.github.com/users/JustLuoyu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/JustLuoyu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/JustLuoyu/subscriptions",
            "organizations_url": "https://api.github.com/users/JustLuoyu/orgs",
            "repos_url": "https://api.github.com/users/JustLuoyu/repos",
            "events_url": "https://api.github.com/users/JustLuoyu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/JustLuoyu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-12-27T02:21:46Z",
        "updated_at": "2019-12-27T02:21:46Z",
        "author_association": "NONE",
        "body": "Ok, I can see why now. But yielding all my cores of CPU, I can't agree with this behavior. \r\n\r\nAnd the OpenMP environment variables are used in runtime or build from source? ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/569168559/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/569178271",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/2741#issuecomment-569178271",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/2741",
        "id": 569178271,
        "node_id": "MDEyOklzc3VlQ29tbWVudDU2OTE3ODI3MQ==",
        "user": {
            "login": "snnn",
            "id": 856316,
            "node_id": "MDQ6VXNlcjg1NjMxNg==",
            "avatar_url": "https://avatars.githubusercontent.com/u/856316?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/snnn",
            "html_url": "https://github.com/snnn",
            "followers_url": "https://api.github.com/users/snnn/followers",
            "following_url": "https://api.github.com/users/snnn/following{/other_user}",
            "gists_url": "https://api.github.com/users/snnn/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/snnn/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/snnn/subscriptions",
            "organizations_url": "https://api.github.com/users/snnn/orgs",
            "repos_url": "https://api.github.com/users/snnn/repos",
            "events_url": "https://api.github.com/users/snnn/events{/privacy}",
            "received_events_url": "https://api.github.com/users/snnn/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-12-27T03:35:43Z",
        "updated_at": "2019-12-27T03:35:43Z",
        "author_association": "MEMBER",
        "body": "By default openmp works in such a way.  You could build onnxruntime from source without the \"--use_openmp\" flag, the it will be gone.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/569178271/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/569180823",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/2741#issuecomment-569180823",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/2741",
        "id": 569180823,
        "node_id": "MDEyOklzc3VlQ29tbWVudDU2OTE4MDgyMw==",
        "user": {
            "login": "JustLuoyu",
            "id": 10705020,
            "node_id": "MDQ6VXNlcjEwNzA1MDIw",
            "avatar_url": "https://avatars.githubusercontent.com/u/10705020?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/JustLuoyu",
            "html_url": "https://github.com/JustLuoyu",
            "followers_url": "https://api.github.com/users/JustLuoyu/followers",
            "following_url": "https://api.github.com/users/JustLuoyu/following{/other_user}",
            "gists_url": "https://api.github.com/users/JustLuoyu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/JustLuoyu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/JustLuoyu/subscriptions",
            "organizations_url": "https://api.github.com/users/JustLuoyu/orgs",
            "repos_url": "https://api.github.com/users/JustLuoyu/repos",
            "events_url": "https://api.github.com/users/JustLuoyu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/JustLuoyu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-12-27T03:56:51Z",
        "updated_at": "2019-12-27T03:56:51Z",
        "author_association": "NONE",
        "body": "In fact, I do want to use OpenMP to tune the calculation performance. The problem is that I couldn't see the difference while increasing the threads number. My CPU has 12 cores and 24 threads. Increasing the threads number from 2 to 24, the processing time and CPU usage seem the same to me, nothing changed. Only when the threads number equals to 1, the processing time doubles and CPU usage becomes 100%. I'm also an OpenMP-programmer, these totally confuse me. I really don't know how to improve my application performance on CPU now. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/569180823/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/569317653",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/2741#issuecomment-569317653",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/2741",
        "id": 569317653,
        "node_id": "MDEyOklzc3VlQ29tbWVudDU2OTMxNzY1Mw==",
        "user": {
            "login": "snnn",
            "id": 856316,
            "node_id": "MDQ6VXNlcjg1NjMxNg==",
            "avatar_url": "https://avatars.githubusercontent.com/u/856316?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/snnn",
            "html_url": "https://github.com/snnn",
            "followers_url": "https://api.github.com/users/snnn/followers",
            "following_url": "https://api.github.com/users/snnn/following{/other_user}",
            "gists_url": "https://api.github.com/users/snnn/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/snnn/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/snnn/subscriptions",
            "organizations_url": "https://api.github.com/users/snnn/orgs",
            "repos_url": "https://api.github.com/users/snnn/repos",
            "events_url": "https://api.github.com/users/snnn/events{/privacy}",
            "received_events_url": "https://api.github.com/users/snnn/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-12-27T18:02:59Z",
        "updated_at": "2019-12-27T18:04:07Z",
        "author_association": "MEMBER",
        "body": "See: https://github.com/microsoft/onnxruntime/blob/master/include/onnxruntime/core/platform/threadpool.h#L66\r\n\r\nWhen you SetIntraOpNumThreads to 1 , the tp parameter for that function will be always NULL. Then it will go to the lower part and use OpenMP for parallelism. When IntraOpNumThreads is not NULL, openmp is not used at everywhere, so the CPU usage is lower. \r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/569317653/reactions",
            "total_count": 2,
            "+1": 2,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/609984766",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/2741#issuecomment-609984766",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/2741",
        "id": 609984766,
        "node_id": "MDEyOklzc3VlQ29tbWVudDYwOTk4NDc2Ng==",
        "user": {
            "login": "addisonklinke",
            "id": 39926682,
            "node_id": "MDQ6VXNlcjM5OTI2Njgy",
            "avatar_url": "https://avatars.githubusercontent.com/u/39926682?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/addisonklinke",
            "html_url": "https://github.com/addisonklinke",
            "followers_url": "https://api.github.com/users/addisonklinke/followers",
            "following_url": "https://api.github.com/users/addisonklinke/following{/other_user}",
            "gists_url": "https://api.github.com/users/addisonklinke/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/addisonklinke/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/addisonklinke/subscriptions",
            "organizations_url": "https://api.github.com/users/addisonklinke/orgs",
            "repos_url": "https://api.github.com/users/addisonklinke/repos",
            "events_url": "https://api.github.com/users/addisonklinke/events{/privacy}",
            "received_events_url": "https://api.github.com/users/addisonklinke/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-04-06T19:14:50Z",
        "updated_at": "2020-04-06T19:14:50Z",
        "author_association": "NONE",
        "body": "@JustLuoyu I had a similar issue forcing OpenMP to run on a single thread, and resolved it by setting the appropriate environmental variable _before_ importing ONNX Runtime. Perhaps the discussion on https://github.com/microsoft/onnxruntime/issues/3233 is helpful",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/609984766/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/653311670",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/2741#issuecomment-653311670",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/2741",
        "id": 653311670,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY1MzMxMTY3MA==",
        "user": {
            "login": "stale[bot]",
            "id": 26384082,
            "node_id": "MDM6Qm90MjYzODQwODI=",
            "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stale%5Bbot%5D",
            "html_url": "https://github.com/apps/stale",
            "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
            "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
            "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
            "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
            "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
            "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
            "type": "Bot",
            "site_admin": false
        },
        "created_at": "2020-07-03T02:59:11Z",
        "updated_at": "2020-07-03T02:59:11Z",
        "author_association": "NONE",
        "body": "This issue has been automatically marked as stale due to inactivity and will be closed in 7 days if no further activity occurs. If further support is needed, please provide an update and/or more details.\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/653311670/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/656987500",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/2741#issuecomment-656987500",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/2741",
        "id": 656987500,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY1Njk4NzUwMA==",
        "user": {
            "login": "stale[bot]",
            "id": 26384082,
            "node_id": "MDM6Qm90MjYzODQwODI=",
            "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stale%5Bbot%5D",
            "html_url": "https://github.com/apps/stale",
            "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
            "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
            "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
            "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
            "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
            "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
            "type": "Bot",
            "site_admin": false
        },
        "created_at": "2020-07-11T04:39:27Z",
        "updated_at": "2020-07-11T04:39:27Z",
        "author_association": "NONE",
        "body": "This issue has been automatically closed due to inactivity. Please reactivate if further support is needed.\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/656987500/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]