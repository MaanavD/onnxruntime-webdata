[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/620140390",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/3713#issuecomment-620140390",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/3713",
        "id": 620140390,
        "node_id": "MDEyOklzc3VlQ29tbWVudDYyMDE0MDM5MA==",
        "user": {
            "login": "snnn",
            "id": 856316,
            "node_id": "MDQ6VXNlcjg1NjMxNg==",
            "avatar_url": "https://avatars.githubusercontent.com/u/856316?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/snnn",
            "html_url": "https://github.com/snnn",
            "followers_url": "https://api.github.com/users/snnn/followers",
            "following_url": "https://api.github.com/users/snnn/following{/other_user}",
            "gists_url": "https://api.github.com/users/snnn/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/snnn/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/snnn/subscriptions",
            "organizations_url": "https://api.github.com/users/snnn/orgs",
            "repos_url": "https://api.github.com/users/snnn/repos",
            "events_url": "https://api.github.com/users/snnn/events{/privacy}",
            "received_events_url": "https://api.github.com/users/snnn/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-04-27T17:58:35Z",
        "updated_at": "2020-04-27T18:08:35Z",
        "author_association": "MEMBER",
        "body": "Can you build onnxruntime from source, from the master branch, and disable openmp at build time, then try it again? \r\n\r\nTo limit use to a single thread only, please do both of the following:\r\n* Build from source with openmp disabled\r\n* Set the session options intra_op_num_threads and inter_op_num_threads to 1 each.\r\n\r\nThis will be supported in ONNX Runtime v1.3.0+\r\n\r\n**Python example:**\r\n```python\r\n#!/usr/bin/python3\r\nimport onnxruntime\r\n\r\nopts = onnxruntime.SessionOptions()\r\nopts.intra_op_num_threads = 1\r\nopts.inter_op_num_threads = 1\r\nopts.execution_mode = onnxruntime.ExecutionMode.ORT_SEQUENTIAL\r\nort_session = onnxruntime.InferenceSession('/path/to/model.onnx', sess_options=opts)\r\n```\r\n\r\n**C++ example:**\r\n```c++\r\n// initialize  enviroment...one enviroment per process\r\nOrt::Env env(ORT_LOGGING_LEVEL_WARNING, \"test\");\r\n\r\n// initialize session options if needed\r\nOrt::SessionOptions session_options;\r\nsession_options.SetIntraOpNumThreads(1);\r\nsession_options.SetInterOpNumThreads(1);\r\n#ifdef _WIN32\r\n  const wchar_t* model_path = L\"squeezenet.onnx\";\r\n#else\r\n  const char* model_path = \"squeezenet.onnx\";\r\n#endif\r\n\r\nOrt::Session session(env, model_path, session_options);\r\n```\r\nAnd how many cpu cores do you have? What's the expected behavioral?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/620140390/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/620327513",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/3713#issuecomment-620327513",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/3713",
        "id": 620327513,
        "node_id": "MDEyOklzc3VlQ29tbWVudDYyMDMyNzUxMw==",
        "user": {
            "login": "qiangliu7",
            "id": 64425247,
            "node_id": "MDQ6VXNlcjY0NDI1MjQ3",
            "avatar_url": "https://avatars.githubusercontent.com/u/64425247?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/qiangliu7",
            "html_url": "https://github.com/qiangliu7",
            "followers_url": "https://api.github.com/users/qiangliu7/followers",
            "following_url": "https://api.github.com/users/qiangliu7/following{/other_user}",
            "gists_url": "https://api.github.com/users/qiangliu7/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/qiangliu7/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/qiangliu7/subscriptions",
            "organizations_url": "https://api.github.com/users/qiangliu7/orgs",
            "repos_url": "https://api.github.com/users/qiangliu7/repos",
            "events_url": "https://api.github.com/users/qiangliu7/events{/privacy}",
            "received_events_url": "https://api.github.com/users/qiangliu7/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-04-28T01:45:41Z",
        "updated_at": "2020-04-28T01:45:41Z",
        "author_association": "NONE",
        "body": "my service has 40 cpu cores,expected behavioral is : 50-way multi-threaded, CPU usage can reach 3000%, and  every request cost time  onnxruntime  is  fast then tensorflow .But the result is not !!!!\r\nFrom the results of my previous experimentsï¼Œ1000 same queries cpu can reach 3000%, onnxruntime is  fast then tensorflow. Next ,the strange question is ,1000 different queries ,the cpu is very low,only 1000%, onnxruntime  cost time is  much slower than tensorflow\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/620327513/reactions",
            "total_count": 4,
            "+1": 4,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/650730642",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/3713#issuecomment-650730642",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/3713",
        "id": 650730642,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY1MDczMDY0Mg==",
        "user": {
            "login": "Liujingxiu23",
            "id": 49260794,
            "node_id": "MDQ6VXNlcjQ5MjYwNzk0",
            "avatar_url": "https://avatars.githubusercontent.com/u/49260794?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Liujingxiu23",
            "html_url": "https://github.com/Liujingxiu23",
            "followers_url": "https://api.github.com/users/Liujingxiu23/followers",
            "following_url": "https://api.github.com/users/Liujingxiu23/following{/other_user}",
            "gists_url": "https://api.github.com/users/Liujingxiu23/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Liujingxiu23/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Liujingxiu23/subscriptions",
            "organizations_url": "https://api.github.com/users/Liujingxiu23/orgs",
            "repos_url": "https://api.github.com/users/Liujingxiu23/repos",
            "events_url": "https://api.github.com/users/Liujingxiu23/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Liujingxiu23/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-06-28T10:26:00Z",
        "updated_at": "2020-06-28T10:26:37Z",
        "author_association": "NONE",
        "body": "@qiangliu7  Do you know how to control the usage of cpu to below 100% When using openvino as the provider",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/650730642/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/678562967",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/3713#issuecomment-678562967",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/3713",
        "id": 678562967,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY3ODU2Mjk2Nw==",
        "user": {
            "login": "dashesy",
            "id": 873905,
            "node_id": "MDQ6VXNlcjg3MzkwNQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/873905?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dashesy",
            "html_url": "https://github.com/dashesy",
            "followers_url": "https://api.github.com/users/dashesy/followers",
            "following_url": "https://api.github.com/users/dashesy/following{/other_user}",
            "gists_url": "https://api.github.com/users/dashesy/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/dashesy/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dashesy/subscriptions",
            "organizations_url": "https://api.github.com/users/dashesy/orgs",
            "repos_url": "https://api.github.com/users/dashesy/repos",
            "events_url": "https://api.github.com/users/dashesy/events{/privacy}",
            "received_events_url": "https://api.github.com/users/dashesy/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-08-22T00:10:36Z",
        "updated_at": "2020-08-22T00:10:36Z",
        "author_association": "NONE",
        "body": "When running different queries can you turn on verbose logging (LogSeverityLevel = OrtLoggingLevel.ORT_LOGGING_LEVEL_VERBOSE).\r\n\r\nI see lots of messages that look like\r\n\r\n>  [V:onnxruntime:, execution_frame.cc:356 AllocateMLValueTensorSelfOwnBufferHelper] For ort_value with index: 24, block in memory pattern size is: 6144 but the actually size is: 36864, fall back to default allocation behavior\r\n\r\nThat disappear when I disable memory pattern (EnableMemoryPattern=False).\r\nThis seems to help in overall execution latency.\r\n\r\nI think this is because our model works with dynamic input size, and memory planner tries to keep the allocation pattern from one run to the next which is not useful and thus is thrown away.\r\nI am not sure if it has a latency penalty but would appreciate if there is any document that describes it.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/678562967/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/714215509",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/3713#issuecomment-714215509",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/3713",
        "id": 714215509,
        "node_id": "MDEyOklzc3VlQ29tbWVudDcxNDIxNTUwOQ==",
        "user": {
            "login": "stale[bot]",
            "id": 26384082,
            "node_id": "MDM6Qm90MjYzODQwODI=",
            "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stale%5Bbot%5D",
            "html_url": "https://github.com/apps/stale",
            "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
            "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
            "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
            "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
            "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
            "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
            "type": "Bot",
            "site_admin": false
        },
        "created_at": "2020-10-22T04:26:23Z",
        "updated_at": "2020-10-22T04:26:23Z",
        "author_association": "NONE",
        "body": "This issue has been automatically marked as stale due to inactivity and will be closed in 7 days if no further activity occurs. If further support is needed, please provide an update and/or more details.\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/714215509/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/750857889",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/3713#issuecomment-750857889",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/3713",
        "id": 750857889,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc1MDg1Nzg4OQ==",
        "user": {
            "login": "stale[bot]",
            "id": 26384082,
            "node_id": "MDM6Qm90MjYzODQwODI=",
            "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stale%5Bbot%5D",
            "html_url": "https://github.com/apps/stale",
            "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
            "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
            "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
            "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
            "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
            "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
            "type": "Bot",
            "site_admin": false
        },
        "created_at": "2020-12-24T11:39:19Z",
        "updated_at": "2020-12-24T11:39:19Z",
        "author_association": "NONE",
        "body": "This issue has been automatically closed due to inactivity. Please reactivate if further support is needed.\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/750857889/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/777632290",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/3713#issuecomment-777632290",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/3713",
        "id": 777632290,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc3NzYzMjI5MA==",
        "user": {
            "login": "OlegTheCat",
            "id": 1105265,
            "node_id": "MDQ6VXNlcjExMDUyNjU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1105265?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/OlegTheCat",
            "html_url": "https://github.com/OlegTheCat",
            "followers_url": "https://api.github.com/users/OlegTheCat/followers",
            "following_url": "https://api.github.com/users/OlegTheCat/following{/other_user}",
            "gists_url": "https://api.github.com/users/OlegTheCat/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/OlegTheCat/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/OlegTheCat/subscriptions",
            "organizations_url": "https://api.github.com/users/OlegTheCat/orgs",
            "repos_url": "https://api.github.com/users/OlegTheCat/repos",
            "events_url": "https://api.github.com/users/OlegTheCat/events{/privacy}",
            "received_events_url": "https://api.github.com/users/OlegTheCat/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-02-11T16:46:04Z",
        "updated_at": "2021-02-11T16:46:04Z",
        "author_association": "NONE",
        "body": "I'm currently using a sequential session with intra and inter num threads set to 1. The session is queried from many threads, so basically, this is \"single ONNX session for all threads\" setup. In my case, the bottleneck was the arena allocator. If I understand correctly, if the single session is used from many-many threads, the arena allocator may run out of memory allocated for itself, which leads to performance degradation. Anyways, disabling the arena allocator has increased the CPU utilization from ~20% to 100% (tested on c5.9xlarge AWS instance). Also, I turned off memory pattern optimizations, as @dashesy suggested, since input sizes in my model are dynamic.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/777632290/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/851811306",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/3713#issuecomment-851811306",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/3713",
        "id": 851811306,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg1MTgxMTMwNg==",
        "user": {
            "login": "ledaiduongvnth",
            "id": 28498007,
            "node_id": "MDQ6VXNlcjI4NDk4MDA3",
            "avatar_url": "https://avatars.githubusercontent.com/u/28498007?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ledaiduongvnth",
            "html_url": "https://github.com/ledaiduongvnth",
            "followers_url": "https://api.github.com/users/ledaiduongvnth/followers",
            "following_url": "https://api.github.com/users/ledaiduongvnth/following{/other_user}",
            "gists_url": "https://api.github.com/users/ledaiduongvnth/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/ledaiduongvnth/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/ledaiduongvnth/subscriptions",
            "organizations_url": "https://api.github.com/users/ledaiduongvnth/orgs",
            "repos_url": "https://api.github.com/users/ledaiduongvnth/repos",
            "events_url": "https://api.github.com/users/ledaiduongvnth/events{/privacy}",
            "received_events_url": "https://api.github.com/users/ledaiduongvnth/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-01T05:13:18Z",
        "updated_at": "2021-06-01T05:13:18Z",
        "author_association": "NONE",
        "body": "> Can you build onnxruntime from source, from the master branch, and disable openmp at build time, then try it again?\r\n> \r\n> To limit use to a single thread only, please do both of the following:\r\n> \r\n>     * Build from source with openmp disabled\r\n> \r\n>     * Set the session options intra_op_num_threads and inter_op_num_threads to 1 each.\r\n> \r\n> \r\n> This will be supported in ONNX Runtime v1.3.0+\r\n> \r\n> **Python example:**\r\n> \r\n> ```python\r\n> #!/usr/bin/python3\r\n> import onnxruntime\r\n> \r\n> opts = onnxruntime.SessionOptions()\r\n> opts.intra_op_num_threads = 1\r\n> opts.inter_op_num_threads = 1\r\n> opts.execution_mode = onnxruntime.ExecutionMode.ORT_SEQUENTIAL\r\n> ort_session = onnxruntime.InferenceSession('/path/to/model.onnx', sess_options=opts)\r\n> ```\r\n> \r\n> **C++ example:**\r\n> \r\n> ```c++\r\n> // initialize  enviroment...one enviroment per process\r\n> Ort::Env env(ORT_LOGGING_LEVEL_WARNING, \"test\");\r\n> \r\n> // initialize session options if needed\r\n> Ort::SessionOptions session_options;\r\n> session_options.SetIntraOpNumThreads(1);\r\n> session_options.SetInterOpNumThreads(1);\r\n> #ifdef _WIN32\r\n>   const wchar_t* model_path = L\"squeezenet.onnx\";\r\n> #else\r\n>   const char* model_path = \"squeezenet.onnx\";\r\n> #endif\r\n> \r\n> Ort::Session session(env, model_path, session_options);\r\n> ```\r\n> \r\n> And how many cpu cores do you have? What's the expected behavioral?\r\n\r\n@snnn does the instruction for using onnxruntime with single thread work with Openvino accelerator?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/851811306/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/852432379",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/3713#issuecomment-852432379",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/3713",
        "id": 852432379,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg1MjQzMjM3OQ==",
        "user": {
            "login": "snnn",
            "id": 856316,
            "node_id": "MDQ6VXNlcjg1NjMxNg==",
            "avatar_url": "https://avatars.githubusercontent.com/u/856316?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/snnn",
            "html_url": "https://github.com/snnn",
            "followers_url": "https://api.github.com/users/snnn/followers",
            "following_url": "https://api.github.com/users/snnn/following{/other_user}",
            "gists_url": "https://api.github.com/users/snnn/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/snnn/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/snnn/subscriptions",
            "organizations_url": "https://api.github.com/users/snnn/orgs",
            "repos_url": "https://api.github.com/users/snnn/repos",
            "events_url": "https://api.github.com/users/snnn/events{/privacy}",
            "received_events_url": "https://api.github.com/users/snnn/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-01T20:43:26Z",
        "updated_at": "2021-06-01T20:43:26Z",
        "author_association": "MEMBER",
        "body": "It's for the default CPU execution provider. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/852432379/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]