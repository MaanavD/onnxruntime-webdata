[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/628213684",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/3922#issuecomment-628213684",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/3922",
        "id": 628213684,
        "node_id": "MDEyOklzc3VlQ29tbWVudDYyODIxMzY4NA==",
        "user": {
            "login": "hariharans29",
            "id": 9969784,
            "node_id": "MDQ6VXNlcjk5Njk3ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9969784?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hariharans29",
            "html_url": "https://github.com/hariharans29",
            "followers_url": "https://api.github.com/users/hariharans29/followers",
            "following_url": "https://api.github.com/users/hariharans29/following{/other_user}",
            "gists_url": "https://api.github.com/users/hariharans29/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hariharans29/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hariharans29/subscriptions",
            "organizations_url": "https://api.github.com/users/hariharans29/orgs",
            "repos_url": "https://api.github.com/users/hariharans29/repos",
            "events_url": "https://api.github.com/users/hariharans29/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hariharans29/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-05-13T19:58:50Z",
        "updated_at": "2020-05-13T19:58:50Z",
        "author_association": "MEMBER",
        "body": "Hi,\r\n\r\nI read through your description and investigated both the provided models. Actually, the statement - \"Squeeze of dimension 1 is a no-op, since it's not squeezable\" is not true per ONNX spec. Please see https://github.com/onnx/onnx/blob/master/docs/Operators.md#Squeeze, where it says \"If an axis is selected with shape entry not equal to one, an error is raised\". This means that for the input of shape [16, 8000], if the axes contains [1] for the Squeeze node, then an error will have been raised in ORT - https://github.com/microsoft/onnxruntime/blob/e86214e5c00ffbb95b85478c111c8eb21de94fe9/onnxruntime/core/providers/cpu/tensor/squeeze.h#L46. \r\n\r\nThis specific model fails at loading stage - to be precise when it runs shape inference. This is because, in the shape inference logic for Squeeze - https://github.com/onnx/onnx/blob/6801d7e46f4768ae2a304615edb69ff1a388c624/onnx/defs/tensor/old.cc#L1196, since the dimensions are symbolic in the graph [\"B\", \"T\"], it can't check if the dim value is 1 and raise an error there, hence it proceeds to \"squeeze\" out the dim which then fails in the Slice node because the Slice node now has an input data rank of 1 and the axes seems to have a value {1} which is outside the range of accepted values and hence shape inference throws here - https://github.com/onnx/onnx/blob/6801d7e46f4768ae2a304615edb69ff1a388c624/onnx/defs/tensor/old.cc#L865.\r\n\r\nTechnically, this is not an ORT issue and hence I am closing it out. Please re-open if you have more questions.  ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/628213684/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/628221493",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/3922#issuecomment-628221493",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/3922",
        "id": 628221493,
        "node_id": "MDEyOklzc3VlQ29tbWVudDYyODIyMTQ5Mw==",
        "user": {
            "login": "vadimkantorov",
            "id": 1041752,
            "node_id": "MDQ6VXNlcjEwNDE3NTI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1041752?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/vadimkantorov",
            "html_url": "https://github.com/vadimkantorov",
            "followers_url": "https://api.github.com/users/vadimkantorov/followers",
            "following_url": "https://api.github.com/users/vadimkantorov/following{/other_user}",
            "gists_url": "https://api.github.com/users/vadimkantorov/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/vadimkantorov/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/vadimkantorov/subscriptions",
            "organizations_url": "https://api.github.com/users/vadimkantorov/orgs",
            "repos_url": "https://api.github.com/users/vadimkantorov/repos",
            "events_url": "https://api.github.com/users/vadimkantorov/events{/privacy}",
            "received_events_url": "https://api.github.com/users/vadimkantorov/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-05-13T20:14:48Z",
        "updated_at": "2020-05-13T20:14:48Z",
        "author_association": "NONE",
        "body": "@hariharans29 Thanks for explanation! I'll update the PyTorch issue accordingly!",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/628221493/reactions",
            "total_count": 1,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 1,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]