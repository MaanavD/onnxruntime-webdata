[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/673324309",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/4779#issuecomment-673324309",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/4779",
        "id": 673324309,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY3MzMyNDMwOQ==",
        "user": {
            "login": "hariharans29",
            "id": 9969784,
            "node_id": "MDQ6VXNlcjk5Njk3ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9969784?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hariharans29",
            "html_url": "https://github.com/hariharans29",
            "followers_url": "https://api.github.com/users/hariharans29/followers",
            "following_url": "https://api.github.com/users/hariharans29/following{/other_user}",
            "gists_url": "https://api.github.com/users/hariharans29/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hariharans29/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hariharans29/subscriptions",
            "organizations_url": "https://api.github.com/users/hariharans29/orgs",
            "repos_url": "https://api.github.com/users/hariharans29/repos",
            "events_url": "https://api.github.com/users/hariharans29/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hariharans29/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-08-13T07:56:05Z",
        "updated_at": "2020-08-13T07:56:05Z",
        "author_association": "MEMBER",
        "body": "Looks like there is some bug in the optimizer script. @tianleiwu ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/673324309/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/676352838",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/4779#issuecomment-676352838",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/4779",
        "id": 676352838,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY3NjM1MjgzOA==",
        "user": {
            "login": "colourful-tree",
            "id": 17588577,
            "node_id": "MDQ6VXNlcjE3NTg4NTc3",
            "avatar_url": "https://avatars.githubusercontent.com/u/17588577?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/colourful-tree",
            "html_url": "https://github.com/colourful-tree",
            "followers_url": "https://api.github.com/users/colourful-tree/followers",
            "following_url": "https://api.github.com/users/colourful-tree/following{/other_user}",
            "gists_url": "https://api.github.com/users/colourful-tree/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/colourful-tree/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/colourful-tree/subscriptions",
            "organizations_url": "https://api.github.com/users/colourful-tree/orgs",
            "repos_url": "https://api.github.com/users/colourful-tree/repos",
            "events_url": "https://api.github.com/users/colourful-tree/events{/privacy}",
            "received_events_url": "https://api.github.com/users/colourful-tree/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-08-19T13:25:00Z",
        "updated_at": "2020-08-19T13:31:34Z",
        "author_association": "NONE",
        "body": "@wppply @hariharans29 [https://github.com/microsoft/onnxruntime/blob/fff0b41fcb7cb85321f65d68c1dedaaf7032fcb0/onnxruntime/python/tools/transformers/onnx_model_bert.py#L91](https://github.com/microsoft/onnxruntime/blob/fff0b41fcb7cb85321f65d68c1dedaaf7032fcb0/onnxruntime/python/tools/transformers/onnx_model_bert.py#L91)\r\n\r\nRemove [line 91-92], it work for me. \r\n\r\nAnd i also change :[https://github.com/microsoft/onnxruntime/blob/fff0b41fcb7cb85321f65d68c1dedaaf7032fcb0/onnxruntime/python/tools/transformers/onnx_model_bert.py#L159](https://github.com/microsoft/onnxruntime/blob/fff0b41fcb7cb85321f65d68c1dedaaf7032fcb0/onnxruntime/python/tools/transformers/onnx_model_bert.py#L159) \r\nto\r\n`if input.name in [\"segment_ids:0\", \"input_mask:0\", \"input_ids:0\"]:`\r\n\r\nBut i find that model.optimizer.onnx this model does not faster than model.onnx. \r\n\r\nMy tinybert model is 2-transformer layers with 12 heads and 120 hidden_dim.\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/676352838/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/679878484",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/4779#issuecomment-679878484",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/4779",
        "id": 679878484,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY3OTg3ODQ4NA==",
        "user": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-08-25T08:17:38Z",
        "updated_at": "2020-08-25T08:17:38Z",
        "author_association": "MEMBER",
        "body": "@wppply, \r\n\r\nThanks for reporting the issue. \r\n\r\nThe cause of the error is a path in ONNX graph like the following:\r\n```\r\nSkipLayerNormalization (SkipLayerNorm1) --> Reshape (bert/encoder/Reshape_1) --> SkipLayerNormalization (\r\nSkipLayerNorm_AddBias_6)\r\n```\r\nThe correct one:\r\n```\r\nSkipLayerNormalization (SkipLayerNorm1) --> SkipLayerNormalization (\r\nSkipLayerNorm_AddBias_6)\r\n```\r\n\r\nFor normal BERT graph, the Reshape will be removed in [postprocess](https://github.com/microsoft/onnxruntime/blob/71d8846635a20a97d85a27e4fffcbad05ed00813/onnxruntime/python/tools/transformers/onnx_model_bert_tf.py#L304). However, for this model, the optimizer failed to fuse Attention and EmbedLayerNormalization (because subgraph pattern is different) so the Reshape node has not been removed.\r\n\r\n\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/679878484/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/689851424",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/4779#issuecomment-689851424",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/4779",
        "id": 689851424,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY4OTg1MTQyNA==",
        "user": {
            "login": "wppply",
            "id": 25071281,
            "node_id": "MDQ6VXNlcjI1MDcxMjgx",
            "avatar_url": "https://avatars.githubusercontent.com/u/25071281?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/wppply",
            "html_url": "https://github.com/wppply",
            "followers_url": "https://api.github.com/users/wppply/followers",
            "following_url": "https://api.github.com/users/wppply/following{/other_user}",
            "gists_url": "https://api.github.com/users/wppply/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/wppply/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/wppply/subscriptions",
            "organizations_url": "https://api.github.com/users/wppply/orgs",
            "repos_url": "https://api.github.com/users/wppply/repos",
            "events_url": "https://api.github.com/users/wppply/events{/privacy}",
            "received_events_url": "https://api.github.com/users/wppply/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-09T22:16:59Z",
        "updated_at": "2020-09-09T22:16:59Z",
        "author_association": "NONE",
        "body": "@tianleiwu \r\nThanks for reply. Will this issue be fixed in the next release? ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/689851424/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/716343496",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/4779#issuecomment-716343496",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/4779",
        "id": 716343496,
        "node_id": "MDEyOklzc3VlQ29tbWVudDcxNjM0MzQ5Ng==",
        "user": {
            "login": "GumpCode",
            "id": 12002038,
            "node_id": "MDQ6VXNlcjEyMDAyMDM4",
            "avatar_url": "https://avatars.githubusercontent.com/u/12002038?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/GumpCode",
            "html_url": "https://github.com/GumpCode",
            "followers_url": "https://api.github.com/users/GumpCode/followers",
            "following_url": "https://api.github.com/users/GumpCode/following{/other_user}",
            "gists_url": "https://api.github.com/users/GumpCode/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/GumpCode/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/GumpCode/subscriptions",
            "organizations_url": "https://api.github.com/users/GumpCode/orgs",
            "repos_url": "https://api.github.com/users/GumpCode/repos",
            "events_url": "https://api.github.com/users/GumpCode/events{/privacy}",
            "received_events_url": "https://api.github.com/users/GumpCode/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-10-26T06:49:52Z",
        "updated_at": "2020-10-26T07:09:13Z",
        "author_association": "NONE",
        "body": "meet the same error when i was used bert-base",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/716343496/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/749997562",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/4779#issuecomment-749997562",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/4779",
        "id": 749997562,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc0OTk5NzU2Mg==",
        "user": {
            "login": "stevewyl",
            "id": 12755003,
            "node_id": "MDQ6VXNlcjEyNzU1MDAz",
            "avatar_url": "https://avatars.githubusercontent.com/u/12755003?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stevewyl",
            "html_url": "https://github.com/stevewyl",
            "followers_url": "https://api.github.com/users/stevewyl/followers",
            "following_url": "https://api.github.com/users/stevewyl/following{/other_user}",
            "gists_url": "https://api.github.com/users/stevewyl/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stevewyl/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stevewyl/subscriptions",
            "organizations_url": "https://api.github.com/users/stevewyl/orgs",
            "repos_url": "https://api.github.com/users/stevewyl/repos",
            "events_url": "https://api.github.com/users/stevewyl/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stevewyl/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-12-23T08:05:11Z",
        "updated_at": "2020-12-23T08:05:11Z",
        "author_association": "NONE",
        "body": "After changing the codes @colourful-tree referred to, still got the same error.\r\nPackage version: Using tensorflow=1.12.0, onnx=1.8.0, tf2onnx=1.7.2/995bd6, onnxruntime-noopenmp=1.6.0\r\n\r\nprocess_embedding: Create Embedding node\r\n         prune_graph: Graph pruned: 0 inputs, 0 outputs and 34 nodes are removed\r\n         **fuse_mask_2: Failed to fuse mask**\r\n               apply: Fused SkipLayerNormalization count: 24\r\n         prune_graph: Graph pruned: 0 inputs, 0 outputs and 0 nodes are removed\r\n               apply: Fused FastGelu(add bias) count: 12\r\n               apply: Fused SkipLayerNormalization(add bias) count: 24\r\n            optimize: opset verion: 11",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/749997562/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/756288419",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/4779#issuecomment-756288419",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/4779",
        "id": 756288419,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc1NjI4ODQxOQ==",
        "user": {
            "login": "wppply",
            "id": 25071281,
            "node_id": "MDQ6VXNlcjI1MDcxMjgx",
            "avatar_url": "https://avatars.githubusercontent.com/u/25071281?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/wppply",
            "html_url": "https://github.com/wppply",
            "followers_url": "https://api.github.com/users/wppply/followers",
            "following_url": "https://api.github.com/users/wppply/following{/other_user}",
            "gists_url": "https://api.github.com/users/wppply/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/wppply/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/wppply/subscriptions",
            "organizations_url": "https://api.github.com/users/wppply/orgs",
            "repos_url": "https://api.github.com/users/wppply/repos",
            "events_url": "https://api.github.com/users/wppply/events{/privacy}",
            "received_events_url": "https://api.github.com/users/wppply/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-01-07T18:14:58Z",
        "updated_at": "2021-01-07T18:14:58Z",
        "author_association": "NONE",
        "body": "add this option in the ```optimizer.optimize_model```  will help to solve the issue \r\n```optimization_options=BertOptimizationOptions(\"gpt2\")```\r\nor manually make the change the option \r\n```enable_skip_layer_norm = False```",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/756288419/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1102328836",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/4779#issuecomment-1102328836",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/4779",
        "id": 1102328836,
        "node_id": "IC_kwDOCVq1mM5BtDQE",
        "user": {
            "login": "stale[bot]",
            "id": 26384082,
            "node_id": "MDM6Qm90MjYzODQwODI=",
            "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stale%5Bbot%5D",
            "html_url": "https://github.com/apps/stale",
            "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
            "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
            "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
            "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
            "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
            "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
            "type": "Bot",
            "site_admin": false
        },
        "created_at": "2022-04-19T08:54:27Z",
        "updated_at": "2022-04-19T08:54:27Z",
        "author_association": "NONE",
        "body": "This issue has been automatically marked as stale due to inactivity and will be closed in 7 days if no further activity occurs. If further support is needed, please provide an update and/or more details.\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1102328836/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]