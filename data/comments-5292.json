[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/699057333",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5292#issuecomment-699057333",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5292",
        "id": 699057333,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY5OTA1NzMzMw==",
        "user": {
            "login": "RandySheriffH",
            "id": 48490400,
            "node_id": "MDQ6VXNlcjQ4NDkwNDAw",
            "avatar_url": "https://avatars.githubusercontent.com/u/48490400?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/RandySheriffH",
            "html_url": "https://github.com/RandySheriffH",
            "followers_url": "https://api.github.com/users/RandySheriffH/followers",
            "following_url": "https://api.github.com/users/RandySheriffH/following{/other_user}",
            "gists_url": "https://api.github.com/users/RandySheriffH/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/RandySheriffH/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/RandySheriffH/subscriptions",
            "organizations_url": "https://api.github.com/users/RandySheriffH/orgs",
            "repos_url": "https://api.github.com/users/RandySheriffH/repos",
            "events_url": "https://api.github.com/users/RandySheriffH/events{/privacy}",
            "received_events_url": "https://api.github.com/users/RandySheriffH/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-25T17:31:34Z",
        "updated_at": "2020-09-25T17:31:34Z",
        "author_association": "MEMBER",
        "body": "The team also noticed the memory issue recently both from internal and external channels.  I am looking at https://github.com/microsoft/onnxruntime/issues/5176. May combine your case along the way.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/699057333/reactions",
            "total_count": 1,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 1
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/699089436",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5292#issuecomment-699089436",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5292",
        "id": 699089436,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY5OTA4OTQzNg==",
        "user": {
            "login": "yuslepukhin",
            "id": 11303988,
            "node_id": "MDQ6VXNlcjExMzAzOTg4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11303988?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yuslepukhin",
            "html_url": "https://github.com/yuslepukhin",
            "followers_url": "https://api.github.com/users/yuslepukhin/followers",
            "following_url": "https://api.github.com/users/yuslepukhin/following{/other_user}",
            "gists_url": "https://api.github.com/users/yuslepukhin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yuslepukhin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yuslepukhin/subscriptions",
            "organizations_url": "https://api.github.com/users/yuslepukhin/orgs",
            "repos_url": "https://api.github.com/users/yuslepukhin/repos",
            "events_url": "https://api.github.com/users/yuslepukhin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yuslepukhin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-25T18:38:10Z",
        "updated_at": "2020-09-25T18:38:10Z",
        "author_association": "MEMBER",
        "body": "The result that is returned from Run() call are IDisposables that hold pointers to the natively allocated memory. If you do not dispose them, they will continue to accumulate allocated memory.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/699089436/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/699273342",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5292#issuecomment-699273342",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5292",
        "id": 699273342,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY5OTI3MzM0Mg==",
        "user": {
            "login": "RandySheriffH",
            "id": 48490400,
            "node_id": "MDQ6VXNlcjQ4NDkwNDAw",
            "avatar_url": "https://avatars.githubusercontent.com/u/48490400?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/RandySheriffH",
            "html_url": "https://github.com/RandySheriffH",
            "followers_url": "https://api.github.com/users/RandySheriffH/followers",
            "following_url": "https://api.github.com/users/RandySheriffH/following{/other_user}",
            "gists_url": "https://api.github.com/users/RandySheriffH/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/RandySheriffH/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/RandySheriffH/subscriptions",
            "organizations_url": "https://api.github.com/users/RandySheriffH/orgs",
            "repos_url": "https://api.github.com/users/RandySheriffH/repos",
            "events_url": "https://api.github.com/users/RandySheriffH/events{/privacy}",
            "received_events_url": "https://api.github.com/users/RandySheriffH/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-26T02:08:00Z",
        "updated_at": "2020-09-26T02:09:14Z",
        "author_association": "MEMBER",
        "body": "@fco-jle: please confirm if the result disposal solve your problem.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/699273342/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/699920558",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5292#issuecomment-699920558",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5292",
        "id": 699920558,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY5OTkyMDU1OA==",
        "user": {
            "login": "fco-jle",
            "id": 43389604,
            "node_id": "MDQ6VXNlcjQzMzg5NjA0",
            "avatar_url": "https://avatars.githubusercontent.com/u/43389604?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fco-jle",
            "html_url": "https://github.com/fco-jle",
            "followers_url": "https://api.github.com/users/fco-jle/followers",
            "following_url": "https://api.github.com/users/fco-jle/following{/other_user}",
            "gists_url": "https://api.github.com/users/fco-jle/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fco-jle/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fco-jle/subscriptions",
            "organizations_url": "https://api.github.com/users/fco-jle/orgs",
            "repos_url": "https://api.github.com/users/fco-jle/repos",
            "events_url": "https://api.github.com/users/fco-jle/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fco-jle/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-28T10:23:51Z",
        "updated_at": "2020-09-28T10:24:28Z",
        "author_association": "NONE",
        "body": "Thank you for your answers. \r\n\r\nWe tried the suggested solution, doing something along the lines:\r\n\r\n`var result = session.Run(inputNames, inputValues);\r\n{Do something with result};\r\n result.Dispose();`\r\n\r\nBut it did not solve the issue, the memory keeps increasing. \r\n\r\nOur team have noticed that the memory increase has to do with the use of Zipmaps, and it seems that, when the model is being converted and saved in python, setting the zipmap option to False has improved performance and solve the memory issue in C#.\r\n\r\nSo we believe that the memory leak is related to the use of Zipmap. It might be worth mentioning that the regression models that we are using do not cause the memory leak, even with the use of zipmaps, so it might be related only to the classification output.  \r\n\r\nWe are still testing. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/699920558/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/700295765",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5292#issuecomment-700295765",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5292",
        "id": 700295765,
        "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDI5NTc2NQ==",
        "user": {
            "login": "RandySheriffH",
            "id": 48490400,
            "node_id": "MDQ6VXNlcjQ4NDkwNDAw",
            "avatar_url": "https://avatars.githubusercontent.com/u/48490400?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/RandySheriffH",
            "html_url": "https://github.com/RandySheriffH",
            "followers_url": "https://api.github.com/users/RandySheriffH/followers",
            "following_url": "https://api.github.com/users/RandySheriffH/following{/other_user}",
            "gists_url": "https://api.github.com/users/RandySheriffH/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/RandySheriffH/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/RandySheriffH/subscriptions",
            "organizations_url": "https://api.github.com/users/RandySheriffH/orgs",
            "repos_url": "https://api.github.com/users/RandySheriffH/repos",
            "events_url": "https://api.github.com/users/RandySheriffH/events{/privacy}",
            "received_events_url": "https://api.github.com/users/RandySheriffH/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-28T21:40:18Z",
        "updated_at": "2020-09-28T21:40:18Z",
        "author_association": "MEMBER",
        "body": "@fco-jle: thanks for confirmation and all the details.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/700295765/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/700859306",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5292#issuecomment-700859306",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5292",
        "id": 700859306,
        "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDg1OTMwNg==",
        "user": {
            "login": "vade",
            "id": 65011,
            "node_id": "MDQ6VXNlcjY1MDEx",
            "avatar_url": "https://avatars.githubusercontent.com/u/65011?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/vade",
            "html_url": "https://github.com/vade",
            "followers_url": "https://api.github.com/users/vade/followers",
            "following_url": "https://api.github.com/users/vade/following{/other_user}",
            "gists_url": "https://api.github.com/users/vade/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/vade/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/vade/subscriptions",
            "organizations_url": "https://api.github.com/users/vade/orgs",
            "repos_url": "https://api.github.com/users/vade/repos",
            "events_url": "https://api.github.com/users/vade/events{/privacy}",
            "received_events_url": "https://api.github.com/users/vade/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-29T17:19:07Z",
        "updated_at": "2020-09-30T21:05:20Z",
        "author_association": "CONTRIBUTOR",
        "body": "~~Hi. New to ONNX runtime and I am also seeing memory increase linearly in a inference session using python.~~\r\n\r\n~~Is this Zipmap solution part of ONNX model conversion, or a runtime flag I can't seem to find? Looking to not leak :)~~ ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/700859306/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/700866237",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5292#issuecomment-700866237",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5292",
        "id": 700866237,
        "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDg2NjIzNw==",
        "user": {
            "login": "vade",
            "id": 65011,
            "node_id": "MDQ6VXNlcjY1MDEx",
            "avatar_url": "https://avatars.githubusercontent.com/u/65011?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/vade",
            "html_url": "https://github.com/vade",
            "followers_url": "https://api.github.com/users/vade/followers",
            "following_url": "https://api.github.com/users/vade/following{/other_user}",
            "gists_url": "https://api.github.com/users/vade/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/vade/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/vade/subscriptions",
            "organizations_url": "https://api.github.com/users/vade/orgs",
            "repos_url": "https://api.github.com/users/vade/repos",
            "events_url": "https://api.github.com/users/vade/events{/privacy}",
            "received_events_url": "https://api.github.com/users/vade/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-29T17:30:48Z",
        "updated_at": "2020-09-30T21:05:37Z",
        "author_association": "CONTRIBUTOR",
        "body": "~~hey @rsomani95 - I'm noticing similar ONNX runtime memory leakage in a Ubuntu docker running CPU inference - will test GPU inference too. Are you aware of this leak, and if so, can you try an ONNX model export from pytorch that doesn't have Zipmap enabled (if possible)? Im not entirely clear if that's a thing we control :)~~",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/700866237/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/700886863",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5292#issuecomment-700886863",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5292",
        "id": 700886863,
        "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDg4Njg2Mw==",
        "user": {
            "login": "rsomani95",
            "id": 17111474,
            "node_id": "MDQ6VXNlcjE3MTExNDc0",
            "avatar_url": "https://avatars.githubusercontent.com/u/17111474?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rsomani95",
            "html_url": "https://github.com/rsomani95",
            "followers_url": "https://api.github.com/users/rsomani95/followers",
            "following_url": "https://api.github.com/users/rsomani95/following{/other_user}",
            "gists_url": "https://api.github.com/users/rsomani95/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/rsomani95/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/rsomani95/subscriptions",
            "organizations_url": "https://api.github.com/users/rsomani95/orgs",
            "repos_url": "https://api.github.com/users/rsomani95/repos",
            "events_url": "https://api.github.com/users/rsomani95/events{/privacy}",
            "received_events_url": "https://api.github.com/users/rsomani95/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-29T18:06:22Z",
        "updated_at": "2020-09-29T18:06:22Z",
        "author_association": "NONE",
        "body": "Hey @vade, first time I'm hearing of this. I'd never heard of Zipmap until now, and it certainly looks like this is not a part of the conversion process, don't see anything about it in the [PyTorch docs](https://pytorch.org/docs/stable/onnx.html#operator-export-type) either",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/700886863/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/700888856",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5292#issuecomment-700888856",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5292",
        "id": 700888856,
        "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDg4ODg1Ng==",
        "user": {
            "login": "rsomani95",
            "id": 17111474,
            "node_id": "MDQ6VXNlcjE3MTExNDc0",
            "avatar_url": "https://avatars.githubusercontent.com/u/17111474?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rsomani95",
            "html_url": "https://github.com/rsomani95",
            "followers_url": "https://api.github.com/users/rsomani95/followers",
            "following_url": "https://api.github.com/users/rsomani95/following{/other_user}",
            "gists_url": "https://api.github.com/users/rsomani95/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/rsomani95/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/rsomani95/subscriptions",
            "organizations_url": "https://api.github.com/users/rsomani95/orgs",
            "repos_url": "https://api.github.com/users/rsomani95/repos",
            "events_url": "https://api.github.com/users/rsomani95/events{/privacy}",
            "received_events_url": "https://api.github.com/users/rsomani95/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-29T18:09:58Z",
        "updated_at": "2020-09-29T18:09:58Z",
        "author_association": "NONE",
        "body": "@fco-jle what framework did you export the model from? If PyTorch, is there a specific `opset_version` that you used to alleviate the issue, or any other export param? Would appreciate any input, thanks!",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/700888856/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/701644926",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5292#issuecomment-701644926",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5292",
        "id": 701644926,
        "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTY0NDkyNg==",
        "user": {
            "login": "vade",
            "id": 65011,
            "node_id": "MDQ6VXNlcjY1MDEx",
            "avatar_url": "https://avatars.githubusercontent.com/u/65011?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/vade",
            "html_url": "https://github.com/vade",
            "followers_url": "https://api.github.com/users/vade/followers",
            "following_url": "https://api.github.com/users/vade/following{/other_user}",
            "gists_url": "https://api.github.com/users/vade/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/vade/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/vade/subscriptions",
            "organizations_url": "https://api.github.com/users/vade/orgs",
            "repos_url": "https://api.github.com/users/vade/repos",
            "events_url": "https://api.github.com/users/vade/events{/privacy}",
            "received_events_url": "https://api.github.com/users/vade/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-30T21:04:25Z",
        "updated_at": "2020-09-30T21:04:25Z",
        "author_association": "CONTRIBUTOR",
        "body": "Seems my memory issue was a subtle issue on my end - using multiple threads along with generators seems to act poorly or I'm misunderstanding a subtlety of python (not a python dev). running serial inference shows acceptable, expected memory usage.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/701644926/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/702253879",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5292#issuecomment-702253879",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5292",
        "id": 702253879,
        "node_id": "MDEyOklzc3VlQ29tbWVudDcwMjI1Mzg3OQ==",
        "user": {
            "login": "RandySheriffH",
            "id": 48490400,
            "node_id": "MDQ6VXNlcjQ4NDkwNDAw",
            "avatar_url": "https://avatars.githubusercontent.com/u/48490400?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/RandySheriffH",
            "html_url": "https://github.com/RandySheriffH",
            "followers_url": "https://api.github.com/users/RandySheriffH/followers",
            "following_url": "https://api.github.com/users/RandySheriffH/following{/other_user}",
            "gists_url": "https://api.github.com/users/RandySheriffH/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/RandySheriffH/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/RandySheriffH/subscriptions",
            "organizations_url": "https://api.github.com/users/RandySheriffH/orgs",
            "repos_url": "https://api.github.com/users/RandySheriffH/repos",
            "events_url": "https://api.github.com/users/RandySheriffH/events{/privacy}",
            "received_events_url": "https://api.github.com/users/RandySheriffH/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-10-01T16:31:44Z",
        "updated_at": "2020-10-01T21:39:29Z",
        "author_association": "MEMBER",
        "body": "@fco-jle \r\nIn dealing with https://github.com/microsoft/onnxruntime/issues/5176, I tested C# API, it turns out in order to make mem flat, one has to dispose inferred results timely and call GC.collect() to ensure releasing, for you case would you mind to further try with dispose and GC.collec() combined after each run?\r\nSome more information - along the way I also tested C/C++ API trying to spot native code leaks by utilizing the built-in mem debugger in ORT:\r\nhttps://github.com/microsoft/onnxruntime/blob/master/onnxruntime/core/platform/windows/debug_alloc.h\r\nwhile by far no suspicious leaks have ever been spotted.  ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/702253879/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/703348930",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5292#issuecomment-703348930",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5292",
        "id": 703348930,
        "node_id": "MDEyOklzc3VlQ29tbWVudDcwMzM0ODkzMA==",
        "user": {
            "login": "RandySheriffH",
            "id": 48490400,
            "node_id": "MDQ6VXNlcjQ4NDkwNDAw",
            "avatar_url": "https://avatars.githubusercontent.com/u/48490400?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/RandySheriffH",
            "html_url": "https://github.com/RandySheriffH",
            "followers_url": "https://api.github.com/users/RandySheriffH/followers",
            "following_url": "https://api.github.com/users/RandySheriffH/following{/other_user}",
            "gists_url": "https://api.github.com/users/RandySheriffH/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/RandySheriffH/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/RandySheriffH/subscriptions",
            "organizations_url": "https://api.github.com/users/RandySheriffH/orgs",
            "repos_url": "https://api.github.com/users/RandySheriffH/repos",
            "events_url": "https://api.github.com/users/RandySheriffH/events{/privacy}",
            "received_events_url": "https://api.github.com/users/RandySheriffH/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-10-05T01:19:53Z",
        "updated_at": "2020-10-05T01:19:53Z",
        "author_association": "MEMBER",
        "body": "@fco-jle: Would u mind either confirm the dispose + GC.collect() approch or somehow share maybe a sample model for further investigation? Like stated in https://github.com/microsoft/onnxruntime/issues/5176, there is unlikely any native leaks from ORT. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/703348930/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/704084643",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5292#issuecomment-704084643",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5292",
        "id": 704084643,
        "node_id": "MDEyOklzc3VlQ29tbWVudDcwNDA4NDY0Mw==",
        "user": {
            "login": "fco-jle",
            "id": 43389604,
            "node_id": "MDQ6VXNlcjQzMzg5NjA0",
            "avatar_url": "https://avatars.githubusercontent.com/u/43389604?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fco-jle",
            "html_url": "https://github.com/fco-jle",
            "followers_url": "https://api.github.com/users/fco-jle/followers",
            "following_url": "https://api.github.com/users/fco-jle/following{/other_user}",
            "gists_url": "https://api.github.com/users/fco-jle/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fco-jle/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fco-jle/subscriptions",
            "organizations_url": "https://api.github.com/users/fco-jle/orgs",
            "repos_url": "https://api.github.com/users/fco-jle/repos",
            "events_url": "https://api.github.com/users/fco-jle/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fco-jle/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-10-06T07:24:57Z",
        "updated_at": "2020-10-06T07:24:57Z",
        "author_association": "NONE",
        "body": "@vade , The zipmap option is used in the sklearn framework.\r\n\r\nFirst, we loaded the booster with lightgbm, then we used the sklearn API of lightgbm to do: \r\n\r\n```\r\ninitial_type = initial_types=[('input', FloatTensorType([1, n_cols]))]\r\noptions = {id(model): {'zipmap': False}};\r\nonnx = convert_sklearn(model, initial_types=initial_type, options=options)\r\n```\r\n\r\n@RandySheriffH, before we tried this zipmap option set to false, we tried to  dispose the result and call gc.collect(). It works and leaves memory flat, but (at least in our case) we cannot use it, since it increases running time of the program by a lot, which we cannot afford. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/704084643/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/704368191",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5292#issuecomment-704368191",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5292",
        "id": 704368191,
        "node_id": "MDEyOklzc3VlQ29tbWVudDcwNDM2ODE5MQ==",
        "user": {
            "login": "RandySheriffH",
            "id": 48490400,
            "node_id": "MDQ6VXNlcjQ4NDkwNDAw",
            "avatar_url": "https://avatars.githubusercontent.com/u/48490400?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/RandySheriffH",
            "html_url": "https://github.com/RandySheriffH",
            "followers_url": "https://api.github.com/users/RandySheriffH/followers",
            "following_url": "https://api.github.com/users/RandySheriffH/following{/other_user}",
            "gists_url": "https://api.github.com/users/RandySheriffH/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/RandySheriffH/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/RandySheriffH/subscriptions",
            "organizations_url": "https://api.github.com/users/RandySheriffH/orgs",
            "repos_url": "https://api.github.com/users/RandySheriffH/repos",
            "events_url": "https://api.github.com/users/RandySheriffH/events{/privacy}",
            "received_events_url": "https://api.github.com/users/RandySheriffH/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-10-06T15:48:19Z",
        "updated_at": "2020-10-06T15:51:36Z",
        "author_association": "MEMBER",
        "body": "@fco-jle thanks for confirmation.\r\nThen it again proved that we have no actual leaks to cope with.\r\nAnd of course you don't need to call GC.collect() in real production, just let it do its job with some patience.\r\nOn certain condition for sure it will release resources to bring down memory pressure.\r\nFurther, if immediate memory release is indeed a must, please consider resort to our c/c++ APIs.\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/704368191/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/843205969",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5292#issuecomment-843205969",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5292",
        "id": 843205969,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg0MzIwNTk2OQ==",
        "user": {
            "login": "kbrajwani",
            "id": 29722986,
            "node_id": "MDQ6VXNlcjI5NzIyOTg2",
            "avatar_url": "https://avatars.githubusercontent.com/u/29722986?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/kbrajwani",
            "html_url": "https://github.com/kbrajwani",
            "followers_url": "https://api.github.com/users/kbrajwani/followers",
            "following_url": "https://api.github.com/users/kbrajwani/following{/other_user}",
            "gists_url": "https://api.github.com/users/kbrajwani/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/kbrajwani/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/kbrajwani/subscriptions",
            "organizations_url": "https://api.github.com/users/kbrajwani/orgs",
            "repos_url": "https://api.github.com/users/kbrajwani/repos",
            "events_url": "https://api.github.com/users/kbrajwani/events{/privacy}",
            "received_events_url": "https://api.github.com/users/kbrajwani/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-05-18T14:10:54Z",
        "updated_at": "2021-05-18T14:10:54Z",
        "author_association": "NONE",
        "body": "@RandySheriffH  @rsomani95 Hey i am facing same issue . i am using this repo https://github.com/iiLaurens/CascadeTabNet/tree/mmdet2x model weights. I have converted  model with mmdet liabrary into onnx.\r\nIt's increasing gpu memory at every inference time. i tried torch.cuda.empty_cache() and gc.collect() but nothings works.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/843205969/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/953734792",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5292#issuecomment-953734792",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5292",
        "id": 953734792,
        "node_id": "IC_kwDOCVq1mM442NaI",
        "user": {
            "login": "cqray1990",
            "id": 32585434,
            "node_id": "MDQ6VXNlcjMyNTg1NDM0",
            "avatar_url": "https://avatars.githubusercontent.com/u/32585434?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/cqray1990",
            "html_url": "https://github.com/cqray1990",
            "followers_url": "https://api.github.com/users/cqray1990/followers",
            "following_url": "https://api.github.com/users/cqray1990/following{/other_user}",
            "gists_url": "https://api.github.com/users/cqray1990/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/cqray1990/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/cqray1990/subscriptions",
            "organizations_url": "https://api.github.com/users/cqray1990/orgs",
            "repos_url": "https://api.github.com/users/cqray1990/repos",
            "events_url": "https://api.github.com/users/cqray1990/events{/privacy}",
            "received_events_url": "https://api.github.com/users/cqray1990/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-10-28T10:56:54Z",
        "updated_at": "2021-10-28T10:56:54Z",
        "author_association": "NONE",
        "body": "@ kbrajwani  how did you  solve this problem, it's increasing gpu memory at every inference in python code",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/953734792/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/953736128",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5292#issuecomment-953736128",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5292",
        "id": 953736128,
        "node_id": "IC_kwDOCVq1mM442NvA",
        "user": {
            "login": "cqray1990",
            "id": 32585434,
            "node_id": "MDQ6VXNlcjMyNTg1NDM0",
            "avatar_url": "https://avatars.githubusercontent.com/u/32585434?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/cqray1990",
            "html_url": "https://github.com/cqray1990",
            "followers_url": "https://api.github.com/users/cqray1990/followers",
            "following_url": "https://api.github.com/users/cqray1990/following{/other_user}",
            "gists_url": "https://api.github.com/users/cqray1990/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/cqray1990/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/cqray1990/subscriptions",
            "organizations_url": "https://api.github.com/users/cqray1990/orgs",
            "repos_url": "https://api.github.com/users/cqray1990/repos",
            "events_url": "https://api.github.com/users/cqray1990/events{/privacy}",
            "received_events_url": "https://api.github.com/users/cqray1990/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-10-28T10:59:02Z",
        "updated_at": "2021-10-28T10:59:02Z",
        "author_association": "NONE",
        "body": "@kbrajwani \r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/953736128/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/955629135",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/5292#issuecomment-955629135",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/5292",
        "id": 955629135,
        "node_id": "IC_kwDOCVq1mM449b5P",
        "user": {
            "login": "kbrajwani",
            "id": 29722986,
            "node_id": "MDQ6VXNlcjI5NzIyOTg2",
            "avatar_url": "https://avatars.githubusercontent.com/u/29722986?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/kbrajwani",
            "html_url": "https://github.com/kbrajwani",
            "followers_url": "https://api.github.com/users/kbrajwani/followers",
            "following_url": "https://api.github.com/users/kbrajwani/following{/other_user}",
            "gists_url": "https://api.github.com/users/kbrajwani/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/kbrajwani/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/kbrajwani/subscriptions",
            "organizations_url": "https://api.github.com/users/kbrajwani/orgs",
            "repos_url": "https://api.github.com/users/kbrajwani/repos",
            "events_url": "https://api.github.com/users/kbrajwani/events{/privacy}",
            "received_events_url": "https://api.github.com/users/kbrajwani/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-10-31T03:12:33Z",
        "updated_at": "2021-10-31T03:12:33Z",
        "author_association": "NONE",
        "body": "@cqray1990 i had stop using onnxruntime and go back to pytorch where it will only increase the memory when it's doing inference and then it come down. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/955629135/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]