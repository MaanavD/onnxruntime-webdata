[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/740820568",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6078#issuecomment-740820568",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6078",
        "id": 740820568,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc0MDgyMDU2OA==",
        "user": {
            "login": "yufenglee",
            "id": 30486710,
            "node_id": "MDQ6VXNlcjMwNDg2NzEw",
            "avatar_url": "https://avatars.githubusercontent.com/u/30486710?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yufenglee",
            "html_url": "https://github.com/yufenglee",
            "followers_url": "https://api.github.com/users/yufenglee/followers",
            "following_url": "https://api.github.com/users/yufenglee/following{/other_user}",
            "gists_url": "https://api.github.com/users/yufenglee/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yufenglee/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yufenglee/subscriptions",
            "organizations_url": "https://api.github.com/users/yufenglee/orgs",
            "repos_url": "https://api.github.com/users/yufenglee/repos",
            "events_url": "https://api.github.com/users/yufenglee/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yufenglee/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-12-08T18:25:17Z",
        "updated_at": "2020-12-08T18:25:17Z",
        "author_association": "MEMBER",
        "body": "@jywu-msft and @stevenlix , please help to take a look.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/740820568/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/740822746",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6078#issuecomment-740822746",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6078",
        "id": 740822746,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc0MDgyMjc0Ng==",
        "user": {
            "login": "jywu-msft",
            "id": 43355415,
            "node_id": "MDQ6VXNlcjQzMzU1NDE1",
            "avatar_url": "https://avatars.githubusercontent.com/u/43355415?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jywu-msft",
            "html_url": "https://github.com/jywu-msft",
            "followers_url": "https://api.github.com/users/jywu-msft/followers",
            "following_url": "https://api.github.com/users/jywu-msft/following{/other_user}",
            "gists_url": "https://api.github.com/users/jywu-msft/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jywu-msft/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jywu-msft/subscriptions",
            "organizations_url": "https://api.github.com/users/jywu-msft/orgs",
            "repos_url": "https://api.github.com/users/jywu-msft/repos",
            "events_url": "https://api.github.com/users/jywu-msft/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jywu-msft/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-12-08T18:28:50Z",
        "updated_at": "2020-12-08T18:29:08Z",
        "author_association": "MEMBER",
        "body": "> @jywu-msft and @stevenlix , please help to take a look.\r\n\r\nthe above repro script shows the user is setting the session to use CUDA EP , not TensorRT EP.  ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/740822746/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/740824919",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6078#issuecomment-740824919",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6078",
        "id": 740824919,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc0MDgyNDkxOQ==",
        "user": {
            "login": "yufenglee",
            "id": 30486710,
            "node_id": "MDQ6VXNlcjMwNDg2NzEw",
            "avatar_url": "https://avatars.githubusercontent.com/u/30486710?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yufenglee",
            "html_url": "https://github.com/yufenglee",
            "followers_url": "https://api.github.com/users/yufenglee/followers",
            "following_url": "https://api.github.com/users/yufenglee/following{/other_user}",
            "gists_url": "https://api.github.com/users/yufenglee/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yufenglee/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yufenglee/subscriptions",
            "organizations_url": "https://api.github.com/users/yufenglee/orgs",
            "repos_url": "https://api.github.com/users/yufenglee/repos",
            "events_url": "https://api.github.com/users/yufenglee/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yufenglee/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-12-08T18:32:05Z",
        "updated_at": "2020-12-08T18:32:05Z",
        "author_association": "MEMBER",
        "body": "Add @pranavsharma as well.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/740824919/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/740914375",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6078#issuecomment-740914375",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6078",
        "id": 740914375,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc0MDkxNDM3NQ==",
        "user": {
            "login": "tanmaniac",
            "id": 557994,
            "node_id": "MDQ6VXNlcjU1Nzk5NA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/557994?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tanmaniac",
            "html_url": "https://github.com/tanmaniac",
            "followers_url": "https://api.github.com/users/tanmaniac/followers",
            "following_url": "https://api.github.com/users/tanmaniac/following{/other_user}",
            "gists_url": "https://api.github.com/users/tanmaniac/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tanmaniac/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tanmaniac/subscriptions",
            "organizations_url": "https://api.github.com/users/tanmaniac/orgs",
            "repos_url": "https://api.github.com/users/tanmaniac/repos",
            "events_url": "https://api.github.com/users/tanmaniac/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tanmaniac/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-12-08T19:37:08Z",
        "updated_at": "2020-12-08T19:37:08Z",
        "author_association": "NONE",
        "body": "Thank you for the quick response on this! For additional context, when I try to run with TensorRT, the session is unable to build the TensorRT engine and falls back to CUDA, where it fails with the same error.\r\n\r\n```diff\r\n-model_file = \"../my_model.onnx\"\r\n+# Followed instruction here: https://github.com/microsoft/onnxruntime/blob/master/docs/execution_providers/TensorRT-ExecutionProvider.md#shape-inference-for-tensorrt-subgraphs\r\n+model_file = \"../my_model_shaped_inference.onnx\"\r\n \r\n print(f\"Execution providers: {rt.get_available_providers()}\")\r\n ort_sess = rt.InferenceSession(model_file,\r\n-                               providers=[\"CUDAExecutionProvider\"])\r\n+                               providers=[\"TensorrtExecutionProvider\"])\r\n```\r\ngives\r\n\r\n```bash\r\nExecution providers: ['CPUExecutionProvider', 'CUDAExecutionProvider', 'TensorrtExecutionProvider']\r\n2020-12-08 19:26:40.478631461 [E:onnxruntime:, sequential_executor.cc:318 Execute] Non-zero status code returned while running TRTKernel_graph_tf2onnx_32 node. Name:'TensorrtExecutionProvider_TRTKernel_graph_tf2onnx_32_32' Status Message: TensorRT EP Failed to Build Engine.\r\nEP Error: [ONNXRuntimeError] : 11 : EP_FAIL : Non-zero status code returned while running TRTKernel_graph_tf2onnx_32 node. Name:'TensorrtExecutionProvider_TRTKernel_graph_tf2onnx_32_32' Status Message: TensorRT EP Failed to Build Engine. using ['TensorrtExecutionProvider', 'CPUExecutionProvider']\r\nFalling back to ['CUDAExecutionProvider', 'CPUExecutionProvider'] and retrying.\r\n2020-12-08 19:26:41.389730575 [E:onnxruntime:, sequential_executor.cc:318 Execute] Non-zero status code returned while running Reshape node. Name:'StatefulPartitionedCall/gesture_model_features/gesture_model/transformer_block/linear_multi_head_attention/Reshape_3' Status Message: CUDA error cudaErrorInvalidConfiguration:invalid configuration argument\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/dist-packages/onnxruntime/capi/session.py\", line 123, in run\r\n    return self._sess.run(output_names, input_feed, run_options)\r\nonnxruntime.capi.onnxruntime_pybind11_state.EPFail: [ONNXRuntimeError] : 11 : EP_FAIL : Non-zero status code returned while running TRTKernel_graph_tf2onnx_32 node. Name:'TensorrtExecutionProvider_TRTKernel_graph_tf2onnx_32_32' Status Message: TensorRT EP Failed to Build Engine.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"reprod.py\", line 22, in <module>\r\n    pred_onx = ort_sess.run(None, input_dict)\r\n  File \"/usr/local/lib/python3.6/dist-packages/onnxruntime/capi/session.py\", line 131, in run\r\n    return self._sess.run(output_names, input_feed, run_options)\r\nonnxruntime.capi.onnxruntime_pybind11_state.Fail: [ONNXRuntimeError] : 1 : FAIL : Non-zero status code returned while running Reshape node. Name:'StatefulPartitionedCall/gesture_model_features/gesture_model/transformer_block/linear_multi_head_attention/Reshape_3' Status Message: CUDA error cudaErrorInvalidConfiguration:invalid configuration argument\r\npython3: /onnx-runtime/onnxruntime/onnxruntime/core/framework/provider_bridge_ort.cc:653: onnxruntime::ProviderLibrary::~ProviderLibrary(): Assertion `!handle_' failed.\r\nAborted (core dumped)\r\n```\r\n\r\nI don't care too much about TensorRT since my target platform (Jetson Nano) can't do mixed-precision inference anyway; I believe TensorRT is outside the scope of this issue.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/740914375/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/740967987",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6078#issuecomment-740967987",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6078",
        "id": 740967987,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc0MDk2Nzk4Nw==",
        "user": {
            "login": "jywu-msft",
            "id": 43355415,
            "node_id": "MDQ6VXNlcjQzMzU1NDE1",
            "avatar_url": "https://avatars.githubusercontent.com/u/43355415?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jywu-msft",
            "html_url": "https://github.com/jywu-msft",
            "followers_url": "https://api.github.com/users/jywu-msft/followers",
            "following_url": "https://api.github.com/users/jywu-msft/following{/other_user}",
            "gists_url": "https://api.github.com/users/jywu-msft/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jywu-msft/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jywu-msft/subscriptions",
            "organizations_url": "https://api.github.com/users/jywu-msft/orgs",
            "repos_url": "https://api.github.com/users/jywu-msft/repos",
            "events_url": "https://api.github.com/users/jywu-msft/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jywu-msft/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-12-08T20:17:19Z",
        "updated_at": "2020-12-08T20:17:19Z",
        "author_association": "MEMBER",
        "body": "it could be a model issue as you mention. we wouldn't be able to debug the issue without a repro case/minimal model.  ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/740967987/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/742710457",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6078#issuecomment-742710457",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6078",
        "id": 742710457,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc0MjcxMDQ1Nw==",
        "user": {
            "login": "tanmaniac",
            "id": 557994,
            "node_id": "MDQ6VXNlcjU1Nzk5NA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/557994?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tanmaniac",
            "html_url": "https://github.com/tanmaniac",
            "followers_url": "https://api.github.com/users/tanmaniac/followers",
            "following_url": "https://api.github.com/users/tanmaniac/following{/other_user}",
            "gists_url": "https://api.github.com/users/tanmaniac/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tanmaniac/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tanmaniac/subscriptions",
            "organizations_url": "https://api.github.com/users/tanmaniac/orgs",
            "repos_url": "https://api.github.com/users/tanmaniac/repos",
            "events_url": "https://api.github.com/users/tanmaniac/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tanmaniac/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-12-10T18:31:12Z",
        "updated_at": "2020-12-10T18:31:12Z",
        "author_association": "NONE",
        "body": "Got it, yes unfortunately the model is still relatively novel research so we don't want to share it just yet. In that case, I don't think it will be possible for you to debug this issue; I'd be fine with closing this issue and trying again with ORT in a later release (or with a later `tf2onnx` version).\r\n\r\nThank you for taking a look though!",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/742710457/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/742789943",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6078#issuecomment-742789943",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6078",
        "id": 742789943,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc0Mjc4OTk0Mw==",
        "user": {
            "login": "jywu-msft",
            "id": 43355415,
            "node_id": "MDQ6VXNlcjQzMzU1NDE1",
            "avatar_url": "https://avatars.githubusercontent.com/u/43355415?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jywu-msft",
            "html_url": "https://github.com/jywu-msft",
            "followers_url": "https://api.github.com/users/jywu-msft/followers",
            "following_url": "https://api.github.com/users/jywu-msft/following{/other_user}",
            "gists_url": "https://api.github.com/users/jywu-msft/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jywu-msft/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jywu-msft/subscriptions",
            "organizations_url": "https://api.github.com/users/jywu-msft/orgs",
            "repos_url": "https://api.github.com/users/jywu-msft/repos",
            "events_url": "https://api.github.com/users/jywu-msft/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jywu-msft/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-12-10T20:49:07Z",
        "updated_at": "2020-12-10T20:49:07Z",
        "author_association": "MEMBER",
        "body": "or if it's possible, can you provide more information about the failing reshape node?\r\nWhat are the inputs/attributes etc. that are causing it to fail.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/742789943/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]