[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/773004404",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6457#issuecomment-773004404",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6457",
        "id": 773004404,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc3MzAwNDQwNA==",
        "user": {
            "login": "fdwr",
            "id": 1809166,
            "node_id": "MDQ6VXNlcjE4MDkxNjY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1809166?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fdwr",
            "html_url": "https://github.com/fdwr",
            "followers_url": "https://api.github.com/users/fdwr/followers",
            "following_url": "https://api.github.com/users/fdwr/following{/other_user}",
            "gists_url": "https://api.github.com/users/fdwr/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fdwr/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fdwr/subscriptions",
            "organizations_url": "https://api.github.com/users/fdwr/orgs",
            "repos_url": "https://api.github.com/users/fdwr/repos",
            "events_url": "https://api.github.com/users/fdwr/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fdwr/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-02-04T03:40:48Z",
        "updated_at": "2021-02-04T23:24:47Z",
        "author_association": "MEMBER",
        "body": "@Mut1nyJD - can you link the model (removing any confidential weights or proprietary logic)? Then we can try to repro this with WinML to see if it's unique to ORT usage (more likely it happens with both, inside ORT's DirectML execution provider). Thanks, from a DirectML dev.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/773004404/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/773219471",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6457#issuecomment-773219471",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6457",
        "id": 773219471,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc3MzIxOTQ3MQ==",
        "user": {
            "login": "Mut1nyJD",
            "id": 34618634,
            "node_id": "MDQ6VXNlcjM0NjE4NjM0",
            "avatar_url": "https://avatars.githubusercontent.com/u/34618634?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Mut1nyJD",
            "html_url": "https://github.com/Mut1nyJD",
            "followers_url": "https://api.github.com/users/Mut1nyJD/followers",
            "following_url": "https://api.github.com/users/Mut1nyJD/following{/other_user}",
            "gists_url": "https://api.github.com/users/Mut1nyJD/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Mut1nyJD/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Mut1nyJD/subscriptions",
            "organizations_url": "https://api.github.com/users/Mut1nyJD/orgs",
            "repos_url": "https://api.github.com/users/Mut1nyJD/repos",
            "events_url": "https://api.github.com/users/Mut1nyJD/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Mut1nyJD/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-02-04T10:56:25Z",
        "updated_at": "2021-02-04T10:56:25Z",
        "author_association": "NONE",
        "body": "@fdwr \r\n> @Mut1nyJD - can you link the model (removing any confidential weights or proprietary logic)? Then we can try to repro this with WinML to see if it's unique to ORT usage (more likely it happens with both, inside ORT's DirectML execution provider). TY.\r\n\r\nSure thing, please find download link below\r\n\r\nhttps://cloud.degoo.com/share/OSztmu1W2nbGkg",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/773219471/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/773668928",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6457#issuecomment-773668928",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6457",
        "id": 773668928,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc3MzY2ODkyOA==",
        "user": {
            "login": "fdwr",
            "id": 1809166,
            "node_id": "MDQ6VXNlcjE4MDkxNjY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1809166?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fdwr",
            "html_url": "https://github.com/fdwr",
            "followers_url": "https://api.github.com/users/fdwr/followers",
            "following_url": "https://api.github.com/users/fdwr/following{/other_user}",
            "gists_url": "https://api.github.com/users/fdwr/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fdwr/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fdwr/subscriptions",
            "organizations_url": "https://api.github.com/users/fdwr/orgs",
            "repos_url": "https://api.github.com/users/fdwr/repos",
            "events_url": "https://api.github.com/users/fdwr/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fdwr/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-02-04T23:23:12Z",
        "updated_at": "2021-02-04T23:23:43Z",
        "author_association": "MEMBER",
        "body": "Thanks. Downloaded the model \"yolov5_face.onnx\".\r\n\r\nðŸ¤” The model runs successfully with WinMlRunner.exe (from here https://github.com/Microsoft/Windows-Machine-Learning/tree/master/Tools/WinMLRunner) using ORT master bits along with DirectML 1.4.1 (not published yet, just internally). So I'll check against DirectML 1.4.0 and ORT 1.6.0 too to see if I can repro it.\r\n\r\n```\r\nC:\\>WinMLRunner.exe -gpu -model \"yolov5_face onnxruntime github issue 6457.onnx\"\r\n\r\nCreated LearningModelDevice with GPU: NVIDIA Quadro P400\r\nLoading model (path = D:\\ai\\models\\broken\\yolov5_face onnxruntime github issue 6457.onnx)...\r\n=================================================================\r\nName: torch-jit-export\r\nAuthor: pytorch\r\nVersion: 0\r\nDomain:\r\nDescription:\r\nPath: D:\\ai\\models\\broken\\yolov5_face onnxruntime github issue 6457.onnx\r\nSupport FP16: false\r\n\r\nInput Feature Info:\r\nName: images\r\nFeature Kind: Float\r\n\r\nOutput Feature Info:\r\nName: output\r\nFeature Kind: Float\r\n\r\nName: 566\r\nFeature Kind: Float\r\n\r\nName: 585\r\nFeature Kind: Float\r\n\r\n=================================================================\r\n\r\nBinding (device = GPU, iteration = 1, inputBinding = CPU, inputDataType = Tensor, deviceCreationLocation = WinML)...[SUCCESS]\r\nEvaluating (device = GPU, iteration = 1, inputBinding = CPU, inputDataType = Tensor, deviceCreationLocation = WinML)...[SUCCESS]\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/773668928/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/788156213",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6457#issuecomment-788156213",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6457",
        "id": 788156213,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc4ODE1NjIxMw==",
        "user": {
            "login": "Mut1nyJD",
            "id": 34618634,
            "node_id": "MDQ6VXNlcjM0NjE4NjM0",
            "avatar_url": "https://avatars.githubusercontent.com/u/34618634?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Mut1nyJD",
            "html_url": "https://github.com/Mut1nyJD",
            "followers_url": "https://api.github.com/users/Mut1nyJD/followers",
            "following_url": "https://api.github.com/users/Mut1nyJD/following{/other_user}",
            "gists_url": "https://api.github.com/users/Mut1nyJD/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Mut1nyJD/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Mut1nyJD/subscriptions",
            "organizations_url": "https://api.github.com/users/Mut1nyJD/orgs",
            "repos_url": "https://api.github.com/users/Mut1nyJD/repos",
            "events_url": "https://api.github.com/users/Mut1nyJD/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Mut1nyJD/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-03-01T18:08:42Z",
        "updated_at": "2021-03-01T18:08:42Z",
        "author_association": "NONE",
        "body": "Any update on this? As it turns out there are lots of models that do not work anything that is basically not just a pure image classification model I'll get the same error, including the FasterRCN and MaskRCN models from the official ONNX model zoo. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/788156213/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/792922583",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6457#issuecomment-792922583",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6457",
        "id": 792922583,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc5MjkyMjU4Mw==",
        "user": {
            "login": "Mut1nyJD",
            "id": 34618634,
            "node_id": "MDQ6VXNlcjM0NjE4NjM0",
            "avatar_url": "https://avatars.githubusercontent.com/u/34618634?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Mut1nyJD",
            "html_url": "https://github.com/Mut1nyJD",
            "followers_url": "https://api.github.com/users/Mut1nyJD/followers",
            "following_url": "https://api.github.com/users/Mut1nyJD/following{/other_user}",
            "gists_url": "https://api.github.com/users/Mut1nyJD/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Mut1nyJD/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Mut1nyJD/subscriptions",
            "organizations_url": "https://api.github.com/users/Mut1nyJD/orgs",
            "repos_url": "https://api.github.com/users/Mut1nyJD/repos",
            "events_url": "https://api.github.com/users/Mut1nyJD/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Mut1nyJD/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-03-08T17:23:56Z",
        "updated_at": "2021-03-08T17:23:56Z",
        "author_association": "NONE",
        "body": "Still seeing the same issue with Version 1.7.0 DML nuGet package I am wondering if there is something wrong on my end?\r\n\r\nAbout 75% of the models on the official model zoo on www.onnx.ai don't load with the DML ExecutionProvider active.\r\n\r\nThe only ones I managed to get running is the MobileNetV2 and  candy.onnx that is referenced in the fns_candy_style_transfer sample code. \r\n\r\nAnything else does not load making this Execution Provider pretty useless tbh.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/792922583/reactions",
            "total_count": 2,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 2,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/793572182",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6457#issuecomment-793572182",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6457",
        "id": 793572182,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc5MzU3MjE4Mg==",
        "user": {
            "login": "fdwr",
            "id": 1809166,
            "node_id": "MDQ6VXNlcjE4MDkxNjY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1809166?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fdwr",
            "html_url": "https://github.com/fdwr",
            "followers_url": "https://api.github.com/users/fdwr/followers",
            "following_url": "https://api.github.com/users/fdwr/following{/other_user}",
            "gists_url": "https://api.github.com/users/fdwr/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fdwr/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fdwr/subscriptions",
            "organizations_url": "https://api.github.com/users/fdwr/orgs",
            "repos_url": "https://api.github.com/users/fdwr/repos",
            "events_url": "https://api.github.com/users/fdwr/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fdwr/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-03-09T08:53:53Z",
        "updated_at": "2021-03-10T23:20:03Z",
        "author_association": "MEMBER",
        "body": "Can you confirm that the newer DirectML.dll is being loaded by your executable? (e.g. in the Visual Studio debugger Modules window). If the DLL is copied alongside your exe, then the new DLL should be found. Otherwise ORT is likely trying to load DirectML.dll from the OS in C:\\Windows\\System32\\* (which is older).",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/793572182/reactions",
            "total_count": 2,
            "+1": 2,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/793913521",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6457#issuecomment-793913521",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6457",
        "id": 793913521,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc5MzkxMzUyMQ==",
        "user": {
            "login": "Mut1nyJD",
            "id": 34618634,
            "node_id": "MDQ6VXNlcjM0NjE4NjM0",
            "avatar_url": "https://avatars.githubusercontent.com/u/34618634?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Mut1nyJD",
            "html_url": "https://github.com/Mut1nyJD",
            "followers_url": "https://api.github.com/users/Mut1nyJD/followers",
            "following_url": "https://api.github.com/users/Mut1nyJD/following{/other_user}",
            "gists_url": "https://api.github.com/users/Mut1nyJD/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Mut1nyJD/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Mut1nyJD/subscriptions",
            "organizations_url": "https://api.github.com/users/Mut1nyJD/orgs",
            "repos_url": "https://api.github.com/users/Mut1nyJD/repos",
            "events_url": "https://api.github.com/users/Mut1nyJD/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Mut1nyJD/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-03-09T13:41:20Z",
        "updated_at": "2021-03-09T13:41:20Z",
        "author_association": "NONE",
        "body": "@fdwr \r\nAh very good point that's seems to be it when I use my standalone test program it works now since I can see it actually loads the correct .DLL (loading a model on IntelGPU seems to take awful long though). The other use case I had been trying before was where my inference code also is inside its own .dll that gets loaded by another executable and it looks like even though DirectML/OnnxRuntime.dll are along side it and get referenced in a manifest it still opens the System-wide one.\r\n\r\nThank you!",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/793913521/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/794891025",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6457#issuecomment-794891025",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6457",
        "id": 794891025,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc5NDg5MTAyNQ==",
        "user": {
            "login": "fdwr",
            "id": 1809166,
            "node_id": "MDQ6VXNlcjE4MDkxNjY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1809166?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fdwr",
            "html_url": "https://github.com/fdwr",
            "followers_url": "https://api.github.com/users/fdwr/followers",
            "following_url": "https://api.github.com/users/fdwr/following{/other_user}",
            "gists_url": "https://api.github.com/users/fdwr/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fdwr/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fdwr/subscriptions",
            "organizations_url": "https://api.github.com/users/fdwr/orgs",
            "repos_url": "https://api.github.com/users/fdwr/repos",
            "events_url": "https://api.github.com/users/fdwr/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fdwr/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-03-10T05:09:51Z",
        "updated_at": "2021-03-10T05:09:58Z",
        "author_association": "MEMBER",
        "body": "> it works now\r\n\r\nYay.\r\n\r\n>The other use case I had been trying before was where my inference code also is inside its own .dll that gets loaded by another executable\r\n\r\n@Mut1nyJD : Yeah, LoadLibrary calls favor the process (.exe) path, not that of the loading DLL. ðŸ¤” I'm not sure what to suggest in that case, except maybe have your DLL call `AddDllDirectory` before initializing the ORT and the DML EP (and to be clean, `RemoveDllDirectory` afterward). If the ONNX model zoo works correctly now (albeit slowly) for you, is it safe to close the issue?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/794891025/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/795373434",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/6457#issuecomment-795373434",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/6457",
        "id": 795373434,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc5NTM3MzQzNA==",
        "user": {
            "login": "Mut1nyJD",
            "id": 34618634,
            "node_id": "MDQ6VXNlcjM0NjE4NjM0",
            "avatar_url": "https://avatars.githubusercontent.com/u/34618634?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Mut1nyJD",
            "html_url": "https://github.com/Mut1nyJD",
            "followers_url": "https://api.github.com/users/Mut1nyJD/followers",
            "following_url": "https://api.github.com/users/Mut1nyJD/following{/other_user}",
            "gists_url": "https://api.github.com/users/Mut1nyJD/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Mut1nyJD/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Mut1nyJD/subscriptions",
            "organizations_url": "https://api.github.com/users/Mut1nyJD/orgs",
            "repos_url": "https://api.github.com/users/Mut1nyJD/repos",
            "events_url": "https://api.github.com/users/Mut1nyJD/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Mut1nyJD/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-03-10T12:54:53Z",
        "updated_at": "2021-03-10T12:54:53Z",
        "author_association": "NONE",
        "body": "@fdwr : Yeah I spend hours reading through assembly manifest documentation to see if there is something I can do because frankly I don't understand what is happening since it does work with onnxruntime.dll it is loaded from the same directory as my .dll but the dependent DirectML.dll is not. In the end I did something similar to your suggestion so I added a SetDllDirectory call in my .dll a bit of a hack but oh well. \r\n\r\nAnyway thank you for your help I will close this as not only does it work with the model zoo ones but also with the original model I was initially filling the issue about.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/795373434/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]