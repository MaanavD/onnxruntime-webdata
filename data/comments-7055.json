[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/802269345",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7055#issuecomment-802269345",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7055",
        "id": 802269345,
        "node_id": "MDEyOklzc3VlQ29tbWVudDgwMjI2OTM0NQ==",
        "user": {
            "login": "tianleiwu",
            "id": 30328909,
            "node_id": "MDQ6VXNlcjMwMzI4OTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30328909?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tianleiwu",
            "html_url": "https://github.com/tianleiwu",
            "followers_url": "https://api.github.com/users/tianleiwu/followers",
            "following_url": "https://api.github.com/users/tianleiwu/following{/other_user}",
            "gists_url": "https://api.github.com/users/tianleiwu/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tianleiwu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tianleiwu/subscriptions",
            "organizations_url": "https://api.github.com/users/tianleiwu/orgs",
            "repos_url": "https://api.github.com/users/tianleiwu/repos",
            "events_url": "https://api.github.com/users/tianleiwu/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tianleiwu/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-03-18T20:28:08Z",
        "updated_at": "2021-03-18T20:32:29Z",
        "author_association": "MEMBER",
        "body": "@Matthieu-Tinycoaching, you can see the usage like the following. The last 3 parameters can help you. Below is example output (depending on your onnxruntime-gpu version):\r\n```\r\npython -m onnxruntime.transformers.bert_perf_test --help\r\n\r\nusage: bert_perf_test.py [-h] --model MODEL -b BATCH_SIZE [BATCH_SIZE ...] -s\r\n                         SEQUENCE_LENGTH [--samples SAMPLES] [-t TEST_TIMES]\r\n                         [--opt_level {0,1,2,99}] [--seed SEED] [--verbose]\r\n                         [--use_gpu] [-n INTRA_OP_NUM_THREADS]\r\n                         [--input_ids_name INPUT_IDS_NAME]\r\n                         [--segment_ids_name SEGMENT_IDS_NAME]\r\n                         [--input_mask_name INPUT_MASK_NAME]\r\n```\r\n\r\nFirst, use view\\properties in Netron to find the input names of your ONNX model. If the model has two inputs, you need specify name of each input (like input_ids, token_type_ids or attention_mask). \r\n\r\nHere is an example for models with two inputs:\r\n```\r\npython -m onnxruntime.transformers.bert_perf_test --model stsb-xlm-r-multilingual.bert.opt.onnx --batch_size 1 --sequence_length 128 --samples 1000 --test_times 1 --inclusive --all --use_gpu --input_ids_name input_ids --input_mask_name attention_mask\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/802269345/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/802638037",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7055#issuecomment-802638037",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7055",
        "id": 802638037,
        "node_id": "MDEyOklzc3VlQ29tbWVudDgwMjYzODAzNw==",
        "user": {
            "login": "Matthieu-Tinycoaching",
            "id": 77435960,
            "node_id": "MDQ6VXNlcjc3NDM1OTYw",
            "avatar_url": "https://avatars.githubusercontent.com/u/77435960?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Matthieu-Tinycoaching",
            "html_url": "https://github.com/Matthieu-Tinycoaching",
            "followers_url": "https://api.github.com/users/Matthieu-Tinycoaching/followers",
            "following_url": "https://api.github.com/users/Matthieu-Tinycoaching/following{/other_user}",
            "gists_url": "https://api.github.com/users/Matthieu-Tinycoaching/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Matthieu-Tinycoaching/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Matthieu-Tinycoaching/subscriptions",
            "organizations_url": "https://api.github.com/users/Matthieu-Tinycoaching/orgs",
            "repos_url": "https://api.github.com/users/Matthieu-Tinycoaching/repos",
            "events_url": "https://api.github.com/users/Matthieu-Tinycoaching/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Matthieu-Tinycoaching/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-03-19T08:10:59Z",
        "updated_at": "2021-03-19T08:10:59Z",
        "author_association": "NONE",
        "body": "Thanks @tianleiwu it works !",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/802638037/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]