[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/803657588",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7067#issuecomment-803657588",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7067",
        "id": 803657588,
        "node_id": "MDEyOklzc3VlQ29tbWVudDgwMzY1NzU4OA==",
        "user": {
            "login": "RandySheriffH",
            "id": 48490400,
            "node_id": "MDQ6VXNlcjQ4NDkwNDAw",
            "avatar_url": "https://avatars.githubusercontent.com/u/48490400?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/RandySheriffH",
            "html_url": "https://github.com/RandySheriffH",
            "followers_url": "https://api.github.com/users/RandySheriffH/followers",
            "following_url": "https://api.github.com/users/RandySheriffH/following{/other_user}",
            "gists_url": "https://api.github.com/users/RandySheriffH/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/RandySheriffH/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/RandySheriffH/subscriptions",
            "organizations_url": "https://api.github.com/users/RandySheriffH/orgs",
            "repos_url": "https://api.github.com/users/RandySheriffH/repos",
            "events_url": "https://api.github.com/users/RandySheriffH/events{/privacy}",
            "received_events_url": "https://api.github.com/users/RandySheriffH/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-03-21T20:49:47Z",
        "updated_at": "2021-03-21T20:49:47Z",
        "author_association": "MEMBER",
        "body": "@mejas: Great to see such detailed stack, thanks! Ever tried loading the model with onnxruntime Python API, if so is the memory curve similar?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/803657588/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/803717450",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7067#issuecomment-803717450",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7067",
        "id": 803717450,
        "node_id": "MDEyOklzc3VlQ29tbWVudDgwMzcxNzQ1MA==",
        "user": {
            "login": "mejas",
            "id": 5220815,
            "node_id": "MDQ6VXNlcjUyMjA4MTU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5220815?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mejas",
            "html_url": "https://github.com/mejas",
            "followers_url": "https://api.github.com/users/mejas/followers",
            "following_url": "https://api.github.com/users/mejas/following{/other_user}",
            "gists_url": "https://api.github.com/users/mejas/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mejas/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mejas/subscriptions",
            "organizations_url": "https://api.github.com/users/mejas/orgs",
            "repos_url": "https://api.github.com/users/mejas/repos",
            "events_url": "https://api.github.com/users/mejas/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mejas/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-03-22T02:19:10Z",
        "updated_at": "2021-03-22T02:19:41Z",
        "author_association": "NONE",
        "body": "Hi @RandySheriffH,\r\nThanks for taking time to reply. I'm not too familiar with the python tools for memory profiling, but I gave it a shot just in case. I ran the following script in combination with the `memory_profiler` tool available in python:\r\n```\r\nimport onnxruntime as rt\r\n@profile\r\ndef my_func():\r\n    session = rt.InferenceSession('DifferentModelSizes_80MB.onnx')\r\n\r\nif __name__ == '__main__':\r\n    my_func()\r\n```\r\nThe profiler gave me the following results:\r\n```\r\nLine #    Mem usage    Increment  Occurences   Line Contents\r\n============================================================\r\n     3   38.836 MiB   38.836 MiB           1   @profile\r\n     4                                         def my_func():\r\n     5  797.113 MiB  758.277 MiB           1       session = rt.InferenceSession('DifferentModelSizes_80MB.onnx')\r\n```\r\nI did see that allocated memory spiked to around 1.1GB via Task Manager (same as the C# program I created), but noticed that memory quickly got freed compared to the C# one. I don't have deeper insight into the python runtime as it is something I am not familiar with, however I find it odd since the CLR has pretty fine-tuned GC algorithms (even for interop libraries like onnxruntime).\r\n\r\nWould like to hear your thoughts on the matter, thanks!",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/803717450/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]