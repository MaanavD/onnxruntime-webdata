[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/820425485",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7347#issuecomment-820425485",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7347",
        "id": 820425485,
        "node_id": "MDEyOklzc3VlQ29tbWVudDgyMDQyNTQ4NQ==",
        "user": {
            "login": "airMeng",
            "id": 39229107,
            "node_id": "MDQ6VXNlcjM5MjI5MTA3",
            "avatar_url": "https://avatars.githubusercontent.com/u/39229107?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/airMeng",
            "html_url": "https://github.com/airMeng",
            "followers_url": "https://api.github.com/users/airMeng/followers",
            "following_url": "https://api.github.com/users/airMeng/following{/other_user}",
            "gists_url": "https://api.github.com/users/airMeng/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/airMeng/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/airMeng/subscriptions",
            "organizations_url": "https://api.github.com/users/airMeng/orgs",
            "repos_url": "https://api.github.com/users/airMeng/repos",
            "events_url": "https://api.github.com/users/airMeng/events{/privacy}",
            "received_events_url": "https://api.github.com/users/airMeng/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-04-15T13:33:09Z",
        "updated_at": "2021-04-15T13:33:09Z",
        "author_association": "NONE",
        "body": "@hariharans29 this will also affect performance of real model (resnet50 e.g.), we need to set intra_num_threads to get the same performance as **numactl** , but this is unnecessary for onnxruntime==1.6.0",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/820425485/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/820497862",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7347#issuecomment-820497862",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7347",
        "id": 820497862,
        "node_id": "MDEyOklzc3VlQ29tbWVudDgyMDQ5Nzg2Mg==",
        "user": {
            "login": "snnn",
            "id": 856316,
            "node_id": "MDQ6VXNlcjg1NjMxNg==",
            "avatar_url": "https://avatars.githubusercontent.com/u/856316?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/snnn",
            "html_url": "https://github.com/snnn",
            "followers_url": "https://api.github.com/users/snnn/followers",
            "following_url": "https://api.github.com/users/snnn/following{/other_user}",
            "gists_url": "https://api.github.com/users/snnn/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/snnn/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/snnn/subscriptions",
            "organizations_url": "https://api.github.com/users/snnn/orgs",
            "repos_url": "https://api.github.com/users/snnn/repos",
            "events_url": "https://api.github.com/users/snnn/events{/privacy}",
            "received_events_url": "https://api.github.com/users/snnn/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-04-15T14:59:00Z",
        "updated_at": "2021-04-15T14:59:18Z",
        "author_association": "MEMBER",
        "body": "When you create the InferenceSession, please also pass in a SessionOption, and in the option please set intra_op_num_threads  to a correct value.  Like this:\r\n\r\n```python\r\nimport onnxruntime as rt\r\n\r\nsess_options = rt.SessionOptions()\r\n\r\nsess_options.intra_op_num_threads = 2\r\nsess_options.execution_mode = rt.ExecutionMode.ORT_SEQUENTIAL\r\nsess_options.graph_optimization_level = rt.GraphOptimizationLevel.ORT_ENABLE_ALL\r\n```\r\nintra_op_num_threads should be the number of cores you want to use.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/820497862/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/820846250",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7347#issuecomment-820846250",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7347",
        "id": 820846250,
        "node_id": "MDEyOklzc3VlQ29tbWVudDgyMDg0NjI1MA==",
        "user": {
            "login": "airMeng",
            "id": 39229107,
            "node_id": "MDQ6VXNlcjM5MjI5MTA3",
            "avatar_url": "https://avatars.githubusercontent.com/u/39229107?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/airMeng",
            "html_url": "https://github.com/airMeng",
            "followers_url": "https://api.github.com/users/airMeng/followers",
            "following_url": "https://api.github.com/users/airMeng/following{/other_user}",
            "gists_url": "https://api.github.com/users/airMeng/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/airMeng/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/airMeng/subscriptions",
            "organizations_url": "https://api.github.com/users/airMeng/orgs",
            "repos_url": "https://api.github.com/users/airMeng/repos",
            "events_url": "https://api.github.com/users/airMeng/events{/privacy}",
            "received_events_url": "https://api.github.com/users/airMeng/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-04-16T01:40:50Z",
        "updated_at": "2021-04-16T01:40:50Z",
        "author_association": "NONE",
        "body": "@snnn  this is wired because **numactl** should have higher priority. Could you share more details about cores binding, for example, how to bind to specific cores outside the program?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/820846250/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/821580813",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7347#issuecomment-821580813",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7347",
        "id": 821580813,
        "node_id": "MDEyOklzc3VlQ29tbWVudDgyMTU4MDgxMw==",
        "user": {
            "login": "snnn",
            "id": 856316,
            "node_id": "MDQ6VXNlcjg1NjMxNg==",
            "avatar_url": "https://avatars.githubusercontent.com/u/856316?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/snnn",
            "html_url": "https://github.com/snnn",
            "followers_url": "https://api.github.com/users/snnn/followers",
            "following_url": "https://api.github.com/users/snnn/following{/other_user}",
            "gists_url": "https://api.github.com/users/snnn/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/snnn/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/snnn/subscriptions",
            "organizations_url": "https://api.github.com/users/snnn/orgs",
            "repos_url": "https://api.github.com/users/snnn/repos",
            "events_url": "https://api.github.com/users/snnn/events{/privacy}",
            "received_events_url": "https://api.github.com/users/snnn/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-04-16T21:48:22Z",
        "updated_at": "2021-04-16T21:48:22Z",
        "author_association": "MEMBER",
        "body": "It could because of this code; https://github.com/microsoft/onnxruntime/blob/8d737f977056444a307f1b7f0bcd402fba62d790/onnxruntime/core/util/thread_utils.cc#L19\r\n\r\nOnnx runtime doesn't know you are using numactl.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/821580813/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/821754949",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7347#issuecomment-821754949",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7347",
        "id": 821754949,
        "node_id": "MDEyOklzc3VlQ29tbWVudDgyMTc1NDk0OQ==",
        "user": {
            "login": "airMeng",
            "id": 39229107,
            "node_id": "MDQ6VXNlcjM5MjI5MTA3",
            "avatar_url": "https://avatars.githubusercontent.com/u/39229107?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/airMeng",
            "html_url": "https://github.com/airMeng",
            "followers_url": "https://api.github.com/users/airMeng/followers",
            "following_url": "https://api.github.com/users/airMeng/following{/other_user}",
            "gists_url": "https://api.github.com/users/airMeng/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/airMeng/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/airMeng/subscriptions",
            "organizations_url": "https://api.github.com/users/airMeng/orgs",
            "repos_url": "https://api.github.com/users/airMeng/repos",
            "events_url": "https://api.github.com/users/airMeng/events{/privacy}",
            "received_events_url": "https://api.github.com/users/airMeng/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-04-17T02:56:00Z",
        "updated_at": "2021-04-17T02:56:00Z",
        "author_association": "NONE",
        "body": "So how can I bind the program to specific cores? for example, I need multi instances, the first instance was running on core 0-3, the second was running on core 4-7, and so on...         ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/821754949/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/821755258",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7347#issuecomment-821755258",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7347",
        "id": 821755258,
        "node_id": "MDEyOklzc3VlQ29tbWVudDgyMTc1NTI1OA==",
        "user": {
            "login": "airMeng",
            "id": 39229107,
            "node_id": "MDQ6VXNlcjM5MjI5MTA3",
            "avatar_url": "https://avatars.githubusercontent.com/u/39229107?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/airMeng",
            "html_url": "https://github.com/airMeng",
            "followers_url": "https://api.github.com/users/airMeng/followers",
            "following_url": "https://api.github.com/users/airMeng/following{/other_user}",
            "gists_url": "https://api.github.com/users/airMeng/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/airMeng/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/airMeng/subscriptions",
            "organizations_url": "https://api.github.com/users/airMeng/orgs",
            "repos_url": "https://api.github.com/users/airMeng/repos",
            "events_url": "https://api.github.com/users/airMeng/events{/privacy}",
            "received_events_url": "https://api.github.com/users/airMeng/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-04-17T02:59:07Z",
        "updated_at": "2021-04-17T02:59:07Z",
        "author_association": "NONE",
        "body": "and why numactl can control onnxruntime1.6.0 ? I think this is a significant change of 1.7.0, right?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/821755258/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/823468779",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7347#issuecomment-823468779",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7347",
        "id": 823468779,
        "node_id": "MDEyOklzc3VlQ29tbWVudDgyMzQ2ODc3OQ==",
        "user": {
            "login": "snnn",
            "id": 856316,
            "node_id": "MDQ6VXNlcjg1NjMxNg==",
            "avatar_url": "https://avatars.githubusercontent.com/u/856316?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/snnn",
            "html_url": "https://github.com/snnn",
            "followers_url": "https://api.github.com/users/snnn/followers",
            "following_url": "https://api.github.com/users/snnn/following{/other_user}",
            "gists_url": "https://api.github.com/users/snnn/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/snnn/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/snnn/subscriptions",
            "organizations_url": "https://api.github.com/users/snnn/orgs",
            "repos_url": "https://api.github.com/users/snnn/repos",
            "events_url": "https://api.github.com/users/snnn/events{/privacy}",
            "received_events_url": "https://api.github.com/users/snnn/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-04-20T17:32:12Z",
        "updated_at": "2021-04-20T17:32:26Z",
        "author_association": "MEMBER",
        "body": "When you have multiple session on the same machine, you should explicitly set sess_options.intra_op_num_threads to a good value. So that each session will only use a portion of the total CPUs. By default each of them tries to use all of the CPUs. \r\n\r\nIf you set intra_op_num_threads, then onnxruntime won't bind itself to specific CPU cores. You can use numactl  to do the job.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/823468779/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/824088633",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7347#issuecomment-824088633",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7347",
        "id": 824088633,
        "node_id": "MDEyOklzc3VlQ29tbWVudDgyNDA4ODYzMw==",
        "user": {
            "login": "airMeng",
            "id": 39229107,
            "node_id": "MDQ6VXNlcjM5MjI5MTA3",
            "avatar_url": "https://avatars.githubusercontent.com/u/39229107?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/airMeng",
            "html_url": "https://github.com/airMeng",
            "followers_url": "https://api.github.com/users/airMeng/followers",
            "following_url": "https://api.github.com/users/airMeng/following{/other_user}",
            "gists_url": "https://api.github.com/users/airMeng/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/airMeng/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/airMeng/subscriptions",
            "organizations_url": "https://api.github.com/users/airMeng/orgs",
            "repos_url": "https://api.github.com/users/airMeng/repos",
            "events_url": "https://api.github.com/users/airMeng/events{/privacy}",
            "received_events_url": "https://api.github.com/users/airMeng/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-04-21T14:04:57Z",
        "updated_at": "2021-04-21T14:04:57Z",
        "author_association": "NONE",
        "body": "the question remains here. I can't use numactl to control the cores bindings, and intra_op_num_threads will only set the session on several threads (4 cores) not specific 4 cores (core 0,1,2,3).",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/824088633/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/877797222",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7347#issuecomment-877797222",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7347",
        "id": 877797222,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg3Nzc5NzIyMg==",
        "user": {
            "login": "NCEPUYTL",
            "id": 37887563,
            "node_id": "MDQ6VXNlcjM3ODg3NTYz",
            "avatar_url": "https://avatars.githubusercontent.com/u/37887563?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/NCEPUYTL",
            "html_url": "https://github.com/NCEPUYTL",
            "followers_url": "https://api.github.com/users/NCEPUYTL/followers",
            "following_url": "https://api.github.com/users/NCEPUYTL/following{/other_user}",
            "gists_url": "https://api.github.com/users/NCEPUYTL/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/NCEPUYTL/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/NCEPUYTL/subscriptions",
            "organizations_url": "https://api.github.com/users/NCEPUYTL/orgs",
            "repos_url": "https://api.github.com/users/NCEPUYTL/repos",
            "events_url": "https://api.github.com/users/NCEPUYTL/events{/privacy}",
            "received_events_url": "https://api.github.com/users/NCEPUYTL/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-07-11T13:09:48Z",
        "updated_at": "2021-07-11T13:09:48Z",
        "author_association": "NONE",
        "body": "> the question remains here. I can't use numactl to control the cores bindings, and intra_op_num_threads will only set the session on several threads (4 cores) not specific 4 cores (core 0,1,2,3).\r\n\r\nso,how do you set the session on specific 4 cores (core 0,1,2,3) now,I also meet this problem,thks",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/877797222/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/878411202",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7347#issuecomment-878411202",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7347",
        "id": 878411202,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg3ODQxMTIwMg==",
        "user": {
            "login": "snnn",
            "id": 856316,
            "node_id": "MDQ6VXNlcjg1NjMxNg==",
            "avatar_url": "https://avatars.githubusercontent.com/u/856316?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/snnn",
            "html_url": "https://github.com/snnn",
            "followers_url": "https://api.github.com/users/snnn/followers",
            "following_url": "https://api.github.com/users/snnn/following{/other_user}",
            "gists_url": "https://api.github.com/users/snnn/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/snnn/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/snnn/subscriptions",
            "organizations_url": "https://api.github.com/users/snnn/orgs",
            "repos_url": "https://api.github.com/users/snnn/repos",
            "events_url": "https://api.github.com/users/snnn/events{/privacy}",
            "received_events_url": "https://api.github.com/users/snnn/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-07-12T16:15:22Z",
        "updated_at": "2021-07-12T16:15:22Z",
        "author_association": "MEMBER",
        "body": "Ok, let me disable onnx runtime's thread affinity logic. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/878411202/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]