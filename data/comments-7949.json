[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/855278649",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7949#issuecomment-855278649",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7949",
        "id": 855278649,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg1NTI3ODY0OQ==",
        "user": {
            "login": "fs-eire",
            "id": 7679871,
            "node_id": "MDQ6VXNlcjc2Nzk4NzE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7679871?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fs-eire",
            "html_url": "https://github.com/fs-eire",
            "followers_url": "https://api.github.com/users/fs-eire/followers",
            "following_url": "https://api.github.com/users/fs-eire/following{/other_user}",
            "gists_url": "https://api.github.com/users/fs-eire/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fs-eire/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fs-eire/subscriptions",
            "organizations_url": "https://api.github.com/users/fs-eire/orgs",
            "repos_url": "https://api.github.com/users/fs-eire/repos",
            "events_url": "https://api.github.com/users/fs-eire/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fs-eire/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-05T18:34:15Z",
        "updated_at": "2021-06-05T18:34:15Z",
        "author_association": "MEMBER",
        "body": "@jakebailey thank you for the feedback.\r\n\r\nI didn't use ts-loader for Node.js before. For web, to generate bundles it is usually OK to recompile the typescript from dependencies, as the target library may have different output settings (es5/es6/es7, umd/mjs), so sometimes recompiling from source typescript code is better than consuming the bundle.min.js. Usually this does not cause any error, the only disadvantage is a longer build time.\r\n\r\nDoes the typescript code in the NPM package causes ts-loader to behave unexpectedly (like fail to load the node binding)? If so, please share me the example so that I can take a look into the issue.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/855278649/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/856233972",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7949#issuecomment-856233972",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7949",
        "id": 856233972,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg1NjIzMzk3Mg==",
        "user": {
            "login": "jakebailey",
            "id": 5341706,
            "node_id": "MDQ6VXNlcjUzNDE3MDY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5341706?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jakebailey",
            "html_url": "https://github.com/jakebailey",
            "followers_url": "https://api.github.com/users/jakebailey/followers",
            "following_url": "https://api.github.com/users/jakebailey/following{/other_user}",
            "gists_url": "https://api.github.com/users/jakebailey/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jakebailey/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jakebailey/subscriptions",
            "organizations_url": "https://api.github.com/users/jakebailey/orgs",
            "repos_url": "https://api.github.com/users/jakebailey/repos",
            "events_url": "https://api.github.com/users/jakebailey/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jakebailey/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-07T20:30:49Z",
        "updated_at": "2021-06-07T20:30:49Z",
        "author_association": "MEMBER",
        "body": "> is usually OK to recompile the typescript from dependencies, as the target library may have different output settings (es5/es6/es7, umd/mjs), so sometimes recompiling from source typescript code is better than consuming the bundle.min.js.\r\n\r\nThis isn't the way that I've seen libraries do it, at least not so far. I don't know of any library that expects `ts-loader` or another bundler to compile it when producing the bundle; bundlers (and TSC itself) are typically able to create the right shims to allow interop.\r\n\r\n> Does the typescript code in the NPM package causes `ts-loader` to behave unexpectedly (like fail to load the node binding)? If so, please share me the example so that I can take a look into the issue.\r\n\r\nMy case is unique; in order to support using onnxruntime on all three supported platforms in a single bundle, I replace `binding.js` at webpack load time with a version that can point to the right `.node` file (downloaded into the output for bundling), rather than using webpack's own node loader to grab what's in `node_modules`. If we were to use the loader the normal way, we would only be packaging the version of the onnxruntime for the platform that happened to do the bundle.\r\n\r\nI noticed this issue because `binding.js` was no longer getting loaded and webpack was throwing on loading the .node files; `ts-loader` was instead choosing to compile the code out of `node_modules` (the file I was overriding was no longer being used), which is why I noticed this discrepancy.\r\n\r\nI will test to see how it works when I tell it to replace the `ts` file (or, remove my workaround temporarily), but this does go against `ts-loader`'s default configuration and some info on the TS tracker. The fact that it works in some scenarios sounds like a fluke. See:\r\n\r\nhttps://github.com/TypeStrong/ts-loader#allowtsinnodemodules\r\n\r\nhttps://github.com/Microsoft/TypeScript/issues/12358",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/856233972/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/857276993",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7949#issuecomment-857276993",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7949",
        "id": 857276993,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg1NzI3Njk5Mw==",
        "user": {
            "login": "fs-eire",
            "id": 7679871,
            "node_id": "MDQ6VXNlcjc2Nzk4NzE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7679871?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fs-eire",
            "html_url": "https://github.com/fs-eire",
            "followers_url": "https://api.github.com/users/fs-eire/followers",
            "following_url": "https://api.github.com/users/fs-eire/following{/other_user}",
            "gists_url": "https://api.github.com/users/fs-eire/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fs-eire/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fs-eire/subscriptions",
            "organizations_url": "https://api.github.com/users/fs-eire/orgs",
            "repos_url": "https://api.github.com/users/fs-eire/repos",
            "events_url": "https://api.github.com/users/fs-eire/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fs-eire/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-09T00:14:47Z",
        "updated_at": "2021-06-09T00:14:47Z",
        "author_association": "MEMBER",
        "body": "fix is done and a dev version package is published `onnxruntime-node@1.8.0-dev.20210608.0`.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/857276993/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/858046884",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7949#issuecomment-858046884",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7949",
        "id": 858046884,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg1ODA0Njg4NA==",
        "user": {
            "login": "jakebailey",
            "id": 5341706,
            "node_id": "MDQ6VXNlcjUzNDE3MDY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5341706?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jakebailey",
            "html_url": "https://github.com/jakebailey",
            "followers_url": "https://api.github.com/users/jakebailey/followers",
            "following_url": "https://api.github.com/users/jakebailey/following{/other_user}",
            "gists_url": "https://api.github.com/users/jakebailey/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jakebailey/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jakebailey/subscriptions",
            "organizations_url": "https://api.github.com/users/jakebailey/orgs",
            "repos_url": "https://api.github.com/users/jakebailey/repos",
            "events_url": "https://api.github.com/users/jakebailey/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jakebailey/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-09T19:50:09Z",
        "updated_at": "2021-06-09T19:50:09Z",
        "author_association": "MEMBER",
        "body": "I tried it out, but it appears as though the common package is not quite right:\r\n\r\n```\r\nERROR in ../../node_modules/onnxruntime-common/lib/inference-session.ts\r\nModule build failed (from ../../node_modules/ts-loader/index.js):\r\nError: TypeScript emitted no output for /home/jake/work/pyrx-yarn/node_modules/onnxruntime-common/lib/inference-session.ts. By default, ts-loader will not compile .ts files in node_modules.\r\nYou should not need to recompile .ts files there, but if you really want to, use the allowTsInNodeModules option.\r\nSee: https://github.com/Microsoft/TypeScript/issues/12358\r\n    at makeSourceMapAndFinish (/home/jake/work/pyrx-yarn/node_modules/ts-loader/dist/index.js:52:18)\r\n    at successLoader (/home/jake/work/pyrx-yarn/node_modules/ts-loader/dist/index.js:39:5)\r\n    at Object.loader (/home/jake/work/pyrx-yarn/node_modules/ts-loader/dist/index.js:22:5)\r\n\r\nERROR in ../../node_modules/onnxruntime-common/lib/onnx-value.ts\r\nModule build failed (from ../../node_modules/ts-loader/index.js):\r\nError: TypeScript emitted no output for /home/jake/work/pyrx-yarn/node_modules/onnxruntime-common/lib/onnx-value.ts. By default, ts-loader will not compile .ts files in node_modules.\r\nYou should not need to recompile .ts files there, but if you really want to, use the allowTsInNodeModules option.\r\nSee: https://github.com/Microsoft/TypeScript/issues/12358\r\n    at makeSourceMapAndFinish (/home/jake/work/pyrx-yarn/node_modules/ts-loader/dist/index.js:52:18)\r\n    at successLoader (/home/jake/work/pyrx-yarn/node_modules/ts-loader/dist/index.js:39:5)\r\n    at Object.loader (/home/jake/work/pyrx-yarn/node_modules/ts-loader/dist/index.js:22:5)\r\n\r\nERROR in ../../node_modules/onnxruntime-common/lib/tensor.ts\r\nModule build failed (from ../../node_modules/ts-loader/index.js):\r\nError: TypeScript emitted no output for /home/jake/work/pyrx-yarn/node_modules/onnxruntime-common/lib/tensor.ts. By default, ts-loader will not compile .ts files in node_modules.\r\nYou should not need to recompile .ts files there, but if you really want to, use the allowTsInNodeModules option.\r\nSee: https://github.com/Microsoft/TypeScript/issues/12358\r\n    at makeSourceMapAndFinish (/home/jake/work/pyrx-yarn/node_modules/ts-loader/dist/index.js:52:18)\r\n    at successLoader (/home/jake/work/pyrx-yarn/node_modules/ts-loader/dist/index.js:39:5)\r\n    at Object.loader (/home/jake/work/pyrx-yarn/node_modules/ts-loader/dist/index.js:22:5)\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/858046884/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/858047908",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7949#issuecomment-858047908",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7949",
        "id": 858047908,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg1ODA0NzkwOA==",
        "user": {
            "login": "jakebailey",
            "id": 5341706,
            "node_id": "MDQ6VXNlcjUzNDE3MDY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5341706?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jakebailey",
            "html_url": "https://github.com/jakebailey",
            "followers_url": "https://api.github.com/users/jakebailey/followers",
            "following_url": "https://api.github.com/users/jakebailey/following{/other_user}",
            "gists_url": "https://api.github.com/users/jakebailey/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jakebailey/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jakebailey/subscriptions",
            "organizations_url": "https://api.github.com/users/jakebailey/orgs",
            "repos_url": "https://api.github.com/users/jakebailey/repos",
            "events_url": "https://api.github.com/users/jakebailey/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jakebailey/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-09T19:51:53Z",
        "updated_at": "2021-06-09T19:51:53Z",
        "author_association": "MEMBER",
        "body": "Yeah, it's still distributed as it was before.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/858047908/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/898679627",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/7949#issuecomment-898679627",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/7949",
        "id": 898679627,
        "node_id": "IC_kwDOCVq1mM41kMNL",
        "user": {
            "login": "jakebailey",
            "id": 5341706,
            "node_id": "MDQ6VXNlcjUzNDE3MDY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5341706?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jakebailey",
            "html_url": "https://github.com/jakebailey",
            "followers_url": "https://api.github.com/users/jakebailey/followers",
            "following_url": "https://api.github.com/users/jakebailey/following{/other_user}",
            "gists_url": "https://api.github.com/users/jakebailey/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jakebailey/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jakebailey/subscriptions",
            "organizations_url": "https://api.github.com/users/jakebailey/orgs",
            "repos_url": "https://api.github.com/users/jakebailey/repos",
            "events_url": "https://api.github.com/users/jakebailey/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jakebailey/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-08-13T19:37:02Z",
        "updated_at": "2021-08-13T19:37:02Z",
        "author_association": "MEMBER",
        "body": "This is still a problem, even moreso in the web package where I get a pretty significant number of errors (which I'm now trying out as I'm hoping to drop needing any of the node bindings in favor of WASM).",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/898679627/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]