[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/859133463",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8024#issuecomment-859133463",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8024",
        "id": 859133463,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg1OTEzMzQ2Mw==",
        "user": {
            "login": "hariharans29",
            "id": 9969784,
            "node_id": "MDQ6VXNlcjk5Njk3ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9969784?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hariharans29",
            "html_url": "https://github.com/hariharans29",
            "followers_url": "https://api.github.com/users/hariharans29/followers",
            "following_url": "https://api.github.com/users/hariharans29/following{/other_user}",
            "gists_url": "https://api.github.com/users/hariharans29/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hariharans29/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hariharans29/subscriptions",
            "organizations_url": "https://api.github.com/users/hariharans29/orgs",
            "repos_url": "https://api.github.com/users/hariharans29/repos",
            "events_url": "https://api.github.com/users/hariharans29/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hariharans29/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-10T22:47:23Z",
        "updated_at": "2021-06-10T23:32:45Z",
        "author_association": "MEMBER",
        "body": "CC:  @RandySheriffH  - I think he added the supported Conv activation fusion on CUDA (which was added post 1.5.1).\r\n\r\nTo unblock yourself, you could disable optimizations and I think it should run albeit a bit slower given that graph optimizations have been disabled. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/859133463/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/859138963",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8024#issuecomment-859138963",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8024",
        "id": 859138963,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg1OTEzODk2Mw==",
        "user": {
            "login": "piraka9011",
            "id": 16828657,
            "node_id": "MDQ6VXNlcjE2ODI4NjU3",
            "avatar_url": "https://avatars.githubusercontent.com/u/16828657?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/piraka9011",
            "html_url": "https://github.com/piraka9011",
            "followers_url": "https://api.github.com/users/piraka9011/followers",
            "following_url": "https://api.github.com/users/piraka9011/following{/other_user}",
            "gists_url": "https://api.github.com/users/piraka9011/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/piraka9011/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/piraka9011/subscriptions",
            "organizations_url": "https://api.github.com/users/piraka9011/orgs",
            "repos_url": "https://api.github.com/users/piraka9011/repos",
            "events_url": "https://api.github.com/users/piraka9011/events{/privacy}",
            "received_events_url": "https://api.github.com/users/piraka9011/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-10T22:58:50Z",
        "updated_at": "2021-06-10T22:58:50Z",
        "author_association": "NONE",
        "body": ">To unblock yourself, you could disable optimizations\r\n\r\nTo clarify, you mean cuda optimizations? (`sess.set_providers(['CPUExecutionProvider'])`\r\nOr graph optimization? (`sess_options.graph_optimization_level = onnxruntime.GraphOptimizationLevel.ORT_DISABLE_ALL`)",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/859138963/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/859151141",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8024#issuecomment-859151141",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8024",
        "id": 859151141,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg1OTE1MTE0MQ==",
        "user": {
            "login": "piraka9011",
            "id": 16828657,
            "node_id": "MDQ6VXNlcjE2ODI4NjU3",
            "avatar_url": "https://avatars.githubusercontent.com/u/16828657?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/piraka9011",
            "html_url": "https://github.com/piraka9011",
            "followers_url": "https://api.github.com/users/piraka9011/followers",
            "following_url": "https://api.github.com/users/piraka9011/following{/other_user}",
            "gists_url": "https://api.github.com/users/piraka9011/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/piraka9011/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/piraka9011/subscriptions",
            "organizations_url": "https://api.github.com/users/piraka9011/orgs",
            "repos_url": "https://api.github.com/users/piraka9011/repos",
            "events_url": "https://api.github.com/users/piraka9011/events{/privacy}",
            "received_events_url": "https://api.github.com/users/piraka9011/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-10T23:25:22Z",
        "updated_at": "2021-06-10T23:25:40Z",
        "author_association": "NONE",
        "body": "I can confirm that this works on 1.8.0 with `CUDAExecutionProvider` only if `graph_optimization_level` is `ORT_ENABLE_BASIC` or `ORT_DISABLE_ALL`.\r\nI am currently sticking to CPU because it is faster than CUDA (Looks like CUDA isn't being used at all...)\r\nInference time for my model takes ~0.23s on `CPUExecutionProvider` vs ~1.68s `CUDAExecutionProvider`.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/859151141/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/859154329",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8024#issuecomment-859154329",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8024",
        "id": 859154329,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg1OTE1NDMyOQ==",
        "user": {
            "login": "hariharans29",
            "id": 9969784,
            "node_id": "MDQ6VXNlcjk5Njk3ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9969784?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hariharans29",
            "html_url": "https://github.com/hariharans29",
            "followers_url": "https://api.github.com/users/hariharans29/followers",
            "following_url": "https://api.github.com/users/hariharans29/following{/other_user}",
            "gists_url": "https://api.github.com/users/hariharans29/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hariharans29/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hariharans29/subscriptions",
            "organizations_url": "https://api.github.com/users/hariharans29/orgs",
            "repos_url": "https://api.github.com/users/hariharans29/repos",
            "events_url": "https://api.github.com/users/hariharans29/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hariharans29/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-10T23:34:35Z",
        "updated_at": "2021-06-10T23:34:35Z",
        "author_association": "MEMBER",
        "body": "Sorry I meant this: sess_options.graph_optimization_level = onnxruntime.GraphOptimizationLevel.ORT_DISABLE_ALL\r\n\r\nThe reason why it works on CUDA with ORT_DISABLE_ALL and ORT_ENABLE_BASIC is that this specific optimizer belongs to \"Extended\" class of optimizers and it will get triggered only if ORT_ENABLE_EXTENDED or higher is turned on. \r\n\r\nIf the model is shareable, we could investigate the cause of the failure within the optimizer (CC: @RandySheriffH ).\r\n\r\nFor the CUDA perf concern, we could do some preliminary investigation with the model. On a related note, is your model a dynamic shape model or are the input shapes fixed ? Are you performing warm-up runs prior to measuring perf ?\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/859154329/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/859657559",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8024#issuecomment-859657559",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8024",
        "id": 859657559,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg1OTY1NzU1OQ==",
        "user": {
            "login": "piraka9011",
            "id": 16828657,
            "node_id": "MDQ6VXNlcjE2ODI4NjU3",
            "avatar_url": "https://avatars.githubusercontent.com/u/16828657?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/piraka9011",
            "html_url": "https://github.com/piraka9011",
            "followers_url": "https://api.github.com/users/piraka9011/followers",
            "following_url": "https://api.github.com/users/piraka9011/following{/other_user}",
            "gists_url": "https://api.github.com/users/piraka9011/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/piraka9011/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/piraka9011/subscriptions",
            "organizations_url": "https://api.github.com/users/piraka9011/orgs",
            "repos_url": "https://api.github.com/users/piraka9011/repos",
            "events_url": "https://api.github.com/users/piraka9011/events{/privacy}",
            "received_events_url": "https://api.github.com/users/piraka9011/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-11T15:23:13Z",
        "updated_at": "2021-06-11T15:24:10Z",
        "author_association": "NONE",
        "body": "> is your model a dynamic shape model\r\n\r\nDynamic.\r\nInput shapes: `['signal_dynamic_axes_1', 64, 'signal_dynamic_axes_2']` BatchNum x Features x SequenceLength\r\nOutput shapes: `['logprobs_dynamic_axes_1', 'logprobs_dynamic_axes_2', 38]` BatchNum x SequenceLength x Labels\r\n\r\n> Are you performing warm-up runs prior to measuring perf \r\n\r\nNo warm-up runs, just a single run measured using Python's `time` library. (I'm not familiar with warm-up runs though, is that documented anywhere/common practice?)",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/859657559/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/859762368",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8024#issuecomment-859762368",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8024",
        "id": 859762368,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg1OTc2MjM2OA==",
        "user": {
            "login": "piraka9011",
            "id": 16828657,
            "node_id": "MDQ6VXNlcjE2ODI4NjU3",
            "avatar_url": "https://avatars.githubusercontent.com/u/16828657?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/piraka9011",
            "html_url": "https://github.com/piraka9011",
            "followers_url": "https://api.github.com/users/piraka9011/followers",
            "following_url": "https://api.github.com/users/piraka9011/following{/other_user}",
            "gists_url": "https://api.github.com/users/piraka9011/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/piraka9011/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/piraka9011/subscriptions",
            "organizations_url": "https://api.github.com/users/piraka9011/orgs",
            "repos_url": "https://api.github.com/users/piraka9011/repos",
            "events_url": "https://api.github.com/users/piraka9011/events{/privacy}",
            "received_events_url": "https://api.github.com/users/piraka9011/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-11T18:25:20Z",
        "updated_at": "2021-06-11T18:25:20Z",
        "author_association": "NONE",
        "body": "FWIW, I built an image using TensorRT for v.1.8.0 and the performance is even worse (~20s for inference).\r\nThe model is based off of NeMo's [Quartznet](https://github.com/NVIDIA/NeMo/blob/df05895bcf4e8335f1738252383fac7f7e0a3ea2/nemo/collections/asr/models/ctc_models.py#L40) (The primary building block is [here](https://github.com/NVIDIA/NeMo/blob/df05895bcf4e8335f1738252383fac7f7e0a3ea2/nemo/collections/asr/parts/submodules/jasper.py#L489)).\r\n\r\nYou can use [this script](https://github.com/NVIDIA/NeMo/blob/df05895bcf4e8335f1738252383fac7f7e0a3ea2/scripts/export/convasr_to_single_onnx.py) to get an onnx model from one of their `.nemo` models: ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/859762368/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/859777908",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8024#issuecomment-859777908",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8024",
        "id": 859777908,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg1OTc3NzkwOA==",
        "user": {
            "login": "hariharans29",
            "id": 9969784,
            "node_id": "MDQ6VXNlcjk5Njk3ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9969784?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hariharans29",
            "html_url": "https://github.com/hariharans29",
            "followers_url": "https://api.github.com/users/hariharans29/followers",
            "following_url": "https://api.github.com/users/hariharans29/following{/other_user}",
            "gists_url": "https://api.github.com/users/hariharans29/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hariharans29/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hariharans29/subscriptions",
            "organizations_url": "https://api.github.com/users/hariharans29/orgs",
            "repos_url": "https://api.github.com/users/hariharans29/repos",
            "events_url": "https://api.github.com/users/hariharans29/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hariharans29/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-11T18:55:59Z",
        "updated_at": "2021-06-11T18:55:59Z",
        "author_association": "MEMBER",
        "body": "`I'm not familiar with warm-up runs though, is that documented anywhere/common practice?`\r\n\r\nUsually it is common practice to run a few warm-up runs (atleast one run) before measuring perf. The very first run usually caches some information for subsequent runs. Please at-least do one run before you measure perf. It may improve the perf numbers.\r\n\r\nDynamic shape models do suffer from a further limitation: the first time it sees a new shape, it needs to re-compute some information in certain nodes and this may lead to increased latency. \r\n\r\nIt may be worth noting that In this case, the perf drop may also be due to the fact that we are disabling graph optimizations (to circumvent the fused conv issue you hit). \r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/859777908/reactions",
            "total_count": 2,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 1
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/859780997",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8024#issuecomment-859780997",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8024",
        "id": 859780997,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg1OTc4MDk5Nw==",
        "user": {
            "login": "piraka9011",
            "id": 16828657,
            "node_id": "MDQ6VXNlcjE2ODI4NjU3",
            "avatar_url": "https://avatars.githubusercontent.com/u/16828657?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/piraka9011",
            "html_url": "https://github.com/piraka9011",
            "followers_url": "https://api.github.com/users/piraka9011/followers",
            "following_url": "https://api.github.com/users/piraka9011/following{/other_user}",
            "gists_url": "https://api.github.com/users/piraka9011/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/piraka9011/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/piraka9011/subscriptions",
            "organizations_url": "https://api.github.com/users/piraka9011/orgs",
            "repos_url": "https://api.github.com/users/piraka9011/repos",
            "events_url": "https://api.github.com/users/piraka9011/events{/privacy}",
            "received_events_url": "https://api.github.com/users/piraka9011/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-11T19:01:51Z",
        "updated_at": "2021-06-11T19:03:21Z",
        "author_association": "NONE",
        "body": "I actually tried TensorRT with graph optimizations enabled (for ORT v1.5.1) and it was still pretty slow.\r\nSince I already have this all setup, I guess it makes sense to just post the Onnx profiling results for each run so others can see the results.\r\n\r\n> Usually it is common practice to run a few warm-up runs (atleast one run) before measuring perf. The very first run usually caches some information for subsequent runs. Please at-least do one run before you measure perf. It may improve the perf numbers.\r\n\r\nI think this kind of information is helpful to put in the official docs (maybe under tuning performance?) to benefit others.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/859780997/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1102328751",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8024#issuecomment-1102328751",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8024",
        "id": 1102328751,
        "node_id": "IC_kwDOCVq1mM5BtDOv",
        "user": {
            "login": "stale[bot]",
            "id": 26384082,
            "node_id": "MDM6Qm90MjYzODQwODI=",
            "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stale%5Bbot%5D",
            "html_url": "https://github.com/apps/stale",
            "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
            "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
            "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
            "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
            "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
            "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
            "type": "Bot",
            "site_admin": false
        },
        "created_at": "2022-04-19T08:54:24Z",
        "updated_at": "2022-04-19T08:54:24Z",
        "author_association": "NONE",
        "body": "This issue has been automatically marked as stale due to inactivity and will be closed in 7 days if no further activity occurs. If further support is needed, please provide an update and/or more details.\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1102328751/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]