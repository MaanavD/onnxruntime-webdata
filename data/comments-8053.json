[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/861678785",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8053#issuecomment-861678785",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8053",
        "id": 861678785,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg2MTY3ODc4NQ==",
        "user": {
            "login": "yuslepukhin",
            "id": 11303988,
            "node_id": "MDQ6VXNlcjExMzAzOTg4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11303988?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yuslepukhin",
            "html_url": "https://github.com/yuslepukhin",
            "followers_url": "https://api.github.com/users/yuslepukhin/followers",
            "following_url": "https://api.github.com/users/yuslepukhin/following{/other_user}",
            "gists_url": "https://api.github.com/users/yuslepukhin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yuslepukhin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yuslepukhin/subscriptions",
            "organizations_url": "https://api.github.com/users/yuslepukhin/orgs",
            "repos_url": "https://api.github.com/users/yuslepukhin/repos",
            "events_url": "https://api.github.com/users/yuslepukhin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yuslepukhin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-15T17:11:51Z",
        "updated_at": "2021-06-15T17:14:13Z",
        "author_association": "MEMBER",
        "body": "All C++ objects in ORT API exists to wrap the underlying C handles so they are automatically destroyed when C++ wrappers go out of scope. By calling release() method you cause them to relinquish the responsibility to do so and create memory leaks. This is similar to std::unique_ptr interface where reset() != release()",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/861678785/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/863210959",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8053#issuecomment-863210959",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8053",
        "id": 863210959,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg2MzIxMDk1OQ==",
        "user": {
            "login": "etuffleb",
            "id": 36663651,
            "node_id": "MDQ6VXNlcjM2NjYzNjUx",
            "avatar_url": "https://avatars.githubusercontent.com/u/36663651?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/etuffleb",
            "html_url": "https://github.com/etuffleb",
            "followers_url": "https://api.github.com/users/etuffleb/followers",
            "following_url": "https://api.github.com/users/etuffleb/following{/other_user}",
            "gists_url": "https://api.github.com/users/etuffleb/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/etuffleb/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/etuffleb/subscriptions",
            "organizations_url": "https://api.github.com/users/etuffleb/orgs",
            "repos_url": "https://api.github.com/users/etuffleb/repos",
            "events_url": "https://api.github.com/users/etuffleb/events{/privacy}",
            "received_events_url": "https://api.github.com/users/etuffleb/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-17T12:49:44Z",
        "updated_at": "2021-06-17T12:49:44Z",
        "author_association": "NONE",
        "body": "Thanks for the answer. This only worked for the CPU. If i choose CUDA Execution Provider, it still leaks\r\n![image](https://user-images.githubusercontent.com/36663651/122398950-0cf54c80-cf83-11eb-8678-dca1e5da9945.png)\r\nI get such an error:\r\n\"Non-zero status code returned while running FusedConv node. Name:'Convolution4637_ReLU4641' Status Message: bad allocation\"",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/863210959/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/863617862",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8053#issuecomment-863617862",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8053",
        "id": 863617862,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg2MzYxNzg2Mg==",
        "user": {
            "login": "yuslepukhin",
            "id": 11303988,
            "node_id": "MDQ6VXNlcjExMzAzOTg4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11303988?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yuslepukhin",
            "html_url": "https://github.com/yuslepukhin",
            "followers_url": "https://api.github.com/users/yuslepukhin/followers",
            "following_url": "https://api.github.com/users/yuslepukhin/following{/other_user}",
            "gists_url": "https://api.github.com/users/yuslepukhin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yuslepukhin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yuslepukhin/subscriptions",
            "organizations_url": "https://api.github.com/users/yuslepukhin/orgs",
            "repos_url": "https://api.github.com/users/yuslepukhin/repos",
            "events_url": "https://api.github.com/users/yuslepukhin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yuslepukhin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-17T23:09:46Z",
        "updated_at": "2021-06-17T23:09:46Z",
        "author_association": "MEMBER",
        "body": "I have tested the tip of the master and I have not found the leak. I was able to successfully run the model with no errors.\r\n\r\nI am running with Cuda 11.2. However, my understanding that the leak is in CPU memory and the presence of cuda should not affect things much. I am not aware of any recent leak fixes.\r\n\r\nI have not tested 1.8 precisely, but it should not be too far away. See attached code and let me know how you would like to proceed.\r\n[LeakTest_gh_8053.pdf](https://github.com/microsoft/onnxruntime/files/6673627/LeakTest_gh_8053.pdf)\r\n\r\n\r\n![image](https://user-images.githubusercontent.com/11303988/122482082-c0ab0c00-cf84-11eb-804f-6bc2bdedc45c.png)\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/863617862/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/867557124",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8053#issuecomment-867557124",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8053",
        "id": 867557124,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg2NzU1NzEyNA==",
        "user": {
            "login": "etuffleb",
            "id": 36663651,
            "node_id": "MDQ6VXNlcjM2NjYzNjUx",
            "avatar_url": "https://avatars.githubusercontent.com/u/36663651?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/etuffleb",
            "html_url": "https://github.com/etuffleb",
            "followers_url": "https://api.github.com/users/etuffleb/followers",
            "following_url": "https://api.github.com/users/etuffleb/following{/other_user}",
            "gists_url": "https://api.github.com/users/etuffleb/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/etuffleb/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/etuffleb/subscriptions",
            "organizations_url": "https://api.github.com/users/etuffleb/orgs",
            "repos_url": "https://api.github.com/users/etuffleb/repos",
            "events_url": "https://api.github.com/users/etuffleb/events{/privacy}",
            "received_events_url": "https://api.github.com/users/etuffleb/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-24T11:23:11Z",
        "updated_at": "2021-06-24T11:23:11Z",
        "author_association": "NONE",
        "body": "I've installed release versions of onnxruntime.dll, onnxruntime_providers_cuda.dll and onnxruntime_providers_shared.dll from source\r\nIncluded the onnxruntime.lib library and header files\r\nBut the function Ort::GetAvailableProviders() only returns the CPUExecutionProvider\r\n\r\n![image](https://user-images.githubusercontent.com/36663651/123254719-a9759c80-d4f7-11eb-9e56-982b6407372a.png)\r\n\r\n![image](https://user-images.githubusercontent.com/36663651/123254133-f442e480-d4f6-11eb-868d-11dbdea956bc.png)\r\n![image](https://user-images.githubusercontent.com/36663651/123253993-c493dc80-d4f6-11eb-9360-0a9c0439df09.png)\r\n![image](https://user-images.githubusercontent.com/36663651/123254069-df665100-d4f6-11eb-93be-5f490147d92e.png)\r\n![image](https://user-images.githubusercontent.com/36663651/123254283-248a8300-d4f7-11eb-83a6-eb9146976c8d.png)\r\n\r\nP.S.: The size of installed packages from source is different from nuget variants 🤷‍♀️\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/867557124/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/868720197",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8053#issuecomment-868720197",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8053",
        "id": 868720197,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg2ODcyMDE5Nw==",
        "user": {
            "login": "yuslepukhin",
            "id": 11303988,
            "node_id": "MDQ6VXNlcjExMzAzOTg4",
            "avatar_url": "https://avatars.githubusercontent.com/u/11303988?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yuslepukhin",
            "html_url": "https://github.com/yuslepukhin",
            "followers_url": "https://api.github.com/users/yuslepukhin/followers",
            "following_url": "https://api.github.com/users/yuslepukhin/following{/other_user}",
            "gists_url": "https://api.github.com/users/yuslepukhin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yuslepukhin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yuslepukhin/subscriptions",
            "organizations_url": "https://api.github.com/users/yuslepukhin/orgs",
            "repos_url": "https://api.github.com/users/yuslepukhin/repos",
            "events_url": "https://api.github.com/users/yuslepukhin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yuslepukhin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-25T17:26:03Z",
        "updated_at": "2021-06-25T17:27:11Z",
        "author_association": "MEMBER",
        "body": "> I've installed release versions of onnxruntime.dll, onnxruntime_providers_cuda.dll and onnxruntime_providers_shared.dll from source\r\n> Included the onnxruntime.lib library and header files\r\n> But the function Ort::GetAvailableProviders() only returns the CPUExecutionProvider\r\n\r\nThe recent versions made providers dynamically loadable. Thus, you need to add CUDA Provider in the SessionOptions and try again.\r\n\r\nCc: @RyanUnderhill ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/868720197/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]