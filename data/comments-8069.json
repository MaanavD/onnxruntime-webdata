[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/862108034",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8069#issuecomment-862108034",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8069",
        "id": 862108034,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg2MjEwODAzNA==",
        "user": {
            "login": "znsoftm",
            "id": 15354249,
            "node_id": "MDQ6VXNlcjE1MzU0MjQ5",
            "avatar_url": "https://avatars.githubusercontent.com/u/15354249?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/znsoftm",
            "html_url": "https://github.com/znsoftm",
            "followers_url": "https://api.github.com/users/znsoftm/followers",
            "following_url": "https://api.github.com/users/znsoftm/following{/other_user}",
            "gists_url": "https://api.github.com/users/znsoftm/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/znsoftm/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/znsoftm/subscriptions",
            "organizations_url": "https://api.github.com/users/znsoftm/orgs",
            "repos_url": "https://api.github.com/users/znsoftm/repos",
            "events_url": "https://api.github.com/users/znsoftm/events{/privacy}",
            "received_events_url": "https://api.github.com/users/znsoftm/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-16T07:06:42Z",
        "updated_at": "2021-06-16T07:30:23Z",
        "author_association": "NONE",
        "body": "I get the reason:\r\n\r\n\r\n            Ort::RunOptions run_option;\r\n            //run_option.AddConfigEntry(kOrtRunOptionsConfigEnableMemoryArenaShrinkage, \"cpu\");\r\n            auto outputTensor = m_session->Run(run_option, &szInputName, &inputTensor, 1, &szOutputName, 1);\r\nwhen I uncomment the above line \"run_option.AddConfigEntry(kOrtRunOptionsConfigEnableMemoryArenaShrinkage, \"cpu\");\", it will throw out an exception with x86 app. But if I comment it, it works fine.  \r\n\r\nBTW: with x64 APP, everything is fine.\r\n\r\nMy goal is shrinking memory occupation after an inference job is done. \r\nSo how should I do ?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/862108034/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/862612254",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8069#issuecomment-862612254",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8069",
        "id": 862612254,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg2MjYxMjI1NA==",
        "user": {
            "login": "hariharans29",
            "id": 9969784,
            "node_id": "MDQ6VXNlcjk5Njk3ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/9969784?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hariharans29",
            "html_url": "https://github.com/hariharans29",
            "followers_url": "https://api.github.com/users/hariharans29/followers",
            "following_url": "https://api.github.com/users/hariharans29/following{/other_user}",
            "gists_url": "https://api.github.com/users/hariharans29/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hariharans29/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hariharans29/subscriptions",
            "organizations_url": "https://api.github.com/users/hariharans29/orgs",
            "repos_url": "https://api.github.com/users/hariharans29/repos",
            "events_url": "https://api.github.com/users/hariharans29/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hariharans29/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-16T18:27:26Z",
        "updated_at": "2021-06-16T18:28:16Z",
        "author_association": "MEMBER",
        "body": "The CPU allocator maintains a memory arena (pool) only on x64. See how it is turned off for x86 (I will document that the feature is not to be used on x86 for this reason) - https://github.com/microsoft/onnxruntime/blob/1d8edd0b5bcf3c3172cc10ae60662073e8f8f748/onnxruntime/core/providers/cpu/cpu_execution_provider.h#L40. \r\n\r\nWhen you try to shrink the arena on x64 it should work fine and on x86 there is no arena to shrink - if you check the error message, you will see something similar (something about the CPU allocator being non-arena based and hence it cannot be shrunk).\r\n\r\nSince on x86, there is no arena at all, there is no point in trying to shrink it (i.e.) you can skip it as essentially it is a no-op anyway.\r\n\r\nBy the way, did you use the sample documented here-https://www.onnxruntime.ai/docs/reference/api/c-api.html ?\r\n\r\nThe correct usage pattern is providing combinations like this: \"device_type:device_id\", in your use-case, the correct usage pattern would have been \"cpu:0\". In your case, it works with just \"cpu\" as it uses the default device id of 0. But it is preferrable if you use the correct pattern.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/862612254/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/862872243",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8069#issuecomment-862872243",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8069",
        "id": 862872243,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg2Mjg3MjI0Mw==",
        "user": {
            "login": "znsoftm",
            "id": 15354249,
            "node_id": "MDQ6VXNlcjE1MzU0MjQ5",
            "avatar_url": "https://avatars.githubusercontent.com/u/15354249?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/znsoftm",
            "html_url": "https://github.com/znsoftm",
            "followers_url": "https://api.github.com/users/znsoftm/followers",
            "following_url": "https://api.github.com/users/znsoftm/following{/other_user}",
            "gists_url": "https://api.github.com/users/znsoftm/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/znsoftm/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/znsoftm/subscriptions",
            "organizations_url": "https://api.github.com/users/znsoftm/orgs",
            "repos_url": "https://api.github.com/users/znsoftm/repos",
            "events_url": "https://api.github.com/users/znsoftm/events{/privacy}",
            "received_events_url": "https://api.github.com/users/znsoftm/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-06-17T02:42:02Z",
        "updated_at": "2021-06-17T02:42:02Z",
        "author_association": "NONE",
        "body": "I get it from an example code snippet, didn't rember where it  is from LOL.\r\nThanks for your answer. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/862872243/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]