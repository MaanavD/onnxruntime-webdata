[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/483530646",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/822#issuecomment-483530646",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/822",
        "id": 483530646,
        "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MzUzMDY0Ng==",
        "user": {
            "login": "androidsercan",
            "id": 6707092,
            "node_id": "MDQ6VXNlcjY3MDcwOTI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6707092?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/androidsercan",
            "html_url": "https://github.com/androidsercan",
            "followers_url": "https://api.github.com/users/androidsercan/followers",
            "following_url": "https://api.github.com/users/androidsercan/following{/other_user}",
            "gists_url": "https://api.github.com/users/androidsercan/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/androidsercan/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/androidsercan/subscriptions",
            "organizations_url": "https://api.github.com/users/androidsercan/orgs",
            "repos_url": "https://api.github.com/users/androidsercan/repos",
            "events_url": "https://api.github.com/users/androidsercan/events{/privacy}",
            "received_events_url": "https://api.github.com/users/androidsercan/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-04-16T06:37:40Z",
        "updated_at": "2019-04-16T06:37:40Z",
        "author_association": "NONE",
        "body": "@dashesy  I applied your suggestion by writing center_slice_helper function. However, at this time, it gives this exception:\r\n\r\n```\r\ntorch.jit.TracingCheckError: Tracing failed sanity checks!\r\nEncountered an exception while running the Python function with test inputs.\r\nException:\r\n\tcenter_slice_helper() expected value of type Tensor for argument 'diff_y' in position 1, but instead got value of type int.\r\n\tValue: 0\r\n\tDeclaration: center_slice_helper(Tensor layer, Tensor diff_y, Tensor diff_x, Tensor h_end, Tensor w_end) -> Tensor\r\n```\r\nI debugged the code and observed that x parameter of forward function has this type:\r\n\r\n![x_parameter](https://user-images.githubusercontent.com/6707092/56187389-14c7a800-602b-11e9-850e-39b7df395218.PNG)\r\n\r\nHow to handle this?\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/483530646/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/483768278",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/822#issuecomment-483768278",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/822",
        "id": 483768278,
        "node_id": "MDEyOklzc3VlQ29tbWVudDQ4Mzc2ODI3OA==",
        "user": {
            "login": "dashesy",
            "id": 873905,
            "node_id": "MDQ6VXNlcjg3MzkwNQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/873905?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dashesy",
            "html_url": "https://github.com/dashesy",
            "followers_url": "https://api.github.com/users/dashesy/followers",
            "following_url": "https://api.github.com/users/dashesy/following{/other_user}",
            "gists_url": "https://api.github.com/users/dashesy/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/dashesy/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dashesy/subscriptions",
            "organizations_url": "https://api.github.com/users/dashesy/orgs",
            "repos_url": "https://api.github.com/users/dashesy/repos",
            "events_url": "https://api.github.com/users/dashesy/events{/privacy}",
            "received_events_url": "https://api.github.com/users/dashesy/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-04-16T17:26:00Z",
        "updated_at": "2019-04-16T17:40:25Z",
        "author_association": "NONE",
        "body": "@androidsercan I run this (python 2 just in case) only along with `torch.export`, that somehow assumes `torch.Size` is a tensor, and works.\r\nI cannot run it with normal forward (remove the `@torch.jit.script` annotation for it). This is actually another issue I wish is fixed, so we can use the same model for prediction in PyTorch that is exported. \r\n\r\nBTW, the effect of using `torch.jit.script` is that the exporter will use `DynamicSlice` instead of `Slice`\r\n![DynamicSlice](https://user-images.githubusercontent.com/873905/56231717-0631be80-6034-11e9-9337-df1853d0257c.JPG)\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/483768278/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/483954024",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/822#issuecomment-483954024",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/822",
        "id": 483954024,
        "node_id": "MDEyOklzc3VlQ29tbWVudDQ4Mzk1NDAyNA==",
        "user": {
            "login": "androidsercan",
            "id": 6707092,
            "node_id": "MDQ6VXNlcjY3MDcwOTI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6707092?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/androidsercan",
            "html_url": "https://github.com/androidsercan",
            "followers_url": "https://api.github.com/users/androidsercan/followers",
            "following_url": "https://api.github.com/users/androidsercan/following{/other_user}",
            "gists_url": "https://api.github.com/users/androidsercan/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/androidsercan/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/androidsercan/subscriptions",
            "organizations_url": "https://api.github.com/users/androidsercan/orgs",
            "repos_url": "https://api.github.com/users/androidsercan/repos",
            "events_url": "https://api.github.com/users/androidsercan/events{/privacy}",
            "received_events_url": "https://api.github.com/users/androidsercan/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-04-17T06:26:05Z",
        "updated_at": "2019-04-17T06:26:05Z",
        "author_association": "NONE",
        "body": "I removed the @torch.jit.script annotation. My helper function is\r\n\r\n```\r\ndef center_slice_helper(layer, diff_y, diff_x, h_end, w_end):\r\n    return layer[:, :, diff_y:h_end, diff_x:w_end]\r\n```\r\n\r\nThen, I obtained trace file and got this warning :\r\n\r\n![Warning2](https://user-images.githubusercontent.com/6707092/56265438-3c357800-60f2-11e9-8f79-adea82ef6f65.PNG)\r\n\r\nI tried this trace file in C++. I got different results compared to python outputs. \r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/483954024/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/483993487",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/822#issuecomment-483993487",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/822",
        "id": 483993487,
        "node_id": "MDEyOklzc3VlQ29tbWVudDQ4Mzk5MzQ4Nw==",
        "user": {
            "login": "androidsercan",
            "id": 6707092,
            "node_id": "MDQ6VXNlcjY3MDcwOTI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6707092?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/androidsercan",
            "html_url": "https://github.com/androidsercan",
            "followers_url": "https://api.github.com/users/androidsercan/followers",
            "following_url": "https://api.github.com/users/androidsercan/following{/other_user}",
            "gists_url": "https://api.github.com/users/androidsercan/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/androidsercan/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/androidsercan/subscriptions",
            "organizations_url": "https://api.github.com/users/androidsercan/orgs",
            "repos_url": "https://api.github.com/users/androidsercan/repos",
            "events_url": "https://api.github.com/users/androidsercan/events{/privacy}",
            "received_events_url": "https://api.github.com/users/androidsercan/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-04-17T08:41:47Z",
        "updated_at": "2019-04-17T08:44:05Z",
        "author_association": "NONE",
        "body": "@dashesy I have read the related part in documentation: [https://pytorch.org/docs/stable/jit.html#mixing-tracing-and-scripting](https://pytorch.org/docs/stable/jit.html#mixing-tracing-and-scripting)\r\n\r\nI understood that I should use MyPy-style type annotation. What is your opinion?\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/483993487/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/484189298",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/822#issuecomment-484189298",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/822",
        "id": 484189298,
        "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NDE4OTI5OA==",
        "user": {
            "login": "dashesy",
            "id": 873905,
            "node_id": "MDQ6VXNlcjg3MzkwNQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/873905?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dashesy",
            "html_url": "https://github.com/dashesy",
            "followers_url": "https://api.github.com/users/dashesy/followers",
            "following_url": "https://api.github.com/users/dashesy/following{/other_user}",
            "gists_url": "https://api.github.com/users/dashesy/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/dashesy/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dashesy/subscriptions",
            "organizations_url": "https://api.github.com/users/dashesy/orgs",
            "repos_url": "https://api.github.com/users/dashesy/repos",
            "events_url": "https://api.github.com/users/dashesy/events{/privacy}",
            "received_events_url": "https://api.github.com/users/dashesy/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-04-17T17:36:30Z",
        "updated_at": "2019-04-17T17:38:13Z",
        "author_association": "NONE",
        "body": "Removing the annotation `forward` works but you get that warning (which is actually valid).\r\n\r\nThe MyPy-style annotation may be the solution if perhaps we can declare `Union[Tensor, int]` . \r\nWhen tracing `x.size()` (or `x.shape` or `x.shape[1])` is a `Tensor` but when forwarding `x.size()` (or `x.shape`) is `torch.Size`  and `x.shape[1]` is `int`. That is the actual issue\r\n\r\nMaybe something like this (not tried yet)\r\n\r\n```python\r\n@torch.jit.script\r\ndef center_slice_helper(x, h_offset, w_offset, h_end, w_end):\r\n    # type: (Tensor, Union[Tensor, int], Union[Tensor, int], Union[Tensor, int], Union[Tensor, int]) -> Tensor\r\n    return x[:, :, h_offset:h_end, w_offset:w_end]\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/484189298/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/534540151",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/822#issuecomment-534540151",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/822",
        "id": 534540151,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUzNDU0MDE1MQ==",
        "user": {
            "login": "beizhengren",
            "id": 22186249,
            "node_id": "MDQ6VXNlcjIyMTg2MjQ5",
            "avatar_url": "https://avatars.githubusercontent.com/u/22186249?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/beizhengren",
            "html_url": "https://github.com/beizhengren",
            "followers_url": "https://api.github.com/users/beizhengren/followers",
            "following_url": "https://api.github.com/users/beizhengren/following{/other_user}",
            "gists_url": "https://api.github.com/users/beizhengren/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/beizhengren/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/beizhengren/subscriptions",
            "organizations_url": "https://api.github.com/users/beizhengren/orgs",
            "repos_url": "https://api.github.com/users/beizhengren/repos",
            "events_url": "https://api.github.com/users/beizhengren/events{/privacy}",
            "received_events_url": "https://api.github.com/users/beizhengren/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-09-24T12:42:27Z",
        "updated_at": "2019-09-24T12:42:27Z",
        "author_association": "NONE",
        "body": "> @androidsercan I run this (python 2 just in case) only along with `torch.export`, that somehow assumes `torch.Size` is a tensor, and works.\r\n> I cannot run it with normal forward (remove the `@torch.jit.script` annotation for it). This is actually another issue I wish is fixed, so we can use the same model for prediction in PyTorch that is exported.\r\n> \r\n> BTW, the effect of using `torch.jit.script` is that the exporter will use `DynamicSlice` instead of `Slice`\r\n> ![DynamicSlice](https://user-images.githubusercontent.com/873905/56231717-0631be80-6034-11e9-9337-df1853d0257c.JPG)\r\n\r\nHello, how can you generate the graph? Thanks\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/534540151/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/534695551",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/822#issuecomment-534695551",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/822",
        "id": 534695551,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUzNDY5NTU1MQ==",
        "user": {
            "login": "dashesy",
            "id": 873905,
            "node_id": "MDQ6VXNlcjg3MzkwNQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/873905?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dashesy",
            "html_url": "https://github.com/dashesy",
            "followers_url": "https://api.github.com/users/dashesy/followers",
            "following_url": "https://api.github.com/users/dashesy/following{/other_user}",
            "gists_url": "https://api.github.com/users/dashesy/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/dashesy/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dashesy/subscriptions",
            "organizations_url": "https://api.github.com/users/dashesy/orgs",
            "repos_url": "https://api.github.com/users/dashesy/repos",
            "events_url": "https://api.github.com/users/dashesy/events{/privacy}",
            "received_events_url": "https://api.github.com/users/dashesy/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-09-24T18:45:13Z",
        "updated_at": "2019-09-24T18:45:13Z",
        "author_association": "NONE",
        "body": "@beizhengren use [netron](https://github.com/lutzroeder/netron)",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/534695551/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]