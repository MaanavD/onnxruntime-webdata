[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/881094815",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8328#issuecomment-881094815",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8328",
        "id": 881094815,
        "node_id": "IC_kwDOCVq1mM40hHCf",
        "user": {
            "login": "guoyu-wang",
            "id": 62914304,
            "node_id": "MDQ6VXNlcjYyOTE0MzA0",
            "avatar_url": "https://avatars.githubusercontent.com/u/62914304?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/guoyu-wang",
            "html_url": "https://github.com/guoyu-wang",
            "followers_url": "https://api.github.com/users/guoyu-wang/followers",
            "following_url": "https://api.github.com/users/guoyu-wang/following{/other_user}",
            "gists_url": "https://api.github.com/users/guoyu-wang/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/guoyu-wang/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/guoyu-wang/subscriptions",
            "organizations_url": "https://api.github.com/users/guoyu-wang/orgs",
            "repos_url": "https://api.github.com/users/guoyu-wang/repos",
            "events_url": "https://api.github.com/users/guoyu-wang/events{/privacy}",
            "received_events_url": "https://api.github.com/users/guoyu-wang/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-07-16T00:36:19Z",
        "updated_at": "2021-07-16T00:37:16Z",
        "author_association": "CONTRIBUTOR",
        "body": "We are actively looking into this issue. \r\n\r\n@slevental, to better understand your issue, would you please give us a bit more context? For example, the ~60Mb memory \r\nlimitation for your App, is this an Apple policy? Does the App gets killed when the peak working set exceeds the limitation?\r\n\r\nAlso if it is possible, could you share the model, such that we can measure memory consumption based on your real world scenario.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/881094815/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/885642023",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8328#issuecomment-885642023",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8328",
        "id": 885642023,
        "node_id": "IC_kwDOCVq1mM40ydMn",
        "user": {
            "login": "slevental",
            "id": 1327739,
            "node_id": "MDQ6VXNlcjEzMjc3Mzk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1327739?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/slevental",
            "html_url": "https://github.com/slevental",
            "followers_url": "https://api.github.com/users/slevental/followers",
            "following_url": "https://api.github.com/users/slevental/following{/other_user}",
            "gists_url": "https://api.github.com/users/slevental/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/slevental/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/slevental/subscriptions",
            "organizations_url": "https://api.github.com/users/slevental/orgs",
            "repos_url": "https://api.github.com/users/slevental/repos",
            "events_url": "https://api.github.com/users/slevental/events{/privacy}",
            "received_events_url": "https://api.github.com/users/slevental/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-07-23T13:32:46Z",
        "updated_at": "2021-07-23T13:32:46Z",
        "author_association": "NONE",
        "body": "@gwang-msft hey, thanks for getting back. \r\n\r\nThis is an Apple limitation for extensions: when app uses more memory than 60Mb - it's getting killed by OS. This includes everything graphics/ui and internal data structures; One of the solutions that were possible is to mmap model (supported by TensorflowLite); I think it's something that would be useful for onnxruntime to have to reduce memory consumption; we tried to mmap the model and use CreateSessionFromArray as it can take an address and load model from there, but in the code, we found that onnxruntime copies this memory into the RES memory of the process - this defeats the purpose. \r\n\r\nUnfortunately, we cannot share the model, but it is just the semantics of the API. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/885642023/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/885646340",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8328#issuecomment-885646340",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8328",
        "id": 885646340,
        "node_id": "IC_kwDOCVq1mM40yeQE",
        "user": {
            "login": "slevental",
            "id": 1327739,
            "node_id": "MDQ6VXNlcjEzMjc3Mzk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1327739?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/slevental",
            "html_url": "https://github.com/slevental",
            "followers_url": "https://api.github.com/users/slevental/followers",
            "following_url": "https://api.github.com/users/slevental/following{/other_user}",
            "gists_url": "https://api.github.com/users/slevental/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/slevental/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/slevental/subscriptions",
            "organizations_url": "https://api.github.com/users/slevental/orgs",
            "repos_url": "https://api.github.com/users/slevental/repos",
            "events_url": "https://api.github.com/users/slevental/events{/privacy}",
            "received_events_url": "https://api.github.com/users/slevental/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-07-23T13:39:53Z",
        "updated_at": "2021-07-23T13:39:53Z",
        "author_association": "NONE",
        "body": "here is the code that does that:\r\nhttps://github.com/microsoft/onnxruntime/blob/3360024a0b2a55a9093ef477b097e4bbaa612cb5/onnxruntime/core/session/inference_session.cc#L1006",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/885646340/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/885648326",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8328#issuecomment-885648326",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8328",
        "id": 885648326,
        "node_id": "IC_kwDOCVq1mM40yevG",
        "user": {
            "login": "slevental",
            "id": 1327739,
            "node_id": "MDQ6VXNlcjEzMjc3Mzk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1327739?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/slevental",
            "html_url": "https://github.com/slevental",
            "followers_url": "https://api.github.com/users/slevental/followers",
            "following_url": "https://api.github.com/users/slevental/following{/other_user}",
            "gists_url": "https://api.github.com/users/slevental/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/slevental/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/slevental/subscriptions",
            "organizations_url": "https://api.github.com/users/slevental/orgs",
            "repos_url": "https://api.github.com/users/slevental/repos",
            "events_url": "https://api.github.com/users/slevental/events{/privacy}",
            "received_events_url": "https://api.github.com/users/slevental/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-07-23T13:43:05Z",
        "updated_at": "2021-07-23T13:43:05Z",
        "author_association": "NONE",
        "body": "I think if onnxruntime might provide mmap usage of the models (with ORT is based on flatbuffers this should be straightforward) that also would be a possible solution",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/885648326/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/887648639",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/8328#issuecomment-887648639",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/8328",
        "id": 887648639,
        "node_id": "IC_kwDOCVq1mM406HF_",
        "user": {
            "login": "guoyu-wang",
            "id": 62914304,
            "node_id": "MDQ6VXNlcjYyOTE0MzA0",
            "avatar_url": "https://avatars.githubusercontent.com/u/62914304?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/guoyu-wang",
            "html_url": "https://github.com/guoyu-wang",
            "followers_url": "https://api.github.com/users/guoyu-wang/followers",
            "following_url": "https://api.github.com/users/guoyu-wang/following{/other_user}",
            "gists_url": "https://api.github.com/users/guoyu-wang/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/guoyu-wang/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/guoyu-wang/subscriptions",
            "organizations_url": "https://api.github.com/users/guoyu-wang/orgs",
            "repos_url": "https://api.github.com/users/guoyu-wang/repos",
            "events_url": "https://api.github.com/users/guoyu-wang/events{/privacy}",
            "received_events_url": "https://api.github.com/users/guoyu-wang/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-07-27T16:17:01Z",
        "updated_at": "2021-07-27T16:28:44Z",
        "author_association": "CONTRIBUTOR",
        "body": "With the latest master branch, you may specify the session config option by calling this API \r\nhttps://github.com/microsoft/onnxruntime/blob/4c939e1cb7b24fab71602e0cd63fcf62bbcb5b92/include/onnxruntime/core/session/onnxruntime_c_api.h#L1021-L1022\r\n\r\nWith this session config key \r\nhttps://github.com/microsoft/onnxruntime/blob/4c939e1cb7b24fab71602e0cd63fcf62bbcb5b92/include/onnxruntime/core/session/onnxruntime_session_options_config_keys.h#L70 and value \"1\" to use the input buffer directly and avoid copy,\r\n\r\nYou will have to ensure the validity of the input buffer throughout the lifetime of the inference session.\r\n \r\nAlso for the model, could you share some stats of the model if the model itself cannot be shared, such as the rough size of the model and the initializer tensors, does the model contains nodes such as ConstantOfShape?, ...",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/887648639/reactions",
            "total_count": 2,
            "+1": 2,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]