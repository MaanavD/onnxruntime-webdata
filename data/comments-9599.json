[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/954441109",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9599#issuecomment-954441109",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9599",
        "id": 954441109,
        "node_id": "IC_kwDOCVq1mM44452V",
        "user": {
            "login": "yufenglee",
            "id": 30486710,
            "node_id": "MDQ6VXNlcjMwNDg2NzEw",
            "avatar_url": "https://avatars.githubusercontent.com/u/30486710?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yufenglee",
            "html_url": "https://github.com/yufenglee",
            "followers_url": "https://api.github.com/users/yufenglee/followers",
            "following_url": "https://api.github.com/users/yufenglee/following{/other_user}",
            "gists_url": "https://api.github.com/users/yufenglee/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yufenglee/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yufenglee/subscriptions",
            "organizations_url": "https://api.github.com/users/yufenglee/orgs",
            "repos_url": "https://api.github.com/users/yufenglee/repos",
            "events_url": "https://api.github.com/users/yufenglee/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yufenglee/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-10-29T05:28:17Z",
        "updated_at": "2021-10-29T05:28:42Z",
        "author_association": "MEMBER",
        "body": "Hi @jobergum, made some tuning like below and can get a relatively close score for the example. Will send a PR to provide an option to disable the quantization of MatMul without constant weight.\r\n\r\n```\r\nquantize_dynamic(\"msmarco_multilingual.onnx\",\r\n                 \"msmarco_multilingual_int8_is.onnx\",\r\n                 weight_type=QuantType.QUInt8,\r\n                 extra_options={'WeightSymmetric':False},\r\n                 op_types_to_quantize=['MatMul'],\r\n                 nodes_to_exclude=['MatMul_101', 'MatMul_195', 'MatMul_289', 'MatMul_383', 'MatMul_477', 'MatMul_571',\r\n                                   'MatMul_96', 'MatMul_190', 'MatMul_284', 'MatMul_378', 'MatMul_472', 'MatMul_566']) \r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/954441109/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/954599520",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9599#issuecomment-954599520",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9599",
        "id": 954599520,
        "node_id": "IC_kwDOCVq1mM445ghg",
        "user": {
            "login": "jobergum",
            "id": 20928528,
            "node_id": "MDQ6VXNlcjIwOTI4NTI4",
            "avatar_url": "https://avatars.githubusercontent.com/u/20928528?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jobergum",
            "html_url": "https://github.com/jobergum",
            "followers_url": "https://api.github.com/users/jobergum/followers",
            "following_url": "https://api.github.com/users/jobergum/following{/other_user}",
            "gists_url": "https://api.github.com/users/jobergum/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jobergum/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jobergum/subscriptions",
            "organizations_url": "https://api.github.com/users/jobergum/orgs",
            "repos_url": "https://api.github.com/users/jobergum/repos",
            "events_url": "https://api.github.com/users/jobergum/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jobergum/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-10-29T09:38:52Z",
        "updated_at": "2021-10-29T09:38:52Z",
        "author_association": "NONE",
        "body": "Thank you for your feedback @yufenglee! Really appreciate you taking time to look at this, \r\n\r\n>provide an option to disable the quantization of MatMul without constant weight.\r\nCould you clarify this? \r\n\r\nWith the above exclusions the model size is only reduced from 428005084 to 395738272 so it's not a lot of compression compared to full quantization which reduces the model to 107150516. \r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/954599520/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/984937207",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9599#issuecomment-984937207",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9599",
        "id": 984937207,
        "node_id": "IC_kwDOCVq1mM46tPL3",
        "user": {
            "login": "jobergum",
            "id": 20928528,
            "node_id": "MDQ6VXNlcjIwOTI4NTI4",
            "avatar_url": "https://avatars.githubusercontent.com/u/20928528?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jobergum",
            "html_url": "https://github.com/jobergum",
            "followers_url": "https://api.github.com/users/jobergum/followers",
            "following_url": "https://api.github.com/users/jobergum/following{/other_user}",
            "gists_url": "https://api.github.com/users/jobergum/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jobergum/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jobergum/subscriptions",
            "organizations_url": "https://api.github.com/users/jobergum/orgs",
            "repos_url": "https://api.github.com/users/jobergum/repos",
            "events_url": "https://api.github.com/users/jobergum/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jobergum/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-12-02T19:31:14Z",
        "updated_at": "2021-12-02T19:31:14Z",
        "author_association": "NONE",
        "body": "@yufenglee  Do you believe the mentioned https://github.com/microsoft/onnxruntime/pull/9640 address the accuracy problem with this model?",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/984937207/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/984966436",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9599#issuecomment-984966436",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9599",
        "id": 984966436,
        "node_id": "IC_kwDOCVq1mM46tWUk",
        "user": {
            "login": "yufenglee",
            "id": 30486710,
            "node_id": "MDQ6VXNlcjMwNDg2NzEw",
            "avatar_url": "https://avatars.githubusercontent.com/u/30486710?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/yufenglee",
            "html_url": "https://github.com/yufenglee",
            "followers_url": "https://api.github.com/users/yufenglee/followers",
            "following_url": "https://api.github.com/users/yufenglee/following{/other_user}",
            "gists_url": "https://api.github.com/users/yufenglee/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/yufenglee/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/yufenglee/subscriptions",
            "organizations_url": "https://api.github.com/users/yufenglee/orgs",
            "repos_url": "https://api.github.com/users/yufenglee/repos",
            "events_url": "https://api.github.com/users/yufenglee/events{/privacy}",
            "received_events_url": "https://api.github.com/users/yufenglee/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-12-02T20:13:46Z",
        "updated_at": "2021-12-02T20:13:46Z",
        "author_association": "MEMBER",
        "body": "The PR exposes MatMulConstBOnly, so you can leverage it and you don't need to specify the nodes to exclude:\r\n```\r\nquantize_dynamic(\"msmarco_multilingual.onnx\",\r\n                 \"msmarco_multilingual_int8_is.onnx\",\r\n                 weight_type=QuantType.QUInt8,\r\n                 extra_options={'MatMulConstBOnly':True}) \r\n```\r\nhttps://github.com/microsoft/onnxruntime/blob/3f5c1e1c58939c0de30e232ea0ef0c30644166b0/onnxruntime/python/tools/quantization/quantize.py#L296\r\n\r\nPlease try it and see if it help. In addition, you can try enabling per_channel. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/984966436/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1100852211",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9599#issuecomment-1100852211",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9599",
        "id": 1100852211,
        "node_id": "IC_kwDOCVq1mM5Bnavz",
        "user": {
            "login": "stale[bot]",
            "id": 26384082,
            "node_id": "MDM6Qm90MjYzODQwODI=",
            "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stale%5Bbot%5D",
            "html_url": "https://github.com/apps/stale",
            "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
            "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
            "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
            "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
            "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
            "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
            "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
            "type": "Bot",
            "site_admin": false
        },
        "created_at": "2022-04-17T10:53:48Z",
        "updated_at": "2022-04-17T10:53:48Z",
        "author_association": "NONE",
        "body": "This issue has been automatically marked as stale due to inactivity and will be closed in 7 days if no further activity occurs. If further support is needed, please provide an update and/or more details.\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1100852211/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]