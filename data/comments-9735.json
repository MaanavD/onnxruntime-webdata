[
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/967770125",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9735#issuecomment-967770125",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9735",
        "id": 967770125,
        "node_id": "IC_kwDOCVq1mM45rwAN",
        "user": {
            "login": "fsb4000",
            "id": 4289847,
            "node_id": "MDQ6VXNlcjQyODk4NDc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4289847?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fsb4000",
            "html_url": "https://github.com/fsb4000",
            "followers_url": "https://api.github.com/users/fsb4000/followers",
            "following_url": "https://api.github.com/users/fsb4000/following{/other_user}",
            "gists_url": "https://api.github.com/users/fsb4000/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fsb4000/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fsb4000/subscriptions",
            "organizations_url": "https://api.github.com/users/fsb4000/orgs",
            "repos_url": "https://api.github.com/users/fsb4000/repos",
            "events_url": "https://api.github.com/users/fsb4000/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fsb4000/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-11-13T03:14:12Z",
        "updated_at": "2021-11-13T03:14:43Z",
        "author_association": "NONE",
        "body": "just a note: at STL we think it's a pybind bug: https://github.com/pybind/pybind11/issues/3459\r\n\r\nWe also found a workaround: \r\n`#define _STL_CRT_SECURE_INVALID_PARAMETER(expr) _CRT_SECURE_INVALID_PARAMETER(expr)`\r\n\r\nhttps://github.com/microsoft/STL/issues/2335#issuecomment-967306862\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/967770125/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/967772064",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9735#issuecomment-967772064",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9735",
        "id": 967772064,
        "node_id": "IC_kwDOCVq1mM45rweg",
        "user": {
            "login": "snnn",
            "id": 856316,
            "node_id": "MDQ6VXNlcjg1NjMxNg==",
            "avatar_url": "https://avatars.githubusercontent.com/u/856316?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/snnn",
            "html_url": "https://github.com/snnn",
            "followers_url": "https://api.github.com/users/snnn/followers",
            "following_url": "https://api.github.com/users/snnn/following{/other_user}",
            "gists_url": "https://api.github.com/users/snnn/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/snnn/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/snnn/subscriptions",
            "organizations_url": "https://api.github.com/users/snnn/orgs",
            "repos_url": "https://api.github.com/users/snnn/repos",
            "events_url": "https://api.github.com/users/snnn/events{/privacy}",
            "received_events_url": "https://api.github.com/users/snnn/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-11-13T03:32:07Z",
        "updated_at": "2021-11-13T03:32:07Z",
        "author_association": "MEMBER",
        "body": "I will close it.  Please think python windows debug build is something “sold as it is”. I’m sorry for my poor vocabulary, we don’t sell it, but I couldn’t find a better word. Anyway, I guess you can understand what I mean.  Because the build config relies on  a dirty hack: undef “_DEBUG”. It barely works. We will not pay time  to deal with the potential bugs. It’s not worth. \r\n\r\nif pybind11 can help us find a better way, we will take it. Otherwise I would prefer to leave it as it is. ",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/967772064/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/969577865",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9735#issuecomment-969577865",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9735",
        "id": 969577865,
        "node_id": "IC_kwDOCVq1mM45ypWJ",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-11-16T01:08:10Z",
        "updated_at": "2021-11-16T01:09:01Z",
        "author_association": "MEMBER",
        "body": "pybind11 only temporarily [undefines _DEBUG](https://github.com/pybind/pybind11/blob/a80b22374ae9398962fe9746f84edc7e7982f9f7/include/pybind11/detail/common.h#L158) when including the python headers. it re-defines it here: https://github.com/pybind/pybind11/blob/a80b22374ae9398962fe9746f84edc7e7982f9f7/include/pybind11/detail/common.h#L209\r\n\r\nI would have expected if that was an issue, everybody using pybind11 with VS2022 and STL should hit the issue.",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/969577865/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/970181043",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9735#issuecomment-970181043",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9735",
        "id": 970181043,
        "node_id": "IC_kwDOCVq1mM4508mz",
        "user": {
            "login": "fsb4000",
            "id": 4289847,
            "node_id": "MDQ6VXNlcjQyODk4NDc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4289847?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fsb4000",
            "html_url": "https://github.com/fsb4000",
            "followers_url": "https://api.github.com/users/fsb4000/followers",
            "following_url": "https://api.github.com/users/fsb4000/following{/other_user}",
            "gists_url": "https://api.github.com/users/fsb4000/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fsb4000/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fsb4000/subscriptions",
            "organizations_url": "https://api.github.com/users/fsb4000/orgs",
            "repos_url": "https://api.github.com/users/fsb4000/repos",
            "events_url": "https://api.github.com/users/fsb4000/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fsb4000/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-11-16T11:30:49Z",
        "updated_at": "2021-11-16T11:30:49Z",
        "author_association": "NONE",
        "body": "everybody using pybind11 with VS2022 with Debug builds and STL hit the issue\r\nit's a reproducible bug.\r\nminimal example with the same bug:\r\n\r\n```\r\n#undef _DEBUG\r\n#include <corecrt.h>\r\n#define _DEBUG\r\n\r\n#include <random>\r\n\r\nvoid test() {\r\n  _STL_ASSERT(false, \"hi\");\r\n}\r\n\r\nint main() {\r\n  test();\r\n}\r\n```\r\n```\r\ncl /EHsc test.cpp\r\nMicrosoft (R) C/C++ Optimizing Compiler Version 19.31.30818 for x64\r\nCopyright (C) Microsoft Corporation.  All rights reserved.\r\n\r\ntest.cpp\r\nC:\\Program Files\\Microsoft Visual Studio\\2022\\Preview\\VC\\Tools\\MSVC\\14.31.30818\\include\\xmemory(154): error C2039: '_invalid_parameter': is not a member of '`global namespace''\r\nC:\\Program Files\\Microsoft Visual Studio\\2022\\Preview\\VC\\Tools\\MSVC\\14.31.30818\\include\\xmemory(154): error C3861: '_invalid_parameter': identifier not found\r\nC:\\Program Files\\Microsoft Visual Studio\\2022\\Preview\\VC\\Tools\\MSVC\\14.31.30818\\include\\xmemory(164): error C2039: '_invalid_parameter': is not a member of '`global namespace''\r\nC:\\Program Files\\Microsoft Visual Studio\\2022\\Preview\\VC\\Tools\\MSVC\\14.31.30818\\include\\xmemory(164): error C3861: '_invalid_parameter': identifier not found\r\nC:\\Program Files\\Microsoft Visual Studio\\2022\\Preview\\VC\\Tools\\MSVC\\14.31.30818\\include\\xmemory(1199): error C2039: '_invalid_parameter': is not a member of '`global namespace''\r\nC:\\Program Files\\Microsoft Visual Studio\\2022\\Preview\\VC\\Tools\\MSVC\\14.31.30818\\include\\xmemory(1199): error C3861: '_invalid_parameter': identifier not found\r\nC:\\Program Files\\Microsoft Visual Studio\\2022\\Preview\\VC\\Tools\\MSVC\\14.31.30818\\include\\random(1927): error C2039: '_invalid_parameter': is not a member of '`global namespace''\r\nC:\\Program Files\\Microsoft Visual Studio\\2022\\Preview\\VC\\Tools\\MSVC\\14.31.30818\\include\\random(1927): error C3861: '_invalid_parameter': identifier not found\r\ntest.cpp(7): error C2039: '_invalid_parameter': is not a member of '`global namespace''\r\ntest.cpp(7): error C3861: '_invalid_parameter': identifier not found\r\n```\r\n\r\nPython.h includes <stdio.h>\r\n\r\n![изображение](https://user-images.githubusercontent.com/4289847/141977382-7180b235-b918-4f47-9cbd-ac4311744f55.png)\r\n\r\nstdio.h includes <corecrt.h>\r\n![изображение](https://user-images.githubusercontent.com/4289847/141977481-51424113-e5be-4538-930a-b6011da13e7d.png)",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/970181043/reactions",
            "total_count": 2,
            "+1": 2,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/970718821",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9735#issuecomment-970718821",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9735",
        "id": 970718821,
        "node_id": "IC_kwDOCVq1mM452_5l",
        "user": {
            "login": "skottmckay",
            "id": 979079,
            "node_id": "MDQ6VXNlcjk3OTA3OQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/979079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/skottmckay",
            "html_url": "https://github.com/skottmckay",
            "followers_url": "https://api.github.com/users/skottmckay/followers",
            "following_url": "https://api.github.com/users/skottmckay/following{/other_user}",
            "gists_url": "https://api.github.com/users/skottmckay/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/skottmckay/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/skottmckay/subscriptions",
            "organizations_url": "https://api.github.com/users/skottmckay/orgs",
            "repos_url": "https://api.github.com/users/skottmckay/repos",
            "events_url": "https://api.github.com/users/skottmckay/events{/privacy}",
            "received_events_url": "https://api.github.com/users/skottmckay/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-11-16T22:03:14Z",
        "updated_at": "2021-11-16T22:03:14Z",
        "author_association": "MEMBER",
        "body": "Thanks for the detailed step by step of the include chain. Very helpful.\r\n\r\nOne short-term approach is to make sure corecrt.h is included before the _DEBUG stuff. I tested this by adding a line in the pybind11 common.h (for expediency) to include it prior to the undef of _DEBUG and was able to build and use the generated python model to successfully create an InferenceSession.\r\n\r\n```c++\r\n/// Include Python header, disable linking to pythonX_d.lib on Windows in debug mode\r\n#if defined(_MSC_VER)\r\n#    if (PY_MAJOR_VERSION == 3 && PY_MINOR_VERSION < 4)\r\n#        define HAVE_ROUND 1\r\n#    endif\r\n#    include <corecrt.h>\r\n#    pragma warning(push)\r\n#    pragma warning(disable : 4510 4610 4512 4005)\r\n#    if defined(_DEBUG) && !defined(Py_DEBUG)\r\n#        define PYBIND11_DEBUG_MARKER\r\n#        undef _DEBUG\r\n#    endif\r\n#endif\r\n```\r\n\r\nUntil fixed in pybind11 this ordering could be done via an intermediate header that is used instead of directly having `#include <pybind11/pybind11.h>` in the ORT source. The intermediate header would add the `#include <corecrt.h>` for a VS2022 build before including pybind11.h . \r\n",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/970718821/reactions",
            "total_count": 2,
            "+1": 2,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1060970232",
        "html_url": "https://github.com/microsoft/onnxruntime/issues/9735#issuecomment-1060970232",
        "issue_url": "https://api.github.com/repos/microsoft/onnxruntime/issues/9735",
        "id": 1060970232,
        "node_id": "IC_kwDOCVq1mM4_PR74",
        "user": {
            "login": "ax3l",
            "id": 1353258,
            "node_id": "MDQ6VXNlcjEzNTMyNTg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1353258?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ax3l",
            "html_url": "https://github.com/ax3l",
            "followers_url": "https://api.github.com/users/ax3l/followers",
            "following_url": "https://api.github.com/users/ax3l/following{/other_user}",
            "gists_url": "https://api.github.com/users/ax3l/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/ax3l/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/ax3l/subscriptions",
            "organizations_url": "https://api.github.com/users/ax3l/orgs",
            "repos_url": "https://api.github.com/users/ax3l/repos",
            "events_url": "https://api.github.com/users/ax3l/events{/privacy}",
            "received_events_url": "https://api.github.com/users/ax3l/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-03-07T18:01:04Z",
        "updated_at": "2022-03-07T18:01:39Z",
        "author_association": "NONE",
        "body": "Ah, 2.9.1 definitely fixes this (likely earlier as well, did not bisect).",
        "reactions": {
            "url": "https://api.github.com/repos/microsoft/onnxruntime/issues/comments/1060970232/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]